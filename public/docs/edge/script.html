<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Scripts &mdash; Nextflow 23.12.0-edge documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/theme.css" type="text/css" />
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Processes" href="process.html" />
    <link rel="prev" title="Basic concepts" href="basic.html" />
     
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-TNCXSWG');</script>
    <!-- End Google Tag Manager -->

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html">
            <img src="_static/nextflow-logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div>
    <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="getstarted.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic.html">Basic concepts</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Language</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Scripts</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#groovy-basics">Groovy basics</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#hello-world">Hello world</a></li>
<li class="toctree-l3"><a class="reference internal" href="#variables">Variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="#lists">Lists</a></li>
<li class="toctree-l3"><a class="reference internal" href="#maps">Maps</a></li>
<li class="toctree-l3"><a class="reference internal" href="#multiple-assignment">Multiple assignment</a></li>
<li class="toctree-l3"><a class="reference internal" href="#conditional-execution">Conditional Execution</a></li>
<li class="toctree-l3"><a class="reference internal" href="#strings">Strings</a></li>
<li class="toctree-l3"><a class="reference internal" href="#string-interpolation">String interpolation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#multi-line-strings">Multi-line strings</a></li>
<li class="toctree-l3"><a class="reference internal" href="#regular-expressions">Regular expressions</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#string-replacement">String replacement</a></li>
<li class="toctree-l4"><a class="reference internal" href="#capturing-groups">Capturing groups</a></li>
<li class="toctree-l4"><a class="reference internal" href="#removing-part-of-a-string">Removing part of a string</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#functions">Functions</a></li>
<li class="toctree-l3"><a class="reference internal" href="#closures">Closures</a></li>
<li class="toctree-l3"><a class="reference internal" href="#syntax-sugar">Syntax sugar</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#implicit-variables">Implicit variables</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#script-implicit-variables">Script implicit variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configuration-implicit-variables">Configuration implicit variables</a></li>
<li class="toctree-l3"><a class="reference internal" href="#process-implicit-variables">Process implicit variables</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#implicit-functions">Implicit functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="#implicit-classes">Implicit classes</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#channel">Channel</a></li>
<li class="toctree-l3"><a class="reference internal" href="#duration">Duration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#memoryunit">MemoryUnit</a></li>
<li class="toctree-l3"><a class="reference internal" href="#valueobject">ValueObject</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#files-and-i-o">Files and I/O</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#opening-files">Opening files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#getting-file-attributes">Getting file attributes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#reading-and-writing">Reading and writing</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#reading-and-writing-an-entire-file">Reading and writing an entire file</a></li>
<li class="toctree-l4"><a class="reference internal" href="#appending-to-a-file">Appending to a file</a></li>
<li class="toctree-l4"><a class="reference internal" href="#reading-a-file-line-by-line">Reading a file line by line</a></li>
<li class="toctree-l4"><a class="reference internal" href="#advanced-file-reading">Advanced file reading</a></li>
<li class="toctree-l4"><a class="reference internal" href="#advanced-file-writing">Advanced file writing</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#filesystem-operations">Filesystem operations</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#listing-directories">Listing directories</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#fetching-http-ftp-files">Fetching HTTP/FTP files</a></li>
<li class="toctree-l3"><a class="reference internal" href="#splitting-and-counting-records">Splitting and counting records</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="process.html">Processes</a></li>
<li class="toctree-l1"><a class="reference internal" href="channel.html">Channels</a></li>
<li class="toctree-l1"><a class="reference internal" href="operator.html">Operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="workflow.html">Workflows</a></li>
<li class="toctree-l1"><a class="reference internal" href="module.html">Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="config.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="dsl1.html">Migrating from DSL 1</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Execution</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Command line interface (CLI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="executor.html">Executors</a></li>
<li class="toctree-l1"><a class="reference internal" href="cache-and-resume.html">Caching and resuming</a></li>
<li class="toctree-l1"><a class="reference internal" href="tracing.html">Tracing &amp; visualisation</a></li>
<li class="toctree-l1"><a class="reference internal" href="metrics.html">Metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="sharing.html">Pipeline sharing</a></li>
<li class="toctree-l1"><a class="reference internal" href="metadata.html">Workflow introspection</a></li>
<li class="toctree-l1"><a class="reference internal" href="mail.html">Mail &amp; Notifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="plugins.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="secrets.html">Secrets</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Software dependencies</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="container.html">Containers</a></li>
<li class="toctree-l1"><a class="reference internal" href="conda.html">Conda environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="spack.html">Spack environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="wave.html">Wave containers</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Compute &amp; storage platforms</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="aws.html">AWS Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="amazons3.html">AWS S3 storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.html">Azure Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="fusion.html">Fusion file system</a></li>
<li class="toctree-l1"><a class="reference internal" href="google.html">Google Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="kubernetes.html">Kubernetes</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Additional integrations</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="flux.html">Flux Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="ignite.html">Apache Ignite</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contributing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="developer/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer/packages.html">Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer/plugins.html">Core plugins</a></li>
</ul>

        </div>
    <div class="nav-footer-logo">
        <a href="https://seqera.io/" target="_blank" title="Developed by Seqera Labs">
            Nextflow is developed by:<br>
            <img src="_static/seqera-logo.svg" alt="Seqera Labs">
        </a>
    </div>

      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Nextflow</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a></li>
      <li class="breadcrumb-item active">Scripts</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/nextflow-io/nextflow/blob/master/docs/script.md" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="scripts">
<span id="script-page"></span><h1>Scripts<a class="headerlink" href="#scripts" title="Permalink to this heading"></a></h1>
<p>The Nextflow scripting language is an extension of the Groovy programming language. Groovy is a powerful programming language for the Java virtual machine. The Nextflow syntax has been specialized to ease the writing of computational pipelines in a declarative manner.</p>
<p>Nextflow can execute any piece of Groovy code or use any library for the JVM platform.</p>
<p>For a detailed description of the Groovy programming language, reference these links:</p>
<ul class="simple">
<li><p><a class="reference external" href="http://groovy-lang.org/documentation.html">Groovy User Guide</a></p></li>
<li><p><a class="reference external" href="http://www.cheat-sheets.org/saved-copy/rc015-groovy_online.pdf">Groovy Cheat sheet</a></p></li>
<li><p><a class="reference external" href="http://www.manning.com/koenig2/">Groovy in Action</a></p></li>
</ul>
<p>Below you can find a crash course in the most important language constructs used in the Nextflow scripting language.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Nextflow uses UTF-8 as the default character encoding for source files. Make sure to use UTF-8 encoding when editing Nextflow scripts with your preferred text editor.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Nextflow scripts have a maximum size of 64 KiB. To avoid this limit for large pipelines, consider moving pipeline components into separate files and including them as modules.</p>
</div>
<section id="groovy-basics">
<h2>Groovy basics<a class="headerlink" href="#groovy-basics" title="Permalink to this heading"></a></h2>
<section id="hello-world">
<h3>Hello world<a class="headerlink" href="#hello-world" title="Permalink to this heading"></a></h3>
<p>To print something is as easy as using one of the <code class="docutils literal notranslate"><span class="pre">print</span></code> or <code class="docutils literal notranslate"><span class="pre">println</span></code> methods.</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">println</span><span class="w"> </span><span class="s2">&quot;Hello, World!&quot;</span>
</pre></div>
</div>
<p>The only difference between the two is that the <code class="docutils literal notranslate"><span class="pre">println</span></code> method implicitly appends a newline character to the printed string.</p>
</section>
<section id="variables">
<h3>Variables<a class="headerlink" href="#variables" title="Permalink to this heading"></a></h3>
<p>To define a variable, simply assign a value to it:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span>
<span class="n">println</span><span class="w"> </span><span class="n">x</span>

<span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="k">new</span><span class="w"> </span><span class="n">java</span><span class="o">.</span><span class="na">util</span><span class="o">.</span><span class="na">Date</span><span class="o">()</span>
<span class="n">println</span><span class="w"> </span><span class="n">x</span>

<span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">-</span><span class="mf">3.1499392</span>
<span class="n">println</span><span class="w"> </span><span class="n">x</span>

<span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">false</span>
<span class="n">println</span><span class="w"> </span><span class="n">x</span>

<span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;Hi&quot;</span>
<span class="n">println</span><span class="w"> </span><span class="n">x</span>
</pre></div>
</div>
</section>
<section id="lists">
<h3>Lists<a class="headerlink" href="#lists" title="Permalink to this heading"></a></h3>
<p>A List object can be defined by placing the list items in square brackets:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">myList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="mi">1776</span><span class="o">,</span><span class="w"> </span><span class="o">-</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">33</span><span class="o">,</span><span class="w"> </span><span class="mi">99</span><span class="o">,</span><span class="w"> </span><span class="mi">0</span><span class="o">,</span><span class="w"> </span><span class="mi">928734928763</span><span class="o">]</span>
</pre></div>
</div>
<p>You can access a given item in the list with square-bracket notation (indexes start at 0):</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">println</span><span class="w"> </span><span class="n">myList</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span>
</pre></div>
</div>
<p>In order to get the length of the list use the <code class="docutils literal notranslate"><span class="pre">size</span></code> method:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">println</span><span class="w"> </span><span class="n">myList</span><span class="o">.</span><span class="na">size</span><span class="o">()</span>
</pre></div>
</div>
<p>Learn more about lists:</p>
<ul class="simple">
<li><p><a class="reference external" href="http://groovy-lang.org/groovy-dev-kit.html#Collections-Lists">Groovy Lists tutorial</a></p></li>
<li><p><a class="reference external" href="http://docs.groovy-lang.org/latest/html/groovy-jdk/java/util/List.html">Groovy List API</a></p></li>
<li><p><a class="reference external" href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/List.html">Java List API</a></p></li>
</ul>
</section>
<section id="maps">
<h3>Maps<a class="headerlink" href="#maps" title="Permalink to this heading"></a></h3>
<p>Maps are used to store <em>associative arrays</em> (also known as <em>dictionaries</em>). They are unordered collections of heterogeneous, named data:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">scores</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="s2">&quot;Brett&quot;</span><span class="o">:</span><span class="w"> </span><span class="mi">100</span><span class="o">,</span><span class="w"> </span><span class="s2">&quot;Pete&quot;</span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Did not finish&quot;</span><span class="o">,</span><span class="w"> </span><span class="s2">&quot;Andrew&quot;</span><span class="o">:</span><span class="w"> </span><span class="mf">86.87934</span><span class="o">]</span>
</pre></div>
</div>
<p>Note that each of the values stored in the map can be of a different type. <code class="docutils literal notranslate"><span class="pre">Brett</span></code> is an integer, <code class="docutils literal notranslate"><span class="pre">Pete</span></code> is a string, and <code class="docutils literal notranslate"><span class="pre">Andrew</span></code> is a floating-point number.</p>
<p>We can access the values in a map in two main ways:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">println</span><span class="w"> </span><span class="n">scores</span><span class="o">[</span><span class="s2">&quot;Pete&quot;</span><span class="o">]</span>
<span class="n">println</span><span class="w"> </span><span class="n">scores</span><span class="o">.</span><span class="na">Pete</span>
</pre></div>
</div>
<p>To add data to or modify a map, the syntax is similar to adding values to list:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">scores</span><span class="o">[</span><span class="s2">&quot;Pete&quot;</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">3</span>
<span class="n">scores</span><span class="o">[</span><span class="s2">&quot;Cedric&quot;</span><span class="o">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">120</span>
</pre></div>
</div>
<p>You can also use the <code class="docutils literal notranslate"><span class="pre">+</span></code> operator to add two maps together:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">new_scores</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">scores</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="o">[</span><span class="s2">&quot;Pete&quot;</span><span class="o">:</span><span class="w"> </span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="s2">&quot;Cedric&quot;</span><span class="o">:</span><span class="w"> </span><span class="mi">120</span><span class="o">]</span>
</pre></div>
</div>
<p>When adding two maps, the first map is copied and then appended with the keys from the second map. Any conflicting keys are overwritten by the second map.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Copying a map with the <code class="docutils literal notranslate"><span class="pre">+</span></code> operator is a safer way to modify maps in Nextflow, specifically when passing maps through channels. This way, a new instance of the map will be created, and any references to the original map won’t be affected.</p>
</div>
<p>Learn more about maps:</p>
<ul class="simple">
<li><p><a class="reference external" href="http://groovy-lang.org/groovy-dev-kit.html#Collections-Maps">Groovy Maps tutorial</a></p></li>
<li><p><a class="reference external" href="http://docs.groovy-lang.org/latest/html/groovy-jdk/java/util/Map.html">Groovy Map API</a></p></li>
<li><p><a class="reference external" href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Map.html">Java Map API</a></p></li>
</ul>
</section>
<section id="multiple-assignment">
<span id="script-multiple-assignment"></span><h3>Multiple assignment<a class="headerlink" href="#multiple-assignment" title="Permalink to this heading"></a></h3>
<p>An array or a list object can used to assign to multiple variables at once:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="o">(</span><span class="n">a</span><span class="o">,</span><span class="w"> </span><span class="n">b</span><span class="o">,</span><span class="w"> </span><span class="n">c</span><span class="o">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="mi">10</span><span class="o">,</span><span class="w"> </span><span class="mi">20</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;foo&#39;</span><span class="o">]</span>
<span class="k">assert</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">20</span><span class="w"> </span><span class="o">&amp;&amp;</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;foo&#39;</span>
</pre></div>
</div>
<p>The three variables on the left of the assignment operator are initialized by the corresponding item in the list.</p>
<p>Read more about <a class="reference external" href="http://www.groovy-lang.org/semantics.html#_multiple_assignment">Multiple assignment</a> in the Groovy documentation.</p>
</section>
<section id="conditional-execution">
<h3>Conditional Execution<a class="headerlink" href="#conditional-execution" title="Permalink to this heading"></a></h3>
<p>One of the most important features of any programming language is the ability to execute different code under different conditions. The simplest way to do this is to use the <code class="docutils literal notranslate"><span class="pre">if</span></code> construct:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Math</span><span class="o">.</span><span class="na">random</span><span class="o">()</span>
<span class="k">if</span><span class="o">(</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mf">0.5</span><span class="w"> </span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="n">println</span><span class="w"> </span><span class="s2">&quot;You lost.&quot;</span>
<span class="o">}</span>
<span class="k">else</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="n">println</span><span class="w"> </span><span class="s2">&quot;You won!&quot;</span>
<span class="o">}</span>
</pre></div>
</div>
</section>
<section id="strings">
<h3>Strings<a class="headerlink" href="#strings" title="Permalink to this heading"></a></h3>
<p>Strings can be defined by enclosing text in single or double quotes (<code class="docutils literal notranslate"><span class="pre">'</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;</span></code> characters):</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">println</span><span class="w"> </span><span class="s2">&quot;he said &#39;cheese&#39; once&quot;</span>
<span class="n">println</span><span class="w"> </span><span class="s1">&#39;he said &quot;cheese!&quot; again&#39;</span>
</pre></div>
</div>
<p>Strings can be concatenated with <code class="docutils literal notranslate"><span class="pre">+</span></code>:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;world&quot;</span>
<span class="n">print</span><span class="w"> </span><span class="s2">&quot;hello &quot;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s2">&quot;\n&quot;</span>
</pre></div>
</div>
</section>
<section id="string-interpolation">
<span id="id1"></span><h3>String interpolation<a class="headerlink" href="#string-interpolation" title="Permalink to this heading"></a></h3>
<p>There is an important difference between single-quoted and double-quoted strings: Double-quoted strings support variable interpolations, while single-quoted strings do not.</p>
<p>In practice, double-quoted strings can contain the value of an arbitrary variable by prefixing its name with the <code class="docutils literal notranslate"><span class="pre">$</span></code> character, or the value of any expression by using the <code class="docutils literal notranslate"><span class="pre">${expression}</span></code> syntax, similar to Bash/shell scripts:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">foxtype</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;quick&#39;</span>
<span class="n">foxcolor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="s1">&#39;b&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;r&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;o&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;w&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;n&#39;</span><span class="o">]</span>
<span class="n">println</span><span class="w"> </span><span class="s2">&quot;The $foxtype ${foxcolor.join()} fox&quot;</span>

<span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Hello&#39;</span>
<span class="n">println</span><span class="w"> </span><span class="s1">&#39;$x + $y&#39;</span>
</pre></div>
</div>
<p>This code prints:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>The quick brown fox
$x + $y
</pre></div>
</div>
</section>
<section id="multi-line-strings">
<h3>Multi-line strings<a class="headerlink" href="#multi-line-strings" title="Permalink to this heading"></a></h3>
<p>A block of text that span multiple lines can be defined by delimiting it with triple single or double quotes:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    hello there James</span>
<span class="s2">    how are you today?</span>
<span class="s2">    &quot;&quot;&quot;</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Like before, multi-line strings inside double quotes support variable interpolation, while single-quoted multi-line strings do not.</p>
</div>
<p>As in Bash/shell scripts, terminating a line in a multi-line string with a <code class="docutils literal notranslate"><span class="pre">\</span></code> character prevents a newline character from separating that line from the one that follows:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">myLongCmdline</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">    blastp \</span>
<span class="s2">    -in $input_query \</span>
<span class="s2">    -out $output_file \</span>
<span class="s2">    -db $blast_database \</span>
<span class="s2">    -html</span>
<span class="s2">    &quot;&quot;&quot;</span>

<span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">myLongCmdline</span><span class="o">.</span><span class="na">execute</span><span class="o">().</span><span class="na">text</span>
</pre></div>
</div>
<p>In the preceding example, <code class="docutils literal notranslate"><span class="pre">blastp</span></code> and its <code class="docutils literal notranslate"><span class="pre">-in</span></code>, <code class="docutils literal notranslate"><span class="pre">-out</span></code>, <code class="docutils literal notranslate"><span class="pre">-db</span></code> and <code class="docutils literal notranslate"><span class="pre">-html</span></code> switches and their arguments are effectively a single line.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>When using backslashes to continue a multi-line command, make sure to not put any spaces after the backslash, otherwise it will be interpreted by the Groovy lexer as an escaped space instead of a backslash, which will make your script incorrect. It will also print this warning:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">unknown</span> <span class="n">recognition</span> <span class="n">error</span> <span class="nb">type</span><span class="p">:</span> <span class="n">groovyjarjarantlr4</span><span class="o">.</span><span class="n">v4</span><span class="o">.</span><span class="n">runtime</span><span class="o">.</span><span class="n">LexerNoViableAltException</span>
</pre></div>
</div>
</div>
</section>
<section id="regular-expressions">
<span id="script-regexp"></span><h3>Regular expressions<a class="headerlink" href="#regular-expressions" title="Permalink to this heading"></a></h3>
<p>Regular expressions are the Swiss Army knife of text processing. They provide the programmer with the ability to match and extract patterns from strings.</p>
<p>Regular expressions are available via the <code class="docutils literal notranslate"><span class="pre">~/pattern/</span></code> syntax and the <code class="docutils literal notranslate"><span class="pre">=~</span></code> and <code class="docutils literal notranslate"><span class="pre">==~</span></code> operators.</p>
<p>Use <code class="docutils literal notranslate"><span class="pre">=~</span></code> to check whether a given pattern occurs anywhere in a string:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="k">assert</span><span class="w"> </span><span class="s1">&#39;foo&#39;</span><span class="w"> </span><span class="o">=~</span><span class="w"> </span><span class="s">/foo/</span><span class="w">       </span><span class="c1">// return TRUE</span>
<span class="k">assert</span><span class="w"> </span><span class="s1">&#39;foobar&#39;</span><span class="w"> </span><span class="o">=~</span><span class="w"> </span><span class="s">/foo/</span><span class="w">    </span><span class="c1">// return TRUE</span>
</pre></div>
</div>
<p>Use <code class="docutils literal notranslate"><span class="pre">==~</span></code> to check whether a string matches a given regular expression pattern exactly.</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="k">assert</span><span class="w"> </span><span class="s1">&#39;foo&#39;</span><span class="w"> </span><span class="o">==~</span><span class="w"> </span><span class="s">/foo/</span><span class="w">       </span><span class="c1">// return TRUE</span>
<span class="k">assert</span><span class="w"> </span><span class="s1">&#39;foobar&#39;</span><span class="w"> </span><span class="o">==~</span><span class="w"> </span><span class="s">/foo/</span><span class="w">    </span><span class="c1">// return FALSE</span>
</pre></div>
</div>
<p>It is worth noting that the <code class="docutils literal notranslate"><span class="pre">~</span></code> operator creates a Java <code class="docutils literal notranslate"><span class="pre">Pattern</span></code> object from the given string, while the <code class="docutils literal notranslate"><span class="pre">=~</span></code> operator creates a Java <code class="docutils literal notranslate"><span class="pre">Matcher</span></code> object.</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="s">/abc/</span>
<span class="n">println</span><span class="w"> </span><span class="n">x</span><span class="o">.</span><span class="na">class</span>
<span class="c1">// prints java.util.regex.Pattern</span>

<span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;some string&#39;</span><span class="w"> </span><span class="o">=~</span><span class="w"> </span><span class="s">/abc/</span>
<span class="n">println</span><span class="w"> </span><span class="n">y</span><span class="o">.</span><span class="na">class</span>
<span class="c1">// prints java.util.regex.Matcher</span>
</pre></div>
</div>
<p>Regular expression support is imported from Java. Java’s regular expression language and API is documented in the <a class="reference external" href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/regex/Pattern.html">Pattern</a> class.</p>
<p>You may also be interested in this post: <a class="reference external" href="https://web.archive.org/web/20170621185113/http://www.naleid.com/blog/2008/05/19/dont-fear-the-regexp">Groovy: Don’t Fear the RegExp</a>.</p>
<section id="string-replacement">
<h4>String replacement<a class="headerlink" href="#string-replacement" title="Permalink to this heading"></a></h4>
<p>To replace pattern occurrences in a given string, use the <code class="docutils literal notranslate"><span class="pre">replaceFirst</span></code> and <code class="docutils literal notranslate"><span class="pre">replaceAll</span></code> methods:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;colour&quot;</span><span class="o">.</span><span class="na">replaceFirst</span><span class="o">(</span><span class="s">/ou/</span><span class="o">,</span><span class="w"> </span><span class="s2">&quot;o&quot;</span><span class="o">)</span>
<span class="n">println</span><span class="w"> </span><span class="n">x</span>
<span class="c1">// prints: color</span>

<span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;cheesecheese&quot;</span><span class="o">.</span><span class="na">replaceAll</span><span class="o">(</span><span class="s">/cheese/</span><span class="o">,</span><span class="w"> </span><span class="s2">&quot;nice&quot;</span><span class="o">)</span>
<span class="n">println</span><span class="w"> </span><span class="n">y</span>
<span class="c1">// prints: nicenice</span>
</pre></div>
</div>
</section>
<section id="capturing-groups">
<h4>Capturing groups<a class="headerlink" href="#capturing-groups" title="Permalink to this heading"></a></h4>
<p>You can match a pattern that includes groups. First create a matcher object with the <code class="docutils literal notranslate"><span class="pre">=~</span></code> operator. Then, you can index the matcher object to find the matches: <code class="docutils literal notranslate"><span class="pre">matcher[0]</span></code> returns a list representing the first match of the regular expression in the string. The first list element is the string that matches the entire regular expression, and the remaining elements are the strings that match each group.</p>
<p>Here’s how it works:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">programVersion</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;2.7.3-beta&#39;</span>
<span class="n">m</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">programVersion</span><span class="w"> </span><span class="o">=~</span><span class="w"> </span><span class="s">/(\d+)\.(\d+)\.(\d+)-?(.+)/</span>

<span class="k">assert</span><span class="w"> </span><span class="n">m</span><span class="o">[</span><span class="mi">0</span><span class="o">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="o">[</span><span class="s1">&#39;2.7.3-beta&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;2&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;7&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;3&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;beta&#39;</span><span class="o">]</span>
<span class="k">assert</span><span class="w"> </span><span class="n">m</span><span class="o">[</span><span class="mi">0</span><span class="o">][</span><span class="mi">1</span><span class="o">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;2&#39;</span>
<span class="k">assert</span><span class="w"> </span><span class="n">m</span><span class="o">[</span><span class="mi">0</span><span class="o">][</span><span class="mi">2</span><span class="o">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;7&#39;</span>
<span class="k">assert</span><span class="w"> </span><span class="n">m</span><span class="o">[</span><span class="mi">0</span><span class="o">][</span><span class="mi">3</span><span class="o">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;3&#39;</span>
<span class="k">assert</span><span class="w"> </span><span class="n">m</span><span class="o">[</span><span class="mi">0</span><span class="o">][</span><span class="mi">4</span><span class="o">]</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;beta&#39;</span>
</pre></div>
</div>
<p>Applying some syntactic sugar, you can do the same in just one line of code:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">programVersion</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;2.7.3-beta&#39;</span>
<span class="o">(</span><span class="n">full</span><span class="o">,</span><span class="w"> </span><span class="n">major</span><span class="o">,</span><span class="w"> </span><span class="n">minor</span><span class="o">,</span><span class="w"> </span><span class="n">patch</span><span class="o">,</span><span class="w"> </span><span class="n">flavor</span><span class="o">)</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">(</span><span class="n">programVersion</span><span class="w"> </span><span class="o">=~</span><span class="w"> </span><span class="s">/(\d+)\.(\d+)\.(\d+)-?(.+)/</span><span class="o">)[</span><span class="mi">0</span><span class="o">]</span>

<span class="n">println</span><span class="w"> </span><span class="n">full</span><span class="w">    </span><span class="c1">// 2.7.3-beta</span>
<span class="n">println</span><span class="w"> </span><span class="n">major</span><span class="w">   </span><span class="c1">// 2</span>
<span class="n">println</span><span class="w"> </span><span class="n">minor</span><span class="w">   </span><span class="c1">// 7</span>
<span class="n">println</span><span class="w"> </span><span class="n">patch</span><span class="w">   </span><span class="c1">// 3</span>
<span class="n">println</span><span class="w"> </span><span class="n">flavor</span><span class="w">  </span><span class="c1">// beta</span>
</pre></div>
</div>
</section>
<section id="removing-part-of-a-string">
<h4>Removing part of a string<a class="headerlink" href="#removing-part-of-a-string" title="Permalink to this heading"></a></h4>
<p>You can remove part of a <code class="docutils literal notranslate"><span class="pre">String</span></code> value using a regular expression pattern. The first match found is replaced with an empty String:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="c1">// define the regexp pattern</span>
<span class="n">wordStartsWithGr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">~</span><span class="s">/(?i)\s+Gr\w+/</span>

<span class="c1">// apply and verify the result</span>
<span class="o">(</span><span class="s1">&#39;Hello Groovy world!&#39;</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wordStartsWithGr</span><span class="o">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;Hello world!&#39;</span>
<span class="o">(</span><span class="s1">&#39;Hi Grails users&#39;</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">wordStartsWithGr</span><span class="o">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;Hi users&#39;</span>
</pre></div>
</div>
<p>Remove the first 5-character word from a string:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="k">assert</span><span class="w"> </span><span class="o">(</span><span class="s1">&#39;Remove first match of 5 letter word&#39;</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">~</span><span class="s">/\b\w{5}\b/</span><span class="o">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;Remove match of 5 letter word&#39;</span>
</pre></div>
</div>
<p>Remove the first number with its trailing whitespace from a string:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="k">assert</span><span class="w"> </span><span class="o">(</span><span class="s1">&#39;Line contains 20 characters&#39;</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="o">~</span><span class="s">/\d+\s+/</span><span class="o">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;Line contains characters&#39;</span>
</pre></div>
</div>
</section>
</section>
<section id="functions">
<h3>Functions<a class="headerlink" href="#functions" title="Permalink to this heading"></a></h3>
<p>Functions can be defined using the following syntax:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="kt">def</span><span class="w"> </span><span class="o">&lt;</span><span class="n">function</span><span class="w"> </span><span class="n">name</span><span class="o">&gt;</span><span class="w"> </span><span class="o">(</span><span class="w"> </span><span class="n">arg1</span><span class="o">,</span><span class="w"> </span><span class="n">arg</span><span class="o">,</span><span class="w"> </span><span class="o">..</span><span class="w"> </span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="o">&lt;</span><span class="n">function</span><span class="w"> </span><span class="n">body</span><span class="o">&gt;</span>
<span class="o">}</span>
</pre></div>
</div>
<p>For example:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="kt">def</span><span class="w"> </span><span class="nf">foo</span><span class="o">()</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="s1">&#39;Hello world&#39;</span>
<span class="o">}</span>

<span class="kt">def</span><span class="w"> </span><span class="nf">bar</span><span class="o">(</span><span class="n">alpha</span><span class="o">,</span><span class="w"> </span><span class="n">omega</span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="n">alpha</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">omega</span>
<span class="o">}</span>
</pre></div>
</div>
<p>The above snippet defines two simple functions, that can be invoked in the workflow script as <code class="docutils literal notranslate"><span class="pre">foo()</span></code>, which returns <code class="docutils literal notranslate"><span class="pre">'Hello</span> <span class="pre">world'</span></code>, and <code class="docutils literal notranslate"><span class="pre">bar(10,</span> <span class="pre">20)</span></code>, which returns the sum of two parameters (<code class="docutils literal notranslate"><span class="pre">30</span></code> in this case).</p>
<p>Functions implicitly return the result of the last statement. Additionally, the <code class="docutils literal notranslate"><span class="pre">return</span></code> keyword can be used to explicitly exit from a function and return the specified value. For example:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="kt">def</span><span class="w"> </span><span class="nf">fib</span><span class="o">(</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="k">if</span><span class="o">(</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">)</span>
<span class="w">        </span><span class="k">return</span><span class="w"> </span><span class="n">x</span>

<span class="w">    </span><span class="n">fib</span><span class="o">(</span><span class="n">x</span><span class="o">-</span><span class="mi">1</span><span class="o">)</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">fib</span><span class="o">(</span><span class="n">x</span><span class="o">-</span><span class="mi">2</span><span class="o">)</span>
<span class="o">}</span>
</pre></div>
</div>
</section>
<section id="closures">
<span id="script-closure"></span><h3>Closures<a class="headerlink" href="#closures" title="Permalink to this heading"></a></h3>
<p>Briefly, a closure is a block of code that can be passed as an argument to a function. Thus, you can define a chunk of code and then pass it around as if it were a string or an integer.</p>
<p>More formally, you can create functions that are defined as <em>first-class objects</em>.</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">square</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="o">}</span>
</pre></div>
</div>
<p>The curly brackets around the expression <code class="docutils literal notranslate"><span class="pre">it</span> <span class="pre">*</span> <span class="pre">it</span></code> tells the script interpreter to treat this expression as code. The <code class="docutils literal notranslate"><span class="pre">it</span></code> identifier is an implicit variable that represents the value that is passed to the function when it is invoked.</p>
<p>Once compiled the function object is assigned to the variable <code class="docutils literal notranslate"><span class="pre">square</span></code> as any other variable assignments shown previously. Now we can do something like this:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">println</span><span class="w"> </span><span class="nf">square</span><span class="o">(</span><span class="mi">9</span><span class="o">)</span>
</pre></div>
</div>
<p>and get the value 81.</p>
<p>This is not very interesting until we find that we can pass the function <code class="docutils literal notranslate"><span class="pre">square</span></code> as an argument to other functions or methods. Some built-in functions take a function like this as an argument. One example is the <code class="docutils literal notranslate"><span class="pre">collect</span></code> method on lists:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="o">[</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="o">].</span><span class="na">collect</span><span class="o">(</span><span class="n">square</span><span class="o">)</span>
</pre></div>
</div>
<p>This expression says: Create an array with the values 1, 2, 3 and 4, then call its <code class="docutils literal notranslate"><span class="pre">collect</span></code> method, passing in the closure we defined above. The <code class="docutils literal notranslate"><span class="pre">collect</span></code> method runs through each item in the array, calls the closure on the item, then puts the result in a new array, resulting in:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="o">[</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">4</span><span class="o">,</span><span class="w"> </span><span class="mi">9</span><span class="o">,</span><span class="w"> </span><span class="mi">16</span><span class="w"> </span><span class="o">]</span>
</pre></div>
</div>
<p>For more methods that you can call with closures as arguments, see the <a class="reference external" href="http://docs.groovy-lang.org/latest/html/groovy-jdk/">Groovy GDK documentation</a>.</p>
<p>By default, closures take a single parameter called <code class="docutils literal notranslate"><span class="pre">it</span></code>, but you can also create closures with multiple, custom-named parameters. For example, the method <code class="docutils literal notranslate"><span class="pre">Map.each()</span></code> can take a closure with two arguments, to which it binds the <code class="docutils literal notranslate"><span class="pre">key</span></code> and the associated <code class="docutils literal notranslate"><span class="pre">value</span></code> for each key-value pair in the <code class="docutils literal notranslate"><span class="pre">Map</span></code>. Here, we use the obvious variable names <code class="docutils literal notranslate"><span class="pre">key</span></code> and <code class="docutils literal notranslate"><span class="pre">value</span></code> in our closure:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">printMapClosure</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">key</span><span class="o">,</span><span class="w"> </span><span class="n">value</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">    </span><span class="n">println</span><span class="w"> </span><span class="s2">&quot;$key = $value&quot;</span>
<span class="o">}</span>

<span class="o">[</span><span class="w"> </span><span class="s2">&quot;Yue&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Wu&quot;</span><span class="o">,</span><span class="w"> </span><span class="s2">&quot;Mark&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Williams&quot;</span><span class="o">,</span><span class="w"> </span><span class="s2">&quot;Sudha&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Kumari&quot;</span><span class="w"> </span><span class="o">].</span><span class="na">each</span><span class="o">(</span><span class="n">printMapClosure</span><span class="o">)</span>
</pre></div>
</div>
<p>Prints:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Yue</span> <span class="o">=</span> <span class="n">Wu</span>
<span class="n">Mark</span> <span class="o">=</span> <span class="n">Williams</span>
<span class="n">Sudha</span> <span class="o">=</span> <span class="n">Kumari</span>
</pre></div>
</div>
<p>Closures can also access variables outside of their scope, and they can be used anonymously, that is without assigning them to a variable. Here is an example that demonstrates both of these things:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">myMap</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="s2">&quot;China&quot;</span><span class="o">:</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="s2">&quot;India&quot;</span><span class="o">:</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="s2">&quot;USA&quot;</span><span class="o">:</span><span class="w"> </span><span class="mi">3</span><span class="o">]</span>

<span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
<span class="n">myMap</span><span class="o">.</span><span class="na">keySet</span><span class="o">().</span><span class="na">each</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">myMap</span><span class="o">[</span><span class="n">it</span><span class="o">]</span><span class="w"> </span><span class="o">}</span>

<span class="n">println</span><span class="w"> </span><span class="n">result</span>
</pre></div>
</div>
<p>A closure can also declare local variables that exist only for the lifetime of the closure:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
<span class="n">myMap</span><span class="o">.</span><span class="na">keySet</span><span class="o">().</span><span class="na">each</span><span class="w"> </span><span class="o">{</span>
<span class="w">  </span><span class="kt">def</span><span class="w"> </span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">myMap</span><span class="o">[</span><span class="n">it</span><span class="o">]</span>
<span class="w">  </span><span class="n">result</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="n">count</span>
<span class="o">}</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Local variables should be declared using a qualifier such as <code class="docutils literal notranslate"><span class="pre">def</span></code> or a type name, otherwise they will be interpreted as global variables, which could lead to a <a class="reference internal" href="cache-and-resume.html#cache-global-var-race-condition"><span class="std std-ref">race condition</span></a>.</p>
</div>
<p>Learn more about closures in the <a class="reference external" href="http://groovy-lang.org/closures.html">Groovy documentation</a></p>
</section>
<section id="syntax-sugar">
<h3>Syntax sugar<a class="headerlink" href="#syntax-sugar" title="Permalink to this heading"></a></h3>
<p>Groovy provides several forms of “syntax sugar”, or shorthands that can make your code easier to read.</p>
<p>Some programming languages require every statement to be terminated by a semi-colon. In Groovy, semi-colons are optional, but they can still be used to write multiple statements on the same line:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">println</span><span class="w"> </span><span class="s1">&#39;Hello!&#39;</span><span class="w"> </span><span class="o">;</span><span class="w"> </span><span class="n">println</span><span class="w"> </span><span class="s1">&#39;Hello again!&#39;</span>
</pre></div>
</div>
<p>When calling a function, the parentheses around the function arguments are optional:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="c1">// full syntax</span>
<span class="n">printf</span><span class="o">(</span><span class="s1">&#39;Hello %s!\n&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;World&#39;</span><span class="o">)</span>

<span class="c1">// shorthand</span>
<span class="n">printf</span><span class="w"> </span><span class="s1">&#39;Hello %s!\n&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;World&#39;</span>
</pre></div>
</div>
<p>It is especially useful when calling a function with a closure parameter:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="c1">// full syntax</span>
<span class="o">[</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="o">].</span><span class="na">each</span><span class="o">({</span><span class="w"> </span><span class="n">println</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="o">})</span>

<span class="c1">// shorthand</span>
<span class="o">[</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="o">].</span><span class="na">each</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">println</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="o">}</span>
</pre></div>
</div>
<p>If the last argument is a closure, the closure can be written outside of the parentheses:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="c1">// full syntax</span>
<span class="o">[</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="o">].</span><span class="na">inject</span><span class="o">(</span><span class="s1">&#39;result:&#39;</span><span class="o">,</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">accum</span><span class="o">,</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">accum</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">&#39; &#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">})</span>

<span class="c1">// shorthand</span>
<span class="o">[</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="o">].</span><span class="na">inject</span><span class="o">(</span><span class="s1">&#39;result:&#39;</span><span class="o">)</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">accum</span><span class="o">,</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">accum</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">&#39; &#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>In some cases, you might not be able to omit the parentheses because it would be syntactically ambiguous. You can use the <code class="docutils literal notranslate"><span class="pre">groovysh</span></code> REPL console to play around with Groovy and figure out what works.</p>
</div>
</section>
</section>
<section id="implicit-variables">
<span id="id2"></span><h2>Implicit variables<a class="headerlink" href="#implicit-variables" title="Permalink to this heading"></a></h2>
<section id="script-implicit-variables">
<h3>Script implicit variables<a class="headerlink" href="#script-implicit-variables" title="Permalink to this heading"></a></h3>
<p>The following variables are implicitly defined in the script global execution scope:</p>
<dl class="simple myst">
<dt><code class="docutils literal notranslate"><span class="pre">baseDir</span></code></dt><dd><div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 20.04.0: </span>Use <code class="docutils literal notranslate"><span class="pre">projectDir</span></code> instead</p>
</div>
</dd>
<dd><p>The directory where the main workflow script is located.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">launchDir</span></code></dt><dd><div class="versionadded">
<p><span class="versionmodified added">New in version 20.04.0.</span></p>
</div>
</dd>
<dd><p>The directory where the workflow is run.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">moduleDir</span></code></dt><dd><div class="versionadded">
<p><span class="versionmodified added">New in version 20.04.0.</span></p>
</div>
</dd>
<dd><p>The directory where a module script is located for DSL2 modules or the same as <code class="docutils literal notranslate"><span class="pre">projectDir</span></code> for a non-module script.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">nextflow</span></code></dt><dd><p>Dictionary like object representing nextflow runtime information (see <a class="reference internal" href="metadata.html#metadata-nextflow"><span class="std std-ref">Nextflow metadata</span></a>).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">params</span></code></dt><dd><p>Dictionary like object holding workflow parameters specifying in the config file or as command line options.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">projectDir</span></code></dt><dd><div class="versionadded">
<p><span class="versionmodified added">New in version 20.04.0.</span></p>
</div>
</dd>
<dd><p>The directory where the main script is located.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">workDir</span></code></dt><dd><p>The directory where tasks temporary files are created.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">workflow</span></code></dt><dd><p>Dictionary like object representing workflow runtime information (see <a class="reference internal" href="metadata.html#metadata-workflow"><span class="std std-ref">Runtime metadata</span></a>).</p>
</dd>
</dl>
</section>
<section id="configuration-implicit-variables">
<h3>Configuration implicit variables<a class="headerlink" href="#configuration-implicit-variables" title="Permalink to this heading"></a></h3>
<p>The following variables are implicitly defined in the Nextflow configuration file:</p>
<dl class="simple myst">
<dt><code class="docutils literal notranslate"><span class="pre">baseDir</span></code></dt><dd><div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 20.04.0: </span>Use <code class="docutils literal notranslate"><span class="pre">projectDir</span></code> instead</p>
</div>
</dd>
<dd><p>The directory where the main workflow script is located.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">launchDir</span></code></dt><dd><div class="versionadded">
<p><span class="versionmodified added">New in version 20.04.0.</span></p>
</div>
</dd>
<dd><p>The directory where the workflow is run.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">projectDir</span></code></dt><dd><div class="versionadded">
<p><span class="versionmodified added">New in version 20.04.0.</span></p>
</div>
</dd>
<dd><p>The directory where the main script is located.</p>
</dd>
</dl>
</section>
<section id="process-implicit-variables">
<h3>Process implicit variables<a class="headerlink" href="#process-implicit-variables" title="Permalink to this heading"></a></h3>
<p>The following variables are implicitly defined in the <code class="docutils literal notranslate"><span class="pre">task</span></code> object of each process:</p>
<dl class="simple myst">
<dt><code class="docutils literal notranslate"><span class="pre">attempt</span></code></dt><dd><p>The current task attempt</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">hash</span></code></dt><dd><p><em>Available only in <code class="docutils literal notranslate"><span class="pre">exec:</span></code> blocks</em></p>
</dd>
<dd><p>The task unique hash ID</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">index</span></code></dt><dd><p>The task index (corresponds to <code class="docutils literal notranslate"><span class="pre">task_id</span></code> in the execution trace)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">name</span></code></dt><dd><p><em>Available only in <code class="docutils literal notranslate"><span class="pre">exec:</span></code> blocks</em></p>
</dd>
<dd><p>The current task name</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">process</span></code></dt><dd><p>The current process name</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">workDir</span></code></dt><dd><p><em>Available only in <code class="docutils literal notranslate"><span class="pre">exec:</span></code> blocks</em></p>
</dd>
<dd><p>The task unique directory</p>
</dd>
</dl>
<p>The <code class="docutils literal notranslate"><span class="pre">task</span></code> object also contains the values of all process directives for the given task, which allows you to access these settings at runtime. For examples:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">process</span><span class="w"> </span><span class="n">foo</span><span class="w"> </span><span class="o">{</span>
<span class="w">  </span><span class="nl">script:</span>
<span class="w">  </span><span class="s2">&quot;&quot;&quot;</span>
<span class="s2">  some_tool --cpus $task.cpus --mem $task.memory</span>
<span class="s2">  &quot;&quot;&quot;</span>
<span class="o">}</span>
</pre></div>
</div>
<p>In the above snippet the <code class="docutils literal notranslate"><span class="pre">task.cpus</span></code> holds the value for the <a class="reference internal" href="process.html#process-cpus"><span class="std std-ref">cpus directive</span></a> and the <code class="docutils literal notranslate"><span class="pre">task.memory</span></code> the current value for <a class="reference internal" href="process.html#process-memory"><span class="std std-ref">memory directive</span></a> depending on the actual setting given in the workflow configuration file.</p>
<p>See <a class="reference internal" href="process.html#process-directives"><span class="std std-ref">Process directives</span></a> for details.</p>
</section>
</section>
<section id="implicit-functions">
<span id="id3"></span><h2>Implicit functions<a class="headerlink" href="#implicit-functions" title="Permalink to this heading"></a></h2>
<p>The following functions are available in Nextflow scripts:</p>
<dl class="simple myst">
<dt><code class="docutils literal notranslate"><span class="pre">branchCriteria(</span> <span class="pre">closure</span> <span class="pre">)</span></code></dt><dd><p>Create a branch criteria to use with the <a class="reference internal" href="operator.html#operator-branch"><span class="std std-ref">branch</span></a> operator.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">error(</span> <span class="pre">message</span> <span class="pre">=</span> <span class="pre">null</span> <span class="pre">)</span></code></dt><dd><p>Throw a script runtime error with an optional error message.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">exit(</span> <span class="pre">exitCode</span> <span class="pre">=</span> <span class="pre">0,</span> <span class="pre">message</span> <span class="pre">=</span> <span class="pre">null</span> <span class="pre">)</span></code></dt><dd><div class="deprecated">
<p><span class="versionmodified deprecated">Deprecated since version 22.06.0-edge: </span>Use <code class="docutils literal notranslate"><span class="pre">error()</span></code> instead</p>
</div>
</dd>
<dd><p>Stop the pipeline execution and return an exit code and optional error message.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">file(</span> <span class="pre">filePattern,</span> <span class="pre">options</span> <span class="pre">=</span> <span class="pre">[:]</span> <span class="pre">)</span></code></dt><dd><p>Get one or more files from a path or glob pattern. Returns a <a class="reference external" href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/nio/file/Path.html">Path</a> or list of Paths if there are multiple files. See <a class="reference internal" href="#files-and-i-o"><span class="std std-doc">Files and I/O</span></a>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">files(</span> <span class="pre">filePattern,</span> <span class="pre">options</span> <span class="pre">=</span> <span class="pre">[:]</span> <span class="pre">)</span></code></dt><dd><p>Convenience method for <code class="docutils literal notranslate"><span class="pre">file()</span></code> that always returns a list.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">groupKey(</span> <span class="pre">key,</span> <span class="pre">size</span> <span class="pre">)</span></code></dt><dd><p>Create a grouping key to use with the <a class="reference internal" href="operator.html#operator-grouptuple"><span class="std std-ref">groupTuple</span></a> operator.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">multiMapCriteria(</span> <span class="pre">closure</span> <span class="pre">)</span></code></dt><dd><p>Create a multi-map criteria to use with the <a class="reference internal" href="operator.html#operator-multimap"><span class="std std-ref">multiMap</span></a> operator.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sendMail(</span> <span class="pre">params</span> <span class="pre">)</span></code></dt><dd><p>Send an email. See <a class="reference internal" href="mail.html#mail-page"><span class="std std-ref">Mail &amp; Notifications</span></a>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tuple(</span> <span class="pre">collection</span> <span class="pre">)</span></code></dt><dd><p>Create a tuple object from the given collection.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tuple(</span> <span class="pre">...</span> <span class="pre">args</span> <span class="pre">)</span></code></dt><dd><p>Create a tuple object from the given arguments.</p>
</dd>
</dl>
</section>
<section id="implicit-classes">
<span id="id4"></span><h2>Implicit classes<a class="headerlink" href="#implicit-classes" title="Permalink to this heading"></a></h2>
<p>The following classes are imported by default in Nextflow scripts:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">java.lang.*</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">java.util.*</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">java.io.*</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">java.net.*</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">groovy.lang.*</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">groovy.util.*</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">java.math.BigInteger</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">java.math.BigDecimal</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">java.nio.file.Path</span></code></p></li>
</ul>
<p>Additionally, Nextflow imports several new classes which are described below.</p>
<section id="channel">
<h3>Channel<a class="headerlink" href="#channel" title="Permalink to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">Channel</span></code> class provides the channel factory methods. See <a class="reference internal" href="channel.html#channel-factory"><span class="std std-ref">Channel factories</span></a> for more information.</p>
</section>
<section id="duration">
<span id="implicit-classes-duration"></span><h3>Duration<a class="headerlink" href="#duration" title="Permalink to this heading"></a></h3>
<p>A <code class="docutils literal notranslate"><span class="pre">Duration</span></code> represents some duration of time.</p>
<p>You can create a duration by adding a time unit suffix to an integer, e.g. <code class="docutils literal notranslate"><span class="pre">1.h</span></code>. The following suffixes are available:</p>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Unit</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">ms</span></code>, <code class="docutils literal notranslate"><span class="pre">milli</span></code>, <code class="docutils literal notranslate"><span class="pre">millis</span></code></p></td>
<td><p>Milliseconds</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">s</span></code>, <code class="docutils literal notranslate"><span class="pre">sec</span></code>, <code class="docutils literal notranslate"><span class="pre">second</span></code>, <code class="docutils literal notranslate"><span class="pre">seconds</span></code></p></td>
<td><p>Seconds</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">m</span></code>, <code class="docutils literal notranslate"><span class="pre">min</span></code>, <code class="docutils literal notranslate"><span class="pre">minute</span></code>, <code class="docutils literal notranslate"><span class="pre">minutes</span></code></p></td>
<td><p>Minutes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">h</span></code>, <code class="docutils literal notranslate"><span class="pre">hour</span></code>, <code class="docutils literal notranslate"><span class="pre">hours</span></code></p></td>
<td><p>Hours</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">d</span></code>, <code class="docutils literal notranslate"><span class="pre">day</span></code>, <code class="docutils literal notranslate"><span class="pre">days</span></code></p></td>
<td><p>Days</p></td>
</tr>
</tbody>
</table>
<p>You can also create a duration with <code class="docutils literal notranslate"><span class="pre">Duration.of()</span></code>:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="c1">// integer value (milliseconds)</span>
<span class="n">oneSecond</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Duration</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">1000</span><span class="o">)</span>

<span class="c1">// simple string value</span>
<span class="n">oneHour</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Duration</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s1">&#39;1h&#39;</span><span class="o">)</span>

<span class="c1">// complex string value</span>
<span class="n">complexDuration</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Duration</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s1">&#39;1day 6hours 3minutes 30seconds&#39;</span><span class="o">)</span>
</pre></div>
</div>
<p>Durations can be compared like numbers, and they support basic arithmetic operations:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="o">.</span><span class="na">h</span>
<span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="na">h</span>

<span class="k">assert</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">b</span>
<span class="k">assert</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">b</span>
<span class="k">assert</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">a</span>
<span class="k">assert</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">b</span>
<span class="k">assert</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">a</span>
</pre></div>
</div>
<p>The following methods are available for a <code class="docutils literal notranslate"><span class="pre">Duration</span></code> object:</p>
<dl class="simple myst">
<dt><code class="docutils literal notranslate"><span class="pre">getDays()</span></code>, <code class="docutils literal notranslate"><span class="pre">toDays()</span></code></dt><dd><p>Get the duration value in days (rounded down).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">getHours()</span></code>, <code class="docutils literal notranslate"><span class="pre">toHours()</span></code></dt><dd><p>Get the duration value in hours (rounded down).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">getMillis()</span></code>, <code class="docutils literal notranslate"><span class="pre">toMillis()</span></code></dt><dd><p>Get the duration value in milliseconds.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">getMinutes()</span></code>, <code class="docutils literal notranslate"><span class="pre">toMinutes()</span></code></dt><dd><p>Get the duration value in minutes (rounded down).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">getSeconds()</span></code>, <code class="docutils literal notranslate"><span class="pre">toSeconds()</span></code></dt><dd><p>Get the duration value in seconds (rounded down).</p>
</dd>
</dl>
</section>
<section id="memoryunit">
<span id="implicit-classes-memoryunit"></span><h3>MemoryUnit<a class="headerlink" href="#memoryunit" title="Permalink to this heading"></a></h3>
<p>A <code class="docutils literal notranslate"><span class="pre">MemoryUnit</span></code> represents a quantity of bytes.</p>
<p>You can create a memory unit by adding a unit suffix to an integer, e.g. <code class="docutils literal notranslate"><span class="pre">1.GB</span></code>. The following suffixes are available:</p>
<table class="colwidths-auto docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Unit</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">B</span></code></p></td>
<td><p>Bytes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">KB</span></code></p></td>
<td><p>Kilobytes</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">MB</span></code></p></td>
<td><p>Megabytes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">GB</span></code></p></td>
<td><p>Gigabytes</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">TB</span></code></p></td>
<td><p>Terabytes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">PB</span></code></p></td>
<td><p>Petabytes</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">EB</span></code></p></td>
<td><p>Exabytes</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">ZB</span></code></p></td>
<td><p>Zettabytes</p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Technically speaking, a kilobyte is equal to 1000 bytes, whereas 1024 bytes is called a “kibibyte” and abbreviated as “KiB”, and so on for the other units. In practice, however, kilobyte is commonly understood to mean 1024 bytes, and Nextflow follows this convention in its implementation as well as this documentation.</p>
</div>
<p>You can also create a memory unit with <code class="docutils literal notranslate"><span class="pre">MemoryUnit.of()</span></code>:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="c1">// integer value (bytes)</span>
<span class="n">oneKilobyte</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MemoryUnit</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">1024</span><span class="o">)</span>

<span class="c1">// string value</span>
<span class="n">oneGigabyte</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">MemoryUnit</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s1">&#39;1 GB&#39;</span><span class="o">)</span>
</pre></div>
</div>
<p>Memory units can be compared like numbers, and they support basic arithmetic operations:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">1</span><span class="o">.</span><span class="na">GB</span>
<span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">2</span><span class="o">.</span><span class="na">GB</span>

<span class="k">assert</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="n">b</span>
<span class="k">assert</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">b</span>
<span class="k">assert</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">a</span>
<span class="k">assert</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">b</span>
<span class="k">assert</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="n">a</span>
</pre></div>
</div>
<p>The following methods are available for a <code class="docutils literal notranslate"><span class="pre">MemoryUnit</span></code> object:</p>
<dl class="simple myst">
<dt><code class="docutils literal notranslate"><span class="pre">getBytes()</span></code>, <code class="docutils literal notranslate"><span class="pre">toBytes()</span></code></dt><dd><p>Get the memory value in bytes (B).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">getGiga()</span></code>, <code class="docutils literal notranslate"><span class="pre">toGiga()</span></code></dt><dd><p>Get the memory value in gigabytes (rounded down), where 1 GB = 1024 MB.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">getKilo()</span></code>, <code class="docutils literal notranslate"><span class="pre">toKilo()</span></code></dt><dd><p>Get the memory value in kilobytes (rounded down), where 1 KB = 1024 B.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">getMega()</span></code>, <code class="docutils literal notranslate"><span class="pre">toMega()</span></code></dt><dd><p>Get the memory value in megabytes (rounded down), where 1 MB = 1024 KB.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">toUnit(</span> <span class="pre">unit</span> <span class="pre">)</span></code></dt><dd><p>Get the memory value in terms of a given unit (rounded down). The unit can be one of: <code class="docutils literal notranslate"><span class="pre">'B'</span></code>, <code class="docutils literal notranslate"><span class="pre">'KB'</span></code>, <code class="docutils literal notranslate"><span class="pre">'MB'</span></code>, <code class="docutils literal notranslate"><span class="pre">'GB'</span></code>, <code class="docutils literal notranslate"><span class="pre">'TB'</span></code>, <code class="docutils literal notranslate"><span class="pre">'PB'</span></code>, <code class="docutils literal notranslate"><span class="pre">'EB'</span></code>, <code class="docutils literal notranslate"><span class="pre">'ZB'</span></code>.</p>
</dd>
</dl>
</section>
<section id="valueobject">
<h3>ValueObject<a class="headerlink" href="#valueobject" title="Permalink to this heading"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">ValueObject</span></code> is an AST transformation for classes and enums, which simply combines <a class="reference external" href="http://docs.groovy-lang.org/latest/html/gapi/groovy/transform/AutoClone.html">AutoClone</a> and <a class="reference external" href="https://docs.groovy-lang.org/latest/html/gapi/groovy/transform/Immutable.html">Immutable</a>. It is useful for defining custom “record” types.</p>
</section>
</section>
<section id="files-and-i-o">
<span id="script-file-io"></span><h2>Files and I/O<a class="headerlink" href="#files-and-i-o" title="Permalink to this heading"></a></h2>
<section id="opening-files">
<h3>Opening files<a class="headerlink" href="#opening-files" title="Permalink to this heading"></a></h3>
<p>To access and work with files, use the <code class="docutils literal notranslate"><span class="pre">file()</span></code> method, which returns a file system object given a file path string:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">myFile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">file</span><span class="o">(</span><span class="s1">&#39;some/path/to/my_file.file&#39;</span><span class="o">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">file()</span></code> method can reference both files and directories, depending on what the string path refers to in the file system.</p>
<p>When using the wildcard characters <code class="docutils literal notranslate"><span class="pre">*</span></code>, <code class="docutils literal notranslate"><span class="pre">?</span></code>, <code class="docutils literal notranslate"><span class="pre">[]</span></code> and <code class="docutils literal notranslate"><span class="pre">{}</span></code>, the argument is interpreted as a <a class="reference external" href="http://docs.oracle.com/javase/tutorial/essential/io/fileOps.html#glob">glob</a> path matcher and the <code class="docutils literal notranslate"><span class="pre">file()</span></code> method returns a list object holding the paths of files whose names match the specified pattern, or an empty list if no match is found:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">listOfFiles</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">file</span><span class="o">(</span><span class="s1">&#39;some/path/*.fa&#39;</span><span class="o">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">file()</span></code> method does not return a list if only one file is matched. Use the <code class="docutils literal notranslate"><span class="pre">files()</span></code> method to always return a list.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>A double asterisk (<code class="docutils literal notranslate"><span class="pre">**</span></code>) in a glob pattern works like <code class="docutils literal notranslate"><span class="pre">*</span></code> but also searches through subdirectories.</p>
</div>
<p>By default, wildcard characters do not match directories or hidden files. For example, if you want to include hidden files in the result list, enable the <code class="docutils literal notranslate"><span class="pre">hidden</span></code> option:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">listWithHidden</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">file</span><span class="o">(</span><span class="s1">&#39;some/path/*.fa&#39;</span><span class="o">,</span><span class="w"> </span><span class="nl">hidden:</span><span class="w"> </span><span class="kc">true</span><span class="o">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To compose paths, instead of string interpolation, use the <code class="docutils literal notranslate"><span class="pre">resolve()</span></code> method or the <code class="docutils literal notranslate"><span class="pre">/</span></code> operator:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="kt">def</span><span class="w"> </span><span class="n">dir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">file</span><span class="o">(</span><span class="s1">&#39;s3://bucket/some/data/path&#39;</span><span class="o">)</span>
<span class="kt">def</span><span class="w"> </span><span class="n">sample1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dir</span><span class="o">.</span><span class="na">resolve</span><span class="o">(</span><span class="s1">&#39;sample.bam&#39;</span><span class="o">)</span><span class="w">         </span><span class="c1">// correct</span>
<span class="kt">def</span><span class="w"> </span><span class="n">sample2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dir</span><span class="w"> </span><span class="s">/ &#39;sample.bam&#39;</span>
<span class="s">def sample3 = file(&quot;$dir/</span><span class="n">sample</span><span class="o">.</span><span class="na">bam</span><span class="s2">&quot;)           // correct (but verbose)</span>
<span class="s2">def sample4 = &quot;</span><span class="n">$dir</span><span class="s">/sample.bam&quot;                 /</span><span class="o">/</span><span class="w"> </span><span class="n">incorrect</span>
</pre></div>
</div>
</div>
<p>The following options are available:</p>
<dl class="simple myst">
<dt><code class="docutils literal notranslate"><span class="pre">checkIfExists</span></code></dt><dd><p>When <code class="docutils literal notranslate"><span class="pre">true</span></code>, throws an exception if the specified path does not exist in the file system (default: <code class="docutils literal notranslate"><span class="pre">false</span></code>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">followLinks</span></code></dt><dd><p>When <code class="docutils literal notranslate"><span class="pre">true</span></code>, follows symbolic links when traversing a directory tree, otherwise treats them as files (default: <code class="docutils literal notranslate"><span class="pre">true</span></code>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">glob</span></code></dt><dd><p>When <code class="docutils literal notranslate"><span class="pre">true</span></code>, interprets characters <code class="docutils literal notranslate"><span class="pre">*</span></code>, <code class="docutils literal notranslate"><span class="pre">?</span></code>, <code class="docutils literal notranslate"><span class="pre">[]</span></code> and <code class="docutils literal notranslate"><span class="pre">{}</span></code> as glob wildcards, otherwise handles them as normal characters (default: <code class="docutils literal notranslate"><span class="pre">true</span></code>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">hidden</span></code></dt><dd><p>When <code class="docutils literal notranslate"><span class="pre">true</span></code>, includes hidden files in the resulting paths (default: <code class="docutils literal notranslate"><span class="pre">false</span></code>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">maxDepth</span></code></dt><dd><p>Maximum number of directory levels to visit (default: <em>no limit</em>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">type</span></code></dt><dd><p>Type of paths returned, can be <code class="docutils literal notranslate"><span class="pre">'file'</span></code>, <code class="docutils literal notranslate"><span class="pre">'dir'</span></code> or <code class="docutils literal notranslate"><span class="pre">'any'</span></code> (default: <code class="docutils literal notranslate"><span class="pre">'file'</span></code>)</p>
</dd>
</dl>
<p>See also: <a class="reference internal" href="channel.html#channel-path"><span class="std std-ref">Channel.fromPath</span></a>.</p>
</section>
<section id="getting-file-attributes">
<h3>Getting file attributes<a class="headerlink" href="#getting-file-attributes" title="Permalink to this heading"></a></h3>
<p>The <code class="docutils literal notranslate"><span class="pre">file()</span></code> method returns a <a class="reference external" href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/nio/file/Path.html">Path</a>, so any method defined for Path can also be used in a Nextflow script.</p>
<p>Additionally, the following methods are also defined for Paths in Nextflow:</p>
<dl class="simple myst">
<dt><code class="docutils literal notranslate"><span class="pre">exists()</span></code></dt><dd><p>Returns <code class="docutils literal notranslate"><span class="pre">true</span></code> if the file exists.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">getBaseName()</span></code></dt><dd><p>Gets the file name without its extension, e.g. <code class="docutils literal notranslate"><span class="pre">/some/path/file.tar.gz</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">file.tar</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">getExtension()</span></code></dt><dd><p>Gets the file extension, e.g. <code class="docutils literal notranslate"><span class="pre">/some/path/file.txt</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">txt</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">getName()</span></code></dt><dd><p>Gets the file name, e.g. <code class="docutils literal notranslate"><span class="pre">/some/path/file.txt</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">file.txt</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">getSimpleName()</span></code></dt><dd><p>Gets the file name without any extension, e.g. <code class="docutils literal notranslate"><span class="pre">/some/path/file.tar.gz</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">file</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">getParent()</span></code></dt><dd><p>Gets the file parent path, e.g. <code class="docutils literal notranslate"><span class="pre">/some/path/file.txt</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">/some/path</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">getScheme()</span></code></dt><dd><p>Gets the file URI scheme, e.g. <code class="docutils literal notranslate"><span class="pre">s3://some-bucket/foo.txt</span></code> -&gt; <code class="docutils literal notranslate"><span class="pre">s3</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">isDirectory()</span></code></dt><dd><p>Returns <code class="docutils literal notranslate"><span class="pre">true</span></code> if the file is a directory.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">isEmpty()</span></code></dt><dd><p>Returns <code class="docutils literal notranslate"><span class="pre">true</span></code> if the file is empty or does not exist.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">isFile()</span></code></dt><dd><p>Returns <code class="docutils literal notranslate"><span class="pre">true</span></code> if it is a regular file (i.e. not a directory).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">isHidden()</span></code></dt><dd><p>Returns <code class="docutils literal notranslate"><span class="pre">true</span></code> if the file is hidden.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">isLink()</span></code></dt><dd><p>Returns <code class="docutils literal notranslate"><span class="pre">true</span></code> if the file is a symbolic link.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">lastModified()</span></code></dt><dd><p>Returns the file last modified timestamp in Unix time (i.e. milliseconds since January 1, 1970).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size()</span></code></dt><dd><p>Gets the file size in bytes.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">toUriString()</span></code></dt><dd><p>Gets the file path along with the protocol scheme:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="kt">def</span><span class="w"> </span><span class="n">ref</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">file</span><span class="o">(</span><span class="s1">&#39;s3://some-bucket/foo.txt&#39;</span><span class="o">)</span>

<span class="k">assert</span><span class="w"> </span><span class="n">ref</span><span class="o">.</span><span class="na">toString</span><span class="o">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;/some-bucket/foo.txt&#39;</span>
<span class="k">assert</span><span class="w"> </span><span class="s2">&quot;$ref&quot;</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;/some-bucket/foo.txt&#39;</span>
<span class="k">assert</span><span class="w"> </span><span class="n">ref</span><span class="o">.</span><span class="na">toUriString</span><span class="o">()</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s1">&#39;s3://some-bucket/foo.txt&#39;</span>
</pre></div>
</div>
</dd>
</dl>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>In Groovy, any method that looks like <code class="docutils literal notranslate"><span class="pre">get*()</span></code> can also be accessed as a field. For example, <code class="docutils literal notranslate"><span class="pre">myFile.getName()</span></code> is equivalent to <code class="docutils literal notranslate"><span class="pre">myFile.name</span></code>, <code class="docutils literal notranslate"><span class="pre">myFile.getBaseName()</span></code> is equivalent to <code class="docutils literal notranslate"><span class="pre">myFile.baseName</span></code>, and so on.</p>
</div>
</section>
<section id="reading-and-writing">
<h3>Reading and writing<a class="headerlink" href="#reading-and-writing" title="Permalink to this heading"></a></h3>
<section id="reading-and-writing-an-entire-file">
<h4>Reading and writing an entire file<a class="headerlink" href="#reading-and-writing-an-entire-file" title="Permalink to this heading"></a></h4>
<p>Given a file variable, created with the <code class="docutils literal notranslate"><span class="pre">file()</span></code> method as shown previously, reading a file is as easy as getting the file’s <code class="docutils literal notranslate"><span class="pre">text</span></code> property, which returns the file content as a string:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">print</span><span class="w"> </span><span class="n">myFile</span><span class="o">.</span><span class="na">text</span>
</pre></div>
</div>
<p>Similarly, you can save a string to a file by assigning it to the file’s <code class="docutils literal notranslate"><span class="pre">text</span></code> property:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">myFile</span><span class="o">.</span><span class="na">text</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Hello world!&#39;</span>
</pre></div>
</div>
<p>Binary data can managed in the same way, just using the file property <code class="docutils literal notranslate"><span class="pre">bytes</span></code> instead of <code class="docutils literal notranslate"><span class="pre">text</span></code>. Thus, the following example reads the file and returns its content as a byte array:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">binaryContent</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">myFile</span><span class="o">.</span><span class="na">bytes</span>
</pre></div>
</div>
<p>Or you can save a byte array to a file:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">myFile</span><span class="o">.</span><span class="na">bytes</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">binaryContent</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The above assignment overwrites any existing file contents, and implicitly creates the file if it doesn’t exist.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The above methods read and write the <strong>entire</strong> file contents at once, in a single variable or buffer. For this reason, when dealing with large files it is recommended that you use a more memory efficient approach, such as reading/writing a file line by line or using a fixed size buffer.</p>
</div>
</section>
<section id="appending-to-a-file">
<h4>Appending to a file<a class="headerlink" href="#appending-to-a-file" title="Permalink to this heading"></a></h4>
<p>In order to append a string value to a file without erasing existing content, you can use the <code class="docutils literal notranslate"><span class="pre">append()</span></code> method:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">myFile</span><span class="o">.</span><span class="na">append</span><span class="o">(</span><span class="s1">&#39;Add this line\n&#39;</span><span class="o">)</span>
</pre></div>
</div>
<p>Or use the left shift operator, a more idiomatic way to append text content to a file:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">myFile</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="s1">&#39;Add a line more\n&#39;</span>
</pre></div>
</div>
</section>
<section id="reading-a-file-line-by-line">
<h4>Reading a file line by line<a class="headerlink" href="#reading-a-file-line-by-line" title="Permalink to this heading"></a></h4>
<p>In order to read a text file line by line you can use the method <code class="docutils literal notranslate"><span class="pre">readLines()</span></code> provided by the file object, which returns the file content as a list of strings:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">myFile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">file</span><span class="o">(</span><span class="s1">&#39;some/my_file.txt&#39;</span><span class="o">)</span>
<span class="n">allLines</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">myFile</span><span class="o">.</span><span class="na">readLines</span><span class="o">()</span>
<span class="k">for</span><span class="o">(</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">allLines</span><span class="w"> </span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="n">println</span><span class="w"> </span><span class="n">line</span>
<span class="o">}</span>
</pre></div>
</div>
<p>This can also be written in a more idiomatic syntax:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">file</span><span class="o">(</span><span class="s1">&#39;some/my_file.txt&#39;</span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">readLines</span><span class="o">()</span>
<span class="w">    </span><span class="o">.</span><span class="na">each</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">println</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="o">}</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The method <code class="docutils literal notranslate"><span class="pre">readLines()</span></code> reads the <strong>entire</strong> file at once and returns a list containing all the lines. For this reason, do not use it to read big files.</p>
</div>
<p>To process a big file, use the method <code class="docutils literal notranslate"><span class="pre">eachLine()</span></code>, which reads only a single line at a time into memory:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">count</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span>
<span class="n">myFile</span><span class="o">.</span><span class="na">eachLine</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">str</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">    </span><span class="n">println</span><span class="w"> </span><span class="s2">&quot;line ${count++}: $str&quot;</span>
<span class="o">}</span>
</pre></div>
</div>
</section>
<section id="advanced-file-reading">
<h4>Advanced file reading<a class="headerlink" href="#advanced-file-reading" title="Permalink to this heading"></a></h4>
<p>The classes <code class="docutils literal notranslate"><span class="pre">Reader</span></code> and <code class="docutils literal notranslate"><span class="pre">InputStream</span></code> provide fine-grained control for reading text and binary files, respectively.</p>
<p>The method <code class="docutils literal notranslate"><span class="pre">newReader()</span></code> creates a <a class="reference external" href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/Reader.html">Reader</a> object for the given file that allows you to read the content as single characters, lines or arrays of characters:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">myReader</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">myFile</span><span class="o">.</span><span class="na">newReader</span><span class="o">()</span>
<span class="n">String</span><span class="w"> </span><span class="n">line</span>
<span class="nf">while</span><span class="o">(</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">myReader</span><span class="o">.</span><span class="na">readLine</span><span class="o">()</span><span class="w"> </span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="n">println</span><span class="w"> </span><span class="n">line</span>
<span class="o">}</span>
<span class="n">myReader</span><span class="o">.</span><span class="na">close</span><span class="o">()</span>
</pre></div>
</div>
<p>The method <code class="docutils literal notranslate"><span class="pre">withReader()</span></code> works similarly, but automatically calls the <code class="docutils literal notranslate"><span class="pre">close()</span></code> method for you when you have finished processing the file. So, the previous example can be written more simply as:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">myFile</span><span class="o">.</span><span class="na">withReader</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="n">String</span><span class="w"> </span><span class="n">line</span>
<span class="w">    </span><span class="k">while</span><span class="o">(</span><span class="w"> </span><span class="n">line</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">it</span><span class="o">.</span><span class="na">readLine</span><span class="o">()</span><span class="w"> </span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="n">println</span><span class="w"> </span><span class="n">line</span>
<span class="w">    </span><span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>The methods <code class="docutils literal notranslate"><span class="pre">newInputStream()</span></code> and <code class="docutils literal notranslate"><span class="pre">withInputStream()</span></code> work similarly. The main difference is that they create an <a class="reference external" href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/InputStream.html">InputStream</a> object useful for writing binary data.</p>
<p>The following methods are useful for reading files:</p>
<dl class="simple myst">
<dt><code class="docutils literal notranslate"><span class="pre">eachByte(</span> <span class="pre">closure</span> <span class="pre">)</span></code></dt><dd><p>Iterates over the file byte by byte, applying the specified <a class="reference internal" href="#script-closure"><span class="std std-ref">closure</span></a>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">eachLine(</span> <span class="pre">closure</span> <span class="pre">)</span></code></dt><dd><p>Iterates over the file line by line, applying the specified <a class="reference internal" href="#script-closure"><span class="std std-ref">closure</span></a>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">getBytes()</span></code></dt><dd><p>Returns the file content as a byte array.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">getText()</span></code></dt><dd><p>Returns the file content as a string value.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">newInputStream()</span></code></dt><dd><p>Returns an <a class="reference external" href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/InputStream.html">InputStream</a> object to read a binary file.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">newReader()</span></code></dt><dd><p>Returns a <a class="reference external" href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/Reader.html">Reader</a> object to read a text file.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">readLines()</span></code></dt><dd><p>Reads the file line by line and returns the content as a list of strings.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">withInputStream(</span> <span class="pre">closure</span> <span class="pre">)</span></code></dt><dd><p>Opens a file for reading and lets you access it with an <a class="reference external" href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/InputStream.html">InputStream</a> object.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">withReader(</span> <span class="pre">closure</span> <span class="pre">)</span></code></dt><dd><p>Opens a file for reading and lets you access it with a <a class="reference external" href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/Reader.html">Reader</a> object.</p>
</dd>
</dl>
</section>
<section id="advanced-file-writing">
<h4>Advanced file writing<a class="headerlink" href="#advanced-file-writing" title="Permalink to this heading"></a></h4>
<p>The <code class="docutils literal notranslate"><span class="pre">Writer</span></code> and <code class="docutils literal notranslate"><span class="pre">OutputStream</span></code> classes provide fine-grained control for writing text and binary files, respectively, including low-level operations for single characters or bytes, and support for big files.</p>
<p>For example, given two file objects <code class="docutils literal notranslate"><span class="pre">sourceFile</span></code> and <code class="docutils literal notranslate"><span class="pre">targetFile</span></code>, the following code copies the first file’s content into the second file, replacing all <code class="docutils literal notranslate"><span class="pre">U</span></code> characters with <code class="docutils literal notranslate"><span class="pre">X</span></code>:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">sourceFile</span><span class="o">.</span><span class="na">withReader</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">source</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">    </span><span class="n">targetFile</span><span class="o">.</span><span class="na">withWriter</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">target</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">        </span><span class="n">String</span><span class="w"> </span><span class="n">line</span>
<span class="w">        </span><span class="k">while</span><span class="o">(</span><span class="w"> </span><span class="n">line</span><span class="o">=</span><span class="n">source</span><span class="o">.</span><span class="na">readLine</span><span class="o">()</span><span class="w"> </span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<span class="w">            </span><span class="n">target</span><span class="w"> </span><span class="o">&lt;&lt;</span><span class="w"> </span><span class="n">line</span><span class="o">.</span><span class="na">replaceAll</span><span class="o">(</span><span class="s1">&#39;U&#39;</span><span class="o">,</span><span class="s1">&#39;X&#39;</span><span class="o">)</span>
<span class="w">        </span><span class="o">}</span>
<span class="w">    </span><span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>The following methods are available for writing to files:</p>
<dl class="simple myst">
<dt><code class="docutils literal notranslate"><span class="pre">append(</span> <span class="pre">text</span> <span class="pre">)</span></code></dt><dd><p>Appends a string value to a file without replacing existing content.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">newOutputStream()</span></code></dt><dd><p>Creates an <a class="reference external" href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/OutputStream.html">OutputStream</a> object that allows you to write binary data to a file.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">newPrintWriter()</span></code></dt><dd><p>Creates a <a class="reference external" href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/PrintWriter.html">PrintWriter</a> object that allows you to write formatted text to a file.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">newWriter()</span></code></dt><dd><p>Creates a <a class="reference external" href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/Writer.html">Writer</a> object that allows you to save text data to a file.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">setBytes(</span> <span class="pre">bytes</span> <span class="pre">)</span></code></dt><dd><p>Writes a byte array to a file. Equivalent to setting the <code class="docutils literal notranslate"><span class="pre">bytes</span></code> property.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">setText(</span> <span class="pre">text</span> <span class="pre">)</span></code></dt><dd><p>Writes a string value to a file. Equivalent to setting the <code class="docutils literal notranslate"><span class="pre">text</span></code> property.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">withOutputStream(</span> <span class="pre">closure</span> <span class="pre">)</span></code></dt><dd><p>Applies the specified closure to an <a class="reference external" href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/OutputStream.html">OutputStream</a> object, closing it when finished.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">withPrintWriter(</span> <span class="pre">closure</span> <span class="pre">)</span></code></dt><dd><p>Applies the specified closure to a <a class="reference external" href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/PrintWriter.html">PrintWriter</a> object, closing it when finished.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">withWriter(</span> <span class="pre">closure</span> <span class="pre">)</span></code></dt><dd><p>Applies the specified closure to a <a class="reference external" href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/io/Writer.html">Writer</a> object, closing it when finished.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">write(</span> <span class="pre">text</span> <span class="pre">)</span></code></dt><dd><p>Writes a string to a file, replacing any existing content.</p>
</dd>
</dl>
</section>
</section>
<section id="filesystem-operations">
<h3>Filesystem operations<a class="headerlink" href="#filesystem-operations" title="Permalink to this heading"></a></h3>
<p>The following methods are available for manipulating files and directories in a filesystem:</p>
<dl class="simple myst">
<dt><code class="docutils literal notranslate"><span class="pre">copyTo(</span> <span class="pre">target</span> <span class="pre">)</span></code></dt><dd><p>Copies a source file or directory to a target file or directory.</p>
</dd>
<dd><p><em>When copying a file to another file:</em> if the target file already exists, it will be replaced.</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">file</span><span class="o">(</span><span class="s1">&#39;/some/path/my_file.txt&#39;</span><span class="o">).</span><span class="na">copyTo</span><span class="o">(</span><span class="s1">&#39;/another/path/new_file.txt&#39;</span><span class="o">)</span>
</pre></div>
</div>
</dd>
<dd><p><em>When copying a file to a directory:</em> the file will be copied into the directory, replacing any file with the same name.</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">file</span><span class="o">(</span><span class="s1">&#39;/some/path/my_file.txt&#39;</span><span class="o">).</span><span class="na">copyTo</span><span class="o">(</span><span class="s1">&#39;/another/path&#39;</span><span class="o">)</span>
</pre></div>
</div>
</dd>
<dd><p><em>When copying a directory to another directory:</em> if the target directory already exists, the source directory will be copied into the target directory, replacing any sub-directory with the same name. If the target path does not exist, it will be created automatically.</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">file</span><span class="o">(</span><span class="s1">&#39;/any/dir_a&#39;</span><span class="o">).</span><span class="na">moveTo</span><span class="o">(</span><span class="s1">&#39;/any/dir_b&#39;</span><span class="o">)</span>
</pre></div>
</div>
<p>The result of the above example depends on the existence of the target directory. If the target directory exists, the source is moved into the target directory, resulting in the path <code class="docutils literal notranslate"><span class="pre">/any/dir_b/dir_a</span></code>. If the target directory does not exist, the source is just renamed to the target name, resulting in the path <code class="docutils literal notranslate"><span class="pre">/any/dir_b</span></code>.</p>
</dd>
<dd><div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">copyTo()</span></code> method follows the semantics of the Linux command <code class="docutils literal notranslate"><span class="pre">cp</span> <span class="pre">-r</span> <span class="pre">&lt;source&gt;</span> <span class="pre">&lt;target&gt;</span></code>, with the following caveat: while Linux tools often treat paths ending with a slash (e.g. <code class="docutils literal notranslate"><span class="pre">/some/path/name/</span></code>) as directories, and those not (e.g. <code class="docutils literal notranslate"><span class="pre">/some/path/name</span></code>) as regular files, Nextflow (due to its use of the Java files API) views both of these paths as the same file system object. If the path exists, it is handled according to its actual type (i.e. as a regular file or as a directory). If the path does not exist, it is treated as a regular file, with any missing parent directories created automatically.</p>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">delete()</span></code></dt><dd><p>Deletes the file or directory at the given path, returning <code class="docutils literal notranslate"><span class="pre">true</span></code> if the operation succeeds, and <code class="docutils literal notranslate"><span class="pre">false</span></code> otherwise:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">myFile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">file</span><span class="o">(</span><span class="s1">&#39;some/file.txt&#39;</span><span class="o">)</span>
<span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">myFile</span><span class="o">.</span><span class="na">delete</span><span class="o">()</span>
<span class="n">println</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s2">&quot;OK&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Cannot delete: $myFile&quot;</span>
</pre></div>
</div>
<p>If a directory is not empty, it will not be deleted and <code class="docutils literal notranslate"><span class="pre">delete()</span></code> will return <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">deleteDir()</span></code></dt><dd><p>Deletes a directory and all of its contents.</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">file</span><span class="o">(</span><span class="s1">&#39;any/path&#39;</span><span class="o">).</span><span class="na">deleteDir</span><span class="o">()</span>
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">getPermissions()</span></code></dt><dd><p>Returns a file’s permissions using the <a class="reference external" href="http://en.wikipedia.org/wiki/File_system_permissions#Symbolic_notation">symbolic notation</a>, e.g. <code class="docutils literal notranslate"><span class="pre">'rw-rw-r--'</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">list()</span></code></dt><dd><p>Returns the first-level elements (files and directories) of a directory as a list of strings.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">listFiles()</span></code></dt><dd><p>Returns the first-level elements (files and directories) of a directory as a list of Paths.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">mkdir()</span></code></dt><dd><p>Creates a directory at the given path, returning <code class="docutils literal notranslate"><span class="pre">true</span></code> if the directory is created successfully, and <code class="docutils literal notranslate"><span class="pre">false</span></code> otherwise:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">myDir</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">file</span><span class="o">(</span><span class="s1">&#39;any/path&#39;</span><span class="o">)</span>
<span class="n">result</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">myDir</span><span class="o">.</span><span class="na">mkdir</span><span class="o">()</span>
<span class="n">println</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">?</span><span class="w"> </span><span class="s2">&quot;OK&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="s2">&quot;Cannot create directory: $myDir&quot;</span>
</pre></div>
</div>
<p>If the parent directories do not exist, the directory will not be created and <code class="docutils literal notranslate"><span class="pre">mkdir()</span></code> will return <code class="docutils literal notranslate"><span class="pre">false</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">mkdirs()</span></code></dt><dd><p>Creates a directory at the given path, including any nonexistent parent directories:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">file</span><span class="o">(</span><span class="s1">&#39;any/path&#39;</span><span class="o">).</span><span class="na">mkdirs</span><span class="o">()</span>
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">mklink(</span> <span class="pre">linkName,</span> <span class="pre">options</span> <span class="pre">=</span> <span class="pre">[:]</span> <span class="pre">)</span></code></dt><dd><p>Creates a <em>filesystem link</em> to a given path:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">myFile</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">file</span><span class="o">(</span><span class="s1">&#39;/some/path/file.txt&#39;</span><span class="o">)</span>
<span class="n">myFile</span><span class="o">.</span><span class="na">mklink</span><span class="o">(</span><span class="s1">&#39;/user/name/link-to-file.txt&#39;</span><span class="o">)</span>
</pre></div>
</div>
<p>Available options:</p>
<dl class="simple myst">
<dt><code class="docutils literal notranslate"><span class="pre">hard</span></code></dt><dd><p>When <code class="docutils literal notranslate"><span class="pre">true</span></code>, creates a <em>hard</em> link, otherwise creates a <em>soft</em> (aka <em>symbolic</em>) link (default: <code class="docutils literal notranslate"><span class="pre">false</span></code>).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">overwrite</span></code></dt><dd><p>When <code class="docutils literal notranslate"><span class="pre">true</span></code>, overwrites any existing file with the same name, otherwise throws a <a class="reference external" href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/nio/file/FileAlreadyExistsException.html">FileAlreadyExistsException</a> (default: <code class="docutils literal notranslate"><span class="pre">false</span></code>).</p>
</dd>
</dl>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">moveTo(</span> <span class="pre">target</span> <span class="pre">)</span></code></dt><dd><p>Moves a source file or directory to a target file or directory. Follows the same semantics as <code class="docutils literal notranslate"><span class="pre">copyTo()</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">renameTo(</span> <span class="pre">target</span> <span class="pre">)</span></code></dt><dd><p>Rename a file or directory:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">file</span><span class="o">(</span><span class="s1">&#39;my_file.txt&#39;</span><span class="o">).</span><span class="na">renameTo</span><span class="o">(</span><span class="s1">&#39;new_file_name.txt&#39;</span><span class="o">)</span>
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">setPermissions(</span> <span class="pre">permissions</span> <span class="pre">)</span></code></dt><dd><p>Sets a file’s permissions using the <a class="reference external" href="http://en.wikipedia.org/wiki/File_system_permissions#Symbolic_notation">symbolic notation</a>:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">myFile</span><span class="o">.</span><span class="na">setPermissions</span><span class="o">(</span><span class="s1">&#39;rwxr-xr-x&#39;</span><span class="o">)</span>
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">setPermissions(</span> <span class="pre">owner,</span> <span class="pre">group,</span> <span class="pre">other</span> <span class="pre">)</span></code></dt><dd><p>Sets a file’s permissions using the <a class="reference external" href="http://en.wikipedia.org/wiki/File_system_permissions#Numeric_notation">numeric notation</a>, i.e. as three digits representing the <strong>owner</strong>, <strong>group</strong>, and <strong>other</strong> permissions:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">myFile</span><span class="o">.</span><span class="na">setPermissions</span><span class="o">(</span><span class="mi">7</span><span class="o">,</span><span class="mi">5</span><span class="o">,</span><span class="mi">5</span><span class="o">)</span>
</pre></div>
</div>
</dd>
</dl>
<section id="listing-directories">
<h4>Listing directories<a class="headerlink" href="#listing-directories" title="Permalink to this heading"></a></h4>
<p>The simplest way to list a directory is to use <code class="docutils literal notranslate"><span class="pre">list()</span></code> or <code class="docutils literal notranslate"><span class="pre">listFiles()</span></code>, which return a collection of first-level elements (files and directories) of a directory:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="k">for</span><span class="o">(</span><span class="w"> </span><span class="kt">def</span><span class="w"> </span><span class="n">file</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="n">file</span><span class="o">(</span><span class="s1">&#39;any/path&#39;</span><span class="o">).</span><span class="na">list</span><span class="o">()</span><span class="w"> </span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="n">println</span><span class="w"> </span><span class="n">file</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Additionally, the <code class="docutils literal notranslate"><span class="pre">eachFile()</span></code> method allows you to iterate through the first-level elements only (just like <code class="docutils literal notranslate"><span class="pre">listFiles()</span></code>). As with other <code class="docutils literal notranslate"><span class="pre">each*()</span></code> methods, <code class="docutils literal notranslate"><span class="pre">eachFile()</span></code> takes a closure as a parameter:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">myDir</span><span class="o">.</span><span class="na">eachFile</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">item</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">    </span><span class="k">if</span><span class="o">(</span><span class="w"> </span><span class="n">item</span><span class="o">.</span><span class="na">isFile</span><span class="o">()</span><span class="w"> </span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="n">println</span><span class="w"> </span><span class="s2">&quot;${item.getName()} - size: ${item.size()}&quot;</span>
<span class="w">    </span><span class="o">}</span>
<span class="w">    </span><span class="k">else</span><span class="w"> </span><span class="k">if</span><span class="o">(</span><span class="w"> </span><span class="n">item</span><span class="o">.</span><span class="na">isDirectory</span><span class="o">()</span><span class="w"> </span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="n">println</span><span class="w"> </span><span class="s2">&quot;${item.getName()} - DIR&quot;</span>
<span class="w">    </span><span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>The following methods are available for listing and traversing directories:</p>
<dl class="simple myst">
<dt><code class="docutils literal notranslate"><span class="pre">eachDir(</span> <span class="pre">closure</span> <span class="pre">)</span></code></dt><dd><p>Iterates through first-level directories only. <a class="reference external" href="http://docs.groovy-lang.org/latest/html/groovy-jdk/java/io/File.html#eachDir(groovy.lang.Closure)">Read more</a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">eachDirMatch(</span> <span class="pre">nameFilter,</span> <span class="pre">closure</span> <span class="pre">)</span></code></dt><dd><p>Iterates through directories whose names match the given filter. <a class="reference external" href="http://docs.groovy-lang.org/latest/html/groovy-jdk/java/io/File.html#eachDirMatch(java.lang.Object,%20groovy.lang.Closure)">Read more</a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">eachDirRecurse(</span> <span class="pre">closure</span> <span class="pre">)</span></code></dt><dd><p>Iterates through directories depth-first (regular files are ignored). <a class="reference external" href="http://docs.groovy-lang.org/latest/html/groovy-jdk/java/io/File.html#eachDirRecurse(groovy.lang.Closure)">Read more</a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">eachFile(</span> <span class="pre">closure</span> <span class="pre">)</span></code></dt><dd><p>Iterates through first-level files and directories. <a class="reference external" href="http://docs.groovy-lang.org/latest/html/groovy-jdk/java/io/File.html#eachFile(groovy.lang.Closure)">Read more</a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">eachFileMatch(</span> <span class="pre">nameFilter,</span> <span class="pre">closure</span> <span class="pre">)</span></code></dt><dd><p>Iterates through files and directories whose names match the given filter. <a class="reference external" href="http://docs.groovy-lang.org/latest/html/groovy-jdk/java/io/File.html#eachFileMatch(java.lang.Object,%20groovy.lang.Closure)">Read more</a></p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">eachFileRecurse(</span> <span class="pre">closure</span> <span class="pre">)</span></code></dt><dd><p>Iterates through files and directories depth-first. <a class="reference external" href="http://docs.groovy-lang.org/latest/html/groovy-jdk/java/io/File.html#eachFileRecurse(groovy.lang.Closure)">Read more</a></p>
</dd>
</dl>
<p>See also: <a class="reference internal" href="channel.html#channel-path"><span class="std std-ref">Channel.fromPath</span></a>.</p>
</section>
</section>
<section id="fetching-http-ftp-files">
<h3>Fetching HTTP/FTP files<a class="headerlink" href="#fetching-http-ftp-files" title="Permalink to this heading"></a></h3>
<p>Nextflow integrates seamlessly with the HTTP(S) and FTP protocols for handling remote resources the same as local files. Simply specify the resource URL when opening the file:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">pdb</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">file</span><span class="o">(</span><span class="s1">&#39;http://files.rcsb.org/header/5FID.pdb&#39;</span><span class="o">)</span>
</pre></div>
</div>
<p>Then, you can access it as a local file as described previously:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">println</span><span class="w"> </span><span class="n">pdb</span><span class="o">.</span><span class="na">text</span>
</pre></div>
</div>
<p>The above one-liner prints the content of the remote PDB file. Previous sections provide code examples showing how to stream or copy the content of files.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Write and list operations are not supported for HTTP(S) and FTP files.</p>
</div>
</section>
<section id="splitting-and-counting-records">
<h3>Splitting and counting records<a class="headerlink" href="#splitting-and-counting-records" title="Permalink to this heading"></a></h3>
<p>The following methods are defined for Paths for splitting and counting records:</p>
<dl class="simple myst">
<dt><code class="docutils literal notranslate"><span class="pre">countFasta()</span></code></dt><dd><p>Counts the number of records in a <a class="reference external" href="https://en.wikipedia.org/wiki/FASTA_format">FASTA</a> file. See the <a class="reference internal" href="operator.html#operator-splitfasta"><span class="std std-ref">splitFasta</span></a> operator for available options.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">countFastq()</span></code></dt><dd><p>Counts the number of records in a <a class="reference external" href="https://en.wikipedia.org/wiki/FASTQ_format">FASTQ</a> file. See the <a class="reference internal" href="operator.html#operator-splitfastq"><span class="std std-ref">splitFastq</span></a> operator for available options.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">countJson()</span></code></dt><dd><p>Counts the number of records in a JSON file. See the <a class="reference internal" href="operator.html#operator-splitjson"><span class="std std-ref">splitJson</span></a> operator for available options.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">countLines()</span></code></dt><dd><p>Counts the number of lines in a text file. See the <a class="reference internal" href="operator.html#operator-splittext"><span class="std std-ref">splitText</span></a> operator for available options.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">splitFasta()</span></code></dt><dd><p>Splits a <a class="reference external" href="https://en.wikipedia.org/wiki/FASTA_format">FASTA</a> file into a list of records. See the <a class="reference internal" href="operator.html#operator-splitfasta"><span class="std std-ref">splitFasta</span></a> operator for available options.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">splitFastq()</span></code></dt><dd><p>Splits a <a class="reference external" href="https://en.wikipedia.org/wiki/FASTQ_format">FASTQ</a> file into a list of records. See the <a class="reference internal" href="operator.html#operator-splitfastq"><span class="std std-ref">splitFastq</span></a> operator for available options.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">splitJson()</span></code></dt><dd><p>Splits a JSON file into a list of records. See the <a class="reference internal" href="operator.html#operator-splitjson"><span class="std std-ref">splitJson</span></a> operator for available options.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">splitLines()</span></code></dt><dd><p>Splits a text file into a list of lines. See the <a class="reference internal" href="operator.html#operator-splittext"><span class="std std-ref">splitText</span></a> operator for available options.</p>
</dd>
</dl>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="basic.html" class="btn btn-neutral float-left" title="Basic concepts" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="process.html" class="btn btn-neutral float-right" title="Processes" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Seqera Labs, S.L.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
     
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TNCXSWG"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->


</body>
</html>