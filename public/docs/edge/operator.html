<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Operators &mdash; Nextflow 23.12.0-edge documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/theme.css" type="text/css" />
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Workflows" href="workflow.html" />
    <link rel="prev" title="Channels" href="channel.html" />
     
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-TNCXSWG');</script>
    <!-- End Google Tag Manager -->

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html">
            <img src="_static/nextflow-logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div>
    <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="getstarted.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic.html">Basic concepts</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Language</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="script.html">Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="process.html">Processes</a></li>
<li class="toctree-l1"><a class="reference internal" href="channel.html">Channels</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Operators</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#branch">branch</a></li>
<li class="toctree-l2"><a class="reference internal" href="#buffer">buffer</a></li>
<li class="toctree-l2"><a class="reference internal" href="#collate">collate</a></li>
<li class="toctree-l2"><a class="reference internal" href="#collect">collect</a></li>
<li class="toctree-l2"><a class="reference internal" href="#collectfile">collectFile</a></li>
<li class="toctree-l2"><a class="reference internal" href="#combine">combine</a></li>
<li class="toctree-l2"><a class="reference internal" href="#concat">concat</a></li>
<li class="toctree-l2"><a class="reference internal" href="#count">count</a></li>
<li class="toctree-l2"><a class="reference internal" href="#countfasta">countFasta</a></li>
<li class="toctree-l2"><a class="reference internal" href="#countfastq">countFastq</a></li>
<li class="toctree-l2"><a class="reference internal" href="#countjson">countJson</a></li>
<li class="toctree-l2"><a class="reference internal" href="#countlines">countLines</a></li>
<li class="toctree-l2"><a class="reference internal" href="#cross">cross</a></li>
<li class="toctree-l2"><a class="reference internal" href="#distinct">distinct</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dump">dump</a></li>
<li class="toctree-l2"><a class="reference internal" href="#filter">filter</a></li>
<li class="toctree-l2"><a class="reference internal" href="#first">first</a></li>
<li class="toctree-l2"><a class="reference internal" href="#flatmap">flatMap</a></li>
<li class="toctree-l2"><a class="reference internal" href="#flatten">flatten</a></li>
<li class="toctree-l2"><a class="reference internal" href="#grouptuple">groupTuple</a></li>
<li class="toctree-l2"><a class="reference internal" href="#ifempty">ifEmpty</a></li>
<li class="toctree-l2"><a class="reference internal" href="#join">join</a></li>
<li class="toctree-l2"><a class="reference internal" href="#last">last</a></li>
<li class="toctree-l2"><a class="reference internal" href="#map">map</a></li>
<li class="toctree-l2"><a class="reference internal" href="#max">max</a></li>
<li class="toctree-l2"><a class="reference internal" href="#merge">merge</a></li>
<li class="toctree-l2"><a class="reference internal" href="#min">min</a></li>
<li class="toctree-l2"><a class="reference internal" href="#mix">mix</a></li>
<li class="toctree-l2"><a class="reference internal" href="#multimap">multiMap</a></li>
<li class="toctree-l2"><a class="reference internal" href="#randomsample">randomSample</a></li>
<li class="toctree-l2"><a class="reference internal" href="#reduce">reduce</a></li>
<li class="toctree-l2"><a class="reference internal" href="#set">set</a></li>
<li class="toctree-l2"><a class="reference internal" href="#splitcsv">splitCsv</a></li>
<li class="toctree-l2"><a class="reference internal" href="#splitfasta">splitFasta</a></li>
<li class="toctree-l2"><a class="reference internal" href="#splitfastq">splitFastq</a></li>
<li class="toctree-l2"><a class="reference internal" href="#splitjson">splitJson</a></li>
<li class="toctree-l2"><a class="reference internal" href="#splittext">splitText</a></li>
<li class="toctree-l2"><a class="reference internal" href="#subscribe">subscribe</a></li>
<li class="toctree-l2"><a class="reference internal" href="#sum">sum</a></li>
<li class="toctree-l2"><a class="reference internal" href="#take">take</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tap">tap</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tointeger">toInteger</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tolist">toList</a></li>
<li class="toctree-l2"><a class="reference internal" href="#tosortedlist">toSortedList</a></li>
<li class="toctree-l2"><a class="reference internal" href="#transpose">transpose</a></li>
<li class="toctree-l2"><a class="reference internal" href="#unique">unique</a></li>
<li class="toctree-l2"><a class="reference internal" href="#until">until</a></li>
<li class="toctree-l2"><a class="reference internal" href="#view">view</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="workflow.html">Workflows</a></li>
<li class="toctree-l1"><a class="reference internal" href="module.html">Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="config.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="dsl1.html">Migrating from DSL 1</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Execution</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Command line interface (CLI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="executor.html">Executors</a></li>
<li class="toctree-l1"><a class="reference internal" href="cache-and-resume.html">Caching and resuming</a></li>
<li class="toctree-l1"><a class="reference internal" href="tracing.html">Tracing &amp; visualisation</a></li>
<li class="toctree-l1"><a class="reference internal" href="metrics.html">Metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="sharing.html">Pipeline sharing</a></li>
<li class="toctree-l1"><a class="reference internal" href="metadata.html">Workflow introspection</a></li>
<li class="toctree-l1"><a class="reference internal" href="mail.html">Mail &amp; Notifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="plugins.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="secrets.html">Secrets</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Software dependencies</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="container.html">Containers</a></li>
<li class="toctree-l1"><a class="reference internal" href="conda.html">Conda environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="spack.html">Spack environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="wave.html">Wave containers</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Compute &amp; storage platforms</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="aws.html">AWS Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="amazons3.html">AWS S3 storage</a></li>
<li class="toctree-l1"><a class="reference internal" href="azure.html">Azure Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="fusion.html">Fusion file system</a></li>
<li class="toctree-l1"><a class="reference internal" href="google.html">Google Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="kubernetes.html">Kubernetes</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Additional integrations</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="flux.html">Flux Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="ignite.html">Apache Ignite</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contributing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="developer/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer/packages.html">Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer/plugins.html">Core plugins</a></li>
</ul>

        </div>
    <div class="nav-footer-logo">
        <a href="https://seqera.io/" target="_blank" title="Developed by Seqera Labs">
            Nextflow is developed by:<br>
            <img src="_static/seqera-logo.svg" alt="Seqera Labs">
        </a>
    </div>

      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Nextflow</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a></li>
      <li class="breadcrumb-item active">Operators</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/nextflow-io/nextflow/blob/master/docs/operator.md" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="operators">
<span id="operator-page"></span><h1>Operators<a class="headerlink" href="#operators" title="Permalink to this heading"></a></h1>
<p>Nextflow <strong>operators</strong> are methods that allow you to manipulate channels. Every operator, with the exception of <a class="reference internal" href="#set"><span class="std std-doc">set</span></a> and <a class="reference internal" href="#subscribe"><span class="std std-doc">subscribe</span></a>, produces one or more new channels, allowing you to chain operators to fit your needs.</p>
<p>This page is a comprehensive reference for all Nextflow operators. However, if you are new to Nextflow, here are some suggested operators to learn for common use cases:</p>
<ul class="simple">
<li><p>Filtering: <a class="reference internal" href="#filter"><span class="std std-doc">filter</span></a>, <a class="reference internal" href="#randomsample"><span class="std std-doc">randomSample</span></a>, <a class="reference internal" href="#take"><span class="std std-doc">take</span></a>, <a class="reference internal" href="#unique"><span class="std std-doc">unique</span></a></p></li>
<li><p>Reduction: <a class="reference internal" href="#collect"><span class="std std-doc">collect</span></a>, <a class="reference internal" href="#grouptuple"><span class="std std-doc">groupTuple</span></a>, <a class="reference internal" href="#reduce"><span class="std std-doc">reduce</span></a></p></li>
<li><p>Text processing: <a class="reference internal" href="#splitcsv"><span class="std std-doc">splitCsv</span></a>, <a class="reference internal" href="#splitjson"><span class="std std-doc">splitJson</span></a>, <a class="reference internal" href="#splittext"><span class="std std-doc">splitText</span></a></p></li>
<li><p>Combining channels: <a class="reference internal" href="#combine"><span class="std std-doc">combine</span></a>, <a class="reference internal" href="#concat"><span class="std std-doc">concat</span></a>, <a class="reference internal" href="#join"><span class="std std-doc">join</span></a>, <a class="reference internal" href="#mix"><span class="std std-doc">mix</span></a></p></li>
<li><p>Forking channels: <a class="reference internal" href="#branch"><span class="std std-doc">branch</span></a>, <a class="reference internal" href="#multimap"><span class="std std-doc">multiMap</span></a></p></li>
<li><p>Maths: <a class="reference internal" href="#count"><span class="std std-doc">count</span></a>, <a class="reference internal" href="#max"><span class="std std-doc">max</span></a>, <a class="reference internal" href="#min"><span class="std std-doc">min</span></a>, <a class="reference internal" href="#sum"><span class="std std-doc">sum</span></a></p></li>
<li><p>Other: <a class="reference internal" href="#ifempty"><span class="std std-doc">ifEmpty</span></a>, <a class="reference internal" href="#map"><span class="std std-doc">map</span></a>, <a class="reference internal" href="#set"><span class="std std-doc">set</span></a>, <a class="reference internal" href="#view"><span class="std std-doc">view</span></a></p></li>
</ul>
<section id="branch">
<span id="operator-branch"></span><h2>branch<a class="headerlink" href="#branch" title="Permalink to this heading"></a></h2>
<div class="versionadded">
<p><span class="versionmodified added">New in version 19.08.0-edge.</span></p>
</div>
<p><em>Returns: map of queue channels</em></p>
<p>The <code class="docutils literal notranslate"><span class="pre">branch</span></code> operator forwards each item from a source channel to one of multiple output channels, based on a selection criteria.</p>
<p>The selection criteria is a <a class="reference internal" href="script.html#script-closure"><span class="std std-ref">closure</span></a> that defines, for each output channel, a unique label followed by a boolean expression. When an item is received, it is routed to the first output channel whose expression evaluates to <code class="docutils literal notranslate"><span class="pre">true</span></code>. For example:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="mi">40</span><span class="o">,</span><span class="w"> </span><span class="mi">50</span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">branch</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="nl">small:</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">10</span>
<span class="w">        </span><span class="nl">large:</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">10</span>
<span class="w">    </span><span class="o">}</span>
<span class="w">    </span><span class="o">.</span><span class="na">set</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">}</span>

<span class="n">result</span><span class="o">.</span><span class="na">small</span><span class="o">.</span><span class="na">view</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="s2">&quot;$it is small&quot;</span><span class="w"> </span><span class="o">}</span>
<span class="n">result</span><span class="o">.</span><span class="na">large</span><span class="o">.</span><span class="na">view</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="s2">&quot;$it is large&quot;</span><span class="w"> </span><span class="o">}</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">1 is small</span>
<span class="go">2 is small</span>
<span class="go">3 is small</span>
<span class="go">40 is large</span>
<span class="go">50 is large</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The above output may be printed in any order since the two <code class="docutils literal notranslate"><span class="pre">view</span></code> operations are executed asynchronously.</p>
</div>
<p>A fallback condition can be specified using <code class="docutils literal notranslate"><span class="pre">true</span></code> as the last branch condition:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="mi">40</span><span class="o">,</span><span class="w"> </span><span class="mi">50</span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">branch</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="nl">small:</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">10</span>
<span class="w">        </span><span class="nl">large:</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">50</span>
<span class="w">        </span><span class="nl">other:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">    </span><span class="o">}</span>
<span class="w">    </span><span class="o">.</span><span class="na">set</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">}</span>

<span class="n">result</span><span class="o">.</span><span class="na">small</span><span class="o">.</span><span class="na">view</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="s2">&quot;$it is small&quot;</span><span class="w"> </span><span class="o">}</span>
<span class="n">result</span><span class="o">.</span><span class="na">large</span><span class="o">.</span><span class="na">view</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="s2">&quot;$it is large&quot;</span><span class="w"> </span><span class="o">}</span>
<span class="n">result</span><span class="o">.</span><span class="na">other</span><span class="o">.</span><span class="na">view</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="s2">&quot;$it is other&quot;</span><span class="w"> </span><span class="o">}</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">1 is small</span>
<span class="go">2 is small</span>
<span class="go">3 is small</span>
<span class="go">40 is large</span>
<span class="go">50 is other</span>
</pre></div>
</div>
<p>The value emitted to each branch can be customized with an expression statement (or statements) after the branch condition:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="mi">40</span><span class="o">,</span><span class="w"> </span><span class="mi">50</span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">branch</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="nl">foo:</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">10</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">it</span><span class="o">+</span><span class="mi">2</span>

<span class="w">        </span><span class="nl">bar:</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">50</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="n">it</span><span class="o">-</span><span class="mi">2</span>

<span class="w">        </span><span class="nl">other:</span><span class="w"> </span><span class="kc">true</span>
<span class="w">            </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span>
<span class="w">    </span><span class="o">}</span>
<span class="w">    </span><span class="o">.</span><span class="na">set</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">}</span>

<span class="n">result</span><span class="o">.</span><span class="na">foo</span><span class="o">.</span><span class="na">view</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="s2">&quot;$it is foo&quot;</span><span class="w"> </span><span class="o">}</span>
<span class="n">result</span><span class="o">.</span><span class="na">bar</span><span class="o">.</span><span class="na">view</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="s2">&quot;$it is bar&quot;</span><span class="w"> </span><span class="o">}</span>
<span class="n">result</span><span class="o">.</span><span class="na">other</span><span class="o">.</span><span class="na">view</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="s2">&quot;$it is other&quot;</span><span class="w"> </span><span class="o">}</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">3 is foo</span>
<span class="go">4 is foo</span>
<span class="go">5 is foo</span>
<span class="go">38 is bar</span>
<span class="go">0 is other</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>When the <code class="docutils literal notranslate"><span class="pre">return</span></code> keyword is omitted, the value of the last expression statement is implicitly returned.</p>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">branchCriteria()</span></code> method can be used to create a branch criteria as a variable that can be passed as an argument to any number of <code class="docutils literal notranslate"><span class="pre">branch</span></code> operations, as shown below:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="kt">def</span><span class="w"> </span><span class="n">criteria</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">branchCriteria</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nl">small:</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">10</span>
<span class="w">    </span><span class="nl">large:</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">10</span>
<span class="o">}</span>

<span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">30</span><span class="o">).</span><span class="na">branch</span><span class="o">(</span><span class="n">criteria</span><span class="o">).</span><span class="na">set</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">ch1</span><span class="w"> </span><span class="o">}</span>
<span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span><span class="w"> </span><span class="mi">20</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="o">).</span><span class="na">branch</span><span class="o">(</span><span class="n">criteria</span><span class="o">).</span><span class="na">set</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">ch2</span><span class="w"> </span><span class="o">}</span>

<span class="n">ch1</span><span class="o">.</span><span class="na">small</span><span class="o">.</span><span class="na">view</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="s2">&quot;$it is small&quot;</span><span class="w"> </span><span class="o">}</span>
<span class="n">ch1</span><span class="o">.</span><span class="na">large</span><span class="o">.</span><span class="na">view</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="s2">&quot;$it is large&quot;</span><span class="w"> </span><span class="o">}</span>
<span class="n">ch2</span><span class="o">.</span><span class="na">small</span><span class="o">.</span><span class="na">view</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="s2">&quot;$it is small&quot;</span><span class="w"> </span><span class="o">}</span>
<span class="n">ch2</span><span class="o">.</span><span class="na">large</span><span class="o">.</span><span class="na">view</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="s2">&quot;$it is large&quot;</span><span class="w"> </span><span class="o">}</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">1 is small</span>
<span class="go">2 is small</span>
<span class="go">3 is small</span>
<span class="go">20 is large</span>
<span class="go">30 is large</span>
</pre></div>
</div>
</section>
<section id="buffer">
<h2>buffer<a class="headerlink" href="#buffer" title="Permalink to this heading"></a></h2>
<p><em>Returns: queue channel</em></p>
<p>The <code class="docutils literal notranslate"><span class="pre">buffer</span></code> operator collects items from a source channel into subsets and emits each subset separately.</p>
<p>This operator has multiple variants:</p>
<dl class="simple myst">
<dt><code class="docutils literal notranslate"><span class="pre">buffer(</span> <span class="pre">closingCondition</span> <span class="pre">)</span></code></dt><dd><p>Emits each subset when <code class="docutils literal notranslate"><span class="pre">closingCondition</span></code> is satisfied. The closing condition can be a literal value, a <a class="reference internal" href="script.html#script-regexp"><span class="std std-ref">regular expression</span></a>, a type qualifier (i.e. Java class), or a boolean predicate. For example:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">buffer</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">}</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[1, 2]</span>
<span class="go">[3, 1, 2]</span>
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">buffer(</span> <span class="pre">openingCondition,</span> <span class="pre">closingCondition</span> <span class="pre">)</span></code></dt><dd><p>Creates a new subset when <code class="docutils literal notranslate"><span class="pre">openingCondition</span></code> is satisfied and emits the subset when is <code class="docutils literal notranslate"><span class="pre">closingCondition</span></code> is satisfied. The opening and closing conditions can each be a literal value, a <a class="reference internal" href="script.html#script-regexp"><span class="std std-ref">regular expression</span></a>, a type qualifier (i.e. Java class), or a boolean predicate. For example:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="c1">// emits bundles starting with `2` and ending with `4`</span>
<span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="mi">4</span><span class="o">,</span><span class="w"> </span><span class="mi">5</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="mi">4</span><span class="o">,</span><span class="w"> </span><span class="mi">5</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">buffer</span><span class="o">(</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[2, 3, 4]</span>
<span class="go">[2, 3, 4]</span>
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">buffer(</span> <span class="pre">size:</span> <span class="pre">n</span> <span class="pre">)</span></code></dt><dd><p>Emits a new subset for every <code class="docutils literal notranslate"><span class="pre">n</span></code> items. Remaining items are discarded. For example:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">buffer</span><span class="o">(</span><span class="w"> </span><span class="nl">size:</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[1, 2]</span>
<span class="go">[3, 1]</span>
<span class="go">[2, 3]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">remainder</span></code> option can be used to emit any remaining items as a partial subset:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">buffer</span><span class="o">(</span><span class="w"> </span><span class="nl">size:</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="nl">remainder:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[1, 2]</span>
<span class="go">[3, 1]</span>
<span class="go">[2, 3]</span>
<span class="go">[1]</span>
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">buffer(</span> <span class="pre">size:</span> <span class="pre">n,</span> <span class="pre">skip:</span> <span class="pre">m</span> <span class="pre">)</span></code></dt><dd><p>Emits a new subset for every <code class="docutils literal notranslate"><span class="pre">n</span></code> items, skipping <code class="docutils literal notranslate"><span class="pre">m</span></code> items before collecting each subset. For example:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="mi">4</span><span class="o">,</span><span class="w"> </span><span class="mi">5</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="mi">4</span><span class="o">,</span><span class="w"> </span><span class="mi">5</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">buffer</span><span class="o">(</span><span class="w"> </span><span class="nl">size:</span><span class="w"> </span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="nl">skip:</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[3, 4, 5]</span>
<span class="go">[3, 4, 5]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">remainder</span></code> option can be used to emit any remaining items as a partial subset.</p>
</dd>
</dl>
<p>See also: <a class="reference internal" href="#collate"><span class="std std-doc">collate</span></a></p>
</section>
<section id="collate">
<h2>collate<a class="headerlink" href="#collate" title="Permalink to this heading"></a></h2>
<p><em>Returns: queue channel</em></p>
<p>The <code class="docutils literal notranslate"><span class="pre">collate</span></code> operator collects items from a source channel into groups of <em>N</em> items.</p>
<p>This operator has multiple variants:</p>
<dl class="simple myst">
<dt><code class="docutils literal notranslate"><span class="pre">collate(</span> <span class="pre">size,</span> <span class="pre">remainder</span> <span class="pre">=</span> <span class="pre">true</span> <span class="pre">)</span></code></dt><dd><p>Collects items into groups of <code class="docutils literal notranslate"><span class="pre">size</span></code> items:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">collate</span><span class="o">(</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[1, 2, 3]</span>
<span class="go">[1, 2, 3]</span>
<span class="go">[1]</span>
</pre></div>
</div>
<p>By default, any remaining items are emitted as a partial group. You can specify <code class="docutils literal notranslate"><span class="pre">false</span></code> as the second parameter to discard them instead:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">collate</span><span class="o">(</span><span class="w"> </span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="kc">false</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[1, 2, 3]</span>
<span class="go">[1, 2, 3]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This version of <code class="docutils literal notranslate"><span class="pre">collate</span></code> is equivalent to <code class="docutils literal notranslate"><span class="pre">buffer(</span> <span class="pre">size:</span> <span class="pre">n,</span> <span class="pre">remainder:</span> <span class="pre">true</span> <span class="pre">|</span> <span class="pre">false</span> <span class="pre">)</span></code>.</p>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">collate(</span> <span class="pre">size,</span> <span class="pre">step,</span> <span class="pre">remainder</span> <span class="pre">=</span> <span class="pre">true</span> <span class="pre">)</span></code></dt><dd><p>Collects items into groups of <code class="docutils literal notranslate"><span class="pre">size</span></code> items using a <em>sliding window</em> that moves by <code class="docutils literal notranslate"><span class="pre">step</span></code> items at a time:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="mi">4</span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">collate</span><span class="o">(</span><span class="w"> </span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[1, 2, 3]</span>
<span class="go">[2, 3, 4]</span>
<span class="go">[3, 4]</span>
<span class="go">[4]</span>
</pre></div>
</div>
<p>You can specify <code class="docutils literal notranslate"><span class="pre">false</span></code> as the third parameter to discard any remaining items.</p>
</dd>
</dl>
<p>See also: <a class="reference internal" href="#buffer"><span class="std std-doc">buffer</span></a></p>
</section>
<section id="collect">
<span id="operator-collect"></span><h2>collect<a class="headerlink" href="#collect" title="Permalink to this heading"></a></h2>
<p><em>Returns: value channel</em></p>
<p>The <code class="docutils literal notranslate"><span class="pre">collect</span></code> operator collects all items from a source channel into a list and emits it as a single item:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">collect</span><span class="o">()</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[1, 2, 3, 4]</span>
</pre></div>
</div>
<p>An optional <a class="reference internal" href="script.html#script-closure"><span class="std std-ref">closure</span></a> can be used to transform each item before it is collected:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="s1">&#39;hello&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;ciao&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;bonjour&#39;</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">collect</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">it</span><span class="o">.</span><span class="na">length</span><span class="o">()</span><span class="w"> </span><span class="o">}</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[5, 4, 7]</span>
</pre></div>
</div>
<p>Available options:</p>
<dl class="simple myst">
<dt><code class="docutils literal notranslate"><span class="pre">flat</span></code></dt><dd><p>When <code class="docutils literal notranslate"><span class="pre">true</span></code>, nested list structures are flattened and their items are collected individually (default: <code class="docutils literal notranslate"><span class="pre">true</span></code>).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sort</span></code></dt><dd><p>When <code class="docutils literal notranslate"><span class="pre">true</span></code>, the collected items are sorted by their natural ordering (default: <code class="docutils literal notranslate"><span class="pre">false</span></code>). Can also be a <a class="reference internal" href="script.html#script-closure"><span class="std std-ref">closure</span></a> or a <a class="reference external" href="https://docs.oracle.com/javase/8/docs/api/java/util/Comparator.html">Comparator</a> which defines how items are compared during sorting.</p>
</dd>
</dl>
<p>See also: <a class="reference internal" href="#tolist"><span class="std std-doc">toList</span></a>, <a class="reference internal" href="#tosortedlist"><span class="std std-doc">toSortedList</span></a></p>
</section>
<section id="collectfile">
<h2>collectFile<a class="headerlink" href="#collectfile" title="Permalink to this heading"></a></h2>
<p><em>Returns: queue channel</em></p>
<p>The <code class="docutils literal notranslate"><span class="pre">collectFile</span></code> operator collects the items from a source channel and saves them to one or more files, emitting the collected file(s).</p>
<p>This operator has multiple variants:</p>
<dl class="simple myst">
<dt><code class="docutils literal notranslate"><span class="pre">collectFile(</span> <span class="pre">name:</span> <span class="pre">'...',</span> <span class="pre">options</span> <span class="pre">=</span> <span class="pre">[:]</span> <span class="pre">)</span></code></dt><dd><p>Collects the items and saves them to a single file specified by the <code class="docutils literal notranslate"><span class="pre">name</span></code> option:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s1">&#39;alpha&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;beta&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;gamma&#39;</span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">collectFile</span><span class="o">(</span><span class="nl">name:</span><span class="w"> </span><span class="s1">&#39;sample.txt&#39;</span><span class="o">,</span><span class="w"> </span><span class="nl">newLine:</span><span class="w"> </span><span class="kc">true</span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">subscribe</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="n">println</span><span class="w"> </span><span class="s2">&quot;Entries are saved to file: $it&quot;</span>
<span class="w">        </span><span class="n">println</span><span class="w"> </span><span class="s2">&quot;File content is: ${it.text}&quot;</span>
<span class="w">    </span><span class="o">}</span>
</pre></div>
</div>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">collectFile(</span> <span class="pre">closure,</span> <span class="pre">options</span> <span class="pre">=</span> <span class="pre">[:]</span> <span class="pre">)</span></code></dt><dd><p>Collects the items into groups and saves each group to a file, using a grouping criteria. The grouping criteria is a <a class="reference internal" href="script.html#script-closure"><span class="std std-ref">closure</span></a> that maps each item to a pair, where the first element is the file name for the group and the second element is the content to be appended to that file. For example:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s1">&#39;Hola&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;Ciao&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;Hello&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;Bonjour&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;Halo&#39;</span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">collectFile</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">item</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">        </span><span class="o">[</span><span class="w"> </span><span class="s2">&quot;${item[0]}.txt&quot;</span><span class="o">,</span><span class="w"> </span><span class="n">item</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">&#39;\n&#39;</span><span class="w"> </span><span class="o">]</span>
<span class="w">    </span><span class="o">}</span>
<span class="w">    </span><span class="o">.</span><span class="na">subscribe</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="n">println</span><span class="w"> </span><span class="s2">&quot;File &#39;${it.name}&#39; contains:&quot;</span>
<span class="w">        </span><span class="n">println</span><span class="w"> </span><span class="n">it</span><span class="o">.</span><span class="na">text</span>
<span class="w">    </span><span class="o">}</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">File &#39;B.txt&#39; contains:</span>
<span class="go">Bonjour</span>

<span class="go">File &#39;C.txt&#39; contains:</span>
<span class="go">Ciao</span>

<span class="go">File &#39;H.txt&#39; contains:</span>
<span class="go">Halo</span>
<span class="go">Hola</span>
<span class="go">Hello</span>
</pre></div>
</div>
<p>When the items from the source channel are files, the grouping criteria can be omitted. In this case, the items will be grouped by their source filename.</p>
</dd>
</dl>
<p>The following example shows how to use a closure to collect and sort all sequences in a FASTA file from shortest to longest:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span>
<span class="w">    </span><span class="o">.</span><span class="na">fromPath</span><span class="o">(</span><span class="s1">&#39;/data/sequences.fa&#39;</span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">splitFasta</span><span class="o">(</span><span class="w"> </span><span class="nl">record:</span><span class="w"> </span><span class="o">[</span><span class="nl">id:</span><span class="w"> </span><span class="kc">true</span><span class="o">,</span><span class="w"> </span><span class="nl">sequence:</span><span class="w"> </span><span class="kc">true</span><span class="o">]</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">collectFile</span><span class="o">(</span><span class="w"> </span><span class="nl">name:</span><span class="w"> </span><span class="s1">&#39;result.fa&#39;</span><span class="o">,</span><span class="w"> </span><span class="nl">sort:</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">it</span><span class="o">.</span><span class="na">size</span><span class="o">()</span><span class="w"> </span><span class="o">}</span><span class="w"> </span><span class="o">)</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="n">it</span><span class="o">.</span><span class="na">sequence</span>
<span class="w">    </span><span class="o">}</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">it</span><span class="o">.</span><span class="na">text</span><span class="w"> </span><span class="o">}</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The <code class="docutils literal notranslate"><span class="pre">collectFile</span></code> operator needs to store files in a temporary directory that is automatically deleted on workflow completion. For performance reasons, this directory is located in the machine’s local storage, and it should have as much free space as the data that is being collected. The <code class="docutils literal notranslate"><span class="pre">tempDir</span></code> option can be used to specify a different temporary directory.</p>
</div>
<p>Available options:</p>
<dl class="simple myst">
<dt><code class="docutils literal notranslate"><span class="pre">cache</span></code></dt><dd><p>Controls the caching ability of the <code class="docutils literal notranslate"><span class="pre">collectFile</span></code> operator when using the <em>resume</em> feature. It follows the same semantic of the <a class="reference internal" href="process.html#process-cache"><span class="std std-ref">cache</span></a> directive (default: <code class="docutils literal notranslate"><span class="pre">true</span></code>).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">keepHeader</span></code></dt><dd><p>Prepend the resulting file with the header fetched in the first collected file. The header size (ie. lines) can be specified by using the <code class="docutils literal notranslate"><span class="pre">skip</span></code> option (default: <code class="docutils literal notranslate"><span class="pre">0</span></code>), to determine how many lines to remove from all collected files except for the first (where no lines will be removed).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">name</span></code></dt><dd><p>Name of the file where all received values are stored.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">newLine</span></code></dt><dd><p>Appends a <code class="docutils literal notranslate"><span class="pre">newline</span></code> character automatically after each entry (default: <code class="docutils literal notranslate"><span class="pre">false</span></code>).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">seed</span></code></dt><dd><p>A value or a map of values used to initialize the files content.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">skip</span></code></dt><dd><p>Skip the first <code class="docutils literal notranslate"><span class="pre">n</span></code> lines e.g. <code class="docutils literal notranslate"><span class="pre">skip:</span> <span class="pre">1</span></code> (default: <code class="docutils literal notranslate"><span class="pre">0</span></code>).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sort</span></code></dt><dd><p>Defines sorting criteria of content in resulting file(s). Can be one of the following values:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">false</span></code>: Disable content sorting. Entries are appended as they are produced.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">true</span></code>: Order the content by the entry’s natural ordering i.e. numerical for number, lexicographic for string, etc. See the <a class="reference external" href="http://docs.oracle.com/javase/tutorial/collections/interfaces/order.html">Java documentation</a> for more information.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'index'</span></code>: Order the content by the incremental index number assigned to each entry while they are collected.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'hash'</span></code>: (default) Order the content by the hash number associated to each entry</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'deep'</span></code>: Similar to the previous, but the hash number is created on actual entries content e.g. when the entry is a file the hash is created on the actual file content.</p></li>
<li><p>A custom sorting criteria can be specified with a <a class="reference internal" href="script.html#script-closure"><span class="std std-ref">Closure</span></a> or a <a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html">Comparator</a> object.</p></li>
</ul>
<p>The file content is sorted in such a way that it does not depend on the order in which entries were added to it, which guarantees that it is consistent (i.e. does not change) across different executions with the same data.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">storeDir</span></code></dt><dd><p>Folder where the resulting file(s) are stored.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tempDir</span></code></dt><dd><p>Folder where temporary files, used by the collecting process, are stored.</p>
</dd>
</dl>
</section>
<section id="combine">
<span id="operator-combine"></span><h2>combine<a class="headerlink" href="#combine" title="Permalink to this heading"></a></h2>
<p><em>Returns: queue channel</em></p>
<p>The <code class="docutils literal notranslate"><span class="pre">combine</span></code> operator produces the combinations (i.e. cross product, “Cartesian” product) of two source channels, or a channel and a list (as the right operand), emitting each combination separately.</p>
<p>For example:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">numbers</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="o">)</span>
<span class="n">words</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s1">&#39;hello&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;ciao&#39;</span><span class="o">)</span>

<span class="n">numbers</span>
<span class="w">    </span><span class="o">.</span><span class="na">combine</span><span class="o">(</span><span class="n">words</span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[1, hello]</span>
<span class="go">[2, hello]</span>
<span class="go">[3, hello]</span>
<span class="go">[1, ciao]</span>
<span class="go">[2, ciao]</span>
<span class="go">[3, ciao]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">by</span></code> option can be used to combine items that share a matching key. The value should be the zero-based index of the tuple, or a list of indices. For example:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="o">[</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;alpha&#39;</span><span class="o">],</span><span class="w"> </span><span class="o">[</span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;beta&#39;</span><span class="o">]</span><span class="w"> </span><span class="o">)</span>
<span class="n">target</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="o">[</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;x&#39;</span><span class="o">],</span><span class="w"> </span><span class="o">[</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;y&#39;</span><span class="o">],</span><span class="w"> </span><span class="o">[</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;z&#39;</span><span class="o">],</span><span class="w"> </span><span class="o">[</span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;p&#39;</span><span class="o">],</span><span class="w"> </span><span class="o">[</span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;q&#39;</span><span class="o">],</span><span class="w"> </span><span class="o">[</span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;t&#39;</span><span class="o">]</span><span class="w"> </span><span class="o">)</span>

<span class="n">source</span><span class="o">.</span><span class="na">combine</span><span class="o">(</span><span class="n">target</span><span class="o">,</span><span class="w"> </span><span class="nl">by:</span><span class="w"> </span><span class="mi">0</span><span class="o">).</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[1, alpha, x]</span>
<span class="go">[1, alpha, y]</span>
<span class="go">[1, alpha, z]</span>
<span class="go">[2, beta, p]</span>
<span class="go">[2, beta, q]</span>
<span class="go">[2, beta, t]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The <code class="docutils literal notranslate"><span class="pre">combine</span></code> operator is similar to <code class="docutils literal notranslate"><span class="pre">cross</span></code> and <code class="docutils literal notranslate"><span class="pre">join</span></code>, making them easy to confuse. Their differences can be summarized as follows:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">combine</span></code> and <code class="docutils literal notranslate"><span class="pre">cross</span></code> both produce an <em>outer product</em> or <em>cross product</em>, whereas <code class="docutils literal notranslate"><span class="pre">join</span></code> produces an <em>inner product</em>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">combine</span></code> filters pairs with a matching key only if the <code class="docutils literal notranslate"><span class="pre">by</span></code> option is used, whereas <code class="docutils literal notranslate"><span class="pre">cross</span></code> always filters pairs with a matching key.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">combine</span></code> with the <code class="docutils literal notranslate"><span class="pre">by</span></code> option merges and flattens each pair, whereas <code class="docutils literal notranslate"><span class="pre">cross</span></code> does not. Compare the examples for <code class="docutils literal notranslate"><span class="pre">combine</span></code> and <code class="docutils literal notranslate"><span class="pre">cross</span></code> to see this difference.</p></li>
</ul>
</div>
<p>See also: <a class="reference internal" href="#cross"><span class="std std-doc">cross</span></a>, <a class="reference internal" href="#join"><span class="std std-doc">join</span></a></p>
</section>
<section id="concat">
<span id="operator-concat"></span><h2>concat<a class="headerlink" href="#concat" title="Permalink to this heading"></a></h2>
<p><em>Returns: queue channel</em></p>
<p>The <code class="docutils literal notranslate"><span class="pre">concat</span></code> operator emits the items from two or more source channels into a single output channel. Each source channel is emitted in the order in which it was specified.</p>
<p>In other words, given <em>N</em> channels, the items from the <em>i+1</em>-th channel are emitted only after all of the items from the <em>i</em>-th channel have been emitted.</p>
<p>For example:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="s1">&#39;a&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;b&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;c&#39;</span><span class="w"> </span><span class="o">)</span>
<span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">)</span>
<span class="n">c</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="s1">&#39;p&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;q&#39;</span><span class="w"> </span><span class="o">)</span>

<span class="n">c</span><span class="o">.</span><span class="na">concat</span><span class="o">(</span><span class="w"> </span><span class="n">b</span><span class="o">,</span><span class="w"> </span><span class="n">a</span><span class="w"> </span><span class="o">).</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">p</span>
<span class="go">q</span>
<span class="go">1</span>
<span class="go">2</span>
<span class="go">3</span>
<span class="go">a</span>
<span class="go">b</span>
<span class="go">c</span>
</pre></div>
</div>
<p>See also: <a class="reference internal" href="#mix"><span class="std std-doc">mix</span></a></p>
</section>
<section id="count">
<span id="operator-count"></span><h2>count<a class="headerlink" href="#count" title="Permalink to this heading"></a></h2>
<p><em>Returns: value channel</em></p>
<p>The <code class="docutils literal notranslate"><span class="pre">count</span></code> operator computes the total number of items in a source channel and emits it:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">9</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">7</span><span class="o">,</span><span class="w"> </span><span class="mi">5</span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">count</span><span class="o">()</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">4</span>
</pre></div>
</div>
<p>An optional filter can be provided to select which items to count. The selection criteria can be a literal value, a <a class="reference internal" href="script.html#script-regexp"><span class="std std-ref">regular expression</span></a>, a type qualifier (i.e. Java class), or a boolean predicate. For example:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">4</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">7</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">count</span><span class="o">(</span><span class="mi">1</span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">3</span>
</pre></div>
</div>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s1">&#39;a&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;c&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;c&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;q&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;b&#39;</span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">count</span><span class="o">(</span><span class="w"> </span><span class="o">~</span><span class="s">/c/</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">2</span>
</pre></div>
</div>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s1">&#39;a&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;c&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;c&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;q&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;b&#39;</span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">count</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="o">&lt;=</span><span class="w"> </span><span class="s1">&#39;c&#39;</span><span class="w"> </span><span class="o">}</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">4</span>
</pre></div>
</div>
</section>
<section id="countfasta">
<span id="operator-countfasta"></span><h2>countFasta<a class="headerlink" href="#countfasta" title="Permalink to this heading"></a></h2>
<p><em>Returns: value channel</em></p>
<p>Counts the total number of records in a channel of FASTA files, equivalent to <code class="docutils literal notranslate"><span class="pre">splitFasta</span> <span class="pre">|</span> <span class="pre">count</span></code>. See <a class="reference internal" href="#splitfasta"><span class="std std-doc">splitFasta</span></a> for the list of available options.</p>
</section>
<section id="countfastq">
<span id="operator-countfastq"></span><h2>countFastq<a class="headerlink" href="#countfastq" title="Permalink to this heading"></a></h2>
<p><em>Returns: value channel</em></p>
<p>Counts the total number of records in a channel of FASTQ files, equivalent to <code class="docutils literal notranslate"><span class="pre">splitFastq</span> <span class="pre">|</span> <span class="pre">count</span></code>. See <a class="reference internal" href="#splitfastq"><span class="std std-doc">splitFastq</span></a> for the list of available options.</p>
</section>
<section id="countjson">
<span id="operator-countjson"></span><h2>countJson<a class="headerlink" href="#countjson" title="Permalink to this heading"></a></h2>
<p><em>Returns: value channel</em></p>
<p>Counts the total number of records in a channel of JSON files, equivalent to <code class="docutils literal notranslate"><span class="pre">splitJson</span> <span class="pre">|</span> <span class="pre">count</span></code>. See <a class="reference internal" href="#splitjson"><span class="std std-doc">splitJson</span></a> for the list of available options.</p>
</section>
<section id="countlines">
<span id="operator-countlines"></span><h2>countLines<a class="headerlink" href="#countlines" title="Permalink to this heading"></a></h2>
<p><em>Returns: value channel</em></p>
<p>Counts the total number of lines in a channel of text files, equivalent to <code class="docutils literal notranslate"><span class="pre">splitText</span> <span class="pre">|</span> <span class="pre">count</span></code>. See <a class="reference internal" href="#splittext"><span class="std std-doc">splitLines</span></a> for the list of available options.</p>
</section>
<section id="cross">
<span id="operator-cross"></span><h2>cross<a class="headerlink" href="#cross" title="Permalink to this heading"></a></h2>
<p><em>Returns: queue channel</em></p>
<p>The <code class="docutils literal notranslate"><span class="pre">cross</span></code> operator emits every pairwise combination of two channels for which the pair has a matching key.</p>
<p>By default, the key is defined as the first entry in a list or map, or the value itself for any other data type. For example:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="o">[</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;alpha&#39;</span><span class="o">],</span><span class="w"> </span><span class="o">[</span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;beta&#39;</span><span class="o">]</span><span class="w"> </span><span class="o">)</span>
<span class="n">target</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="o">[</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;x&#39;</span><span class="o">],</span><span class="w"> </span><span class="o">[</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;y&#39;</span><span class="o">],</span><span class="w"> </span><span class="o">[</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;z&#39;</span><span class="o">],</span><span class="w"> </span><span class="o">[</span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;p&#39;</span><span class="o">],</span><span class="w"> </span><span class="o">[</span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;q&#39;</span><span class="o">],</span><span class="w"> </span><span class="o">[</span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;t&#39;</span><span class="o">]</span><span class="w"> </span><span class="o">)</span>

<span class="n">source</span><span class="o">.</span><span class="na">cross</span><span class="o">(</span><span class="n">target</span><span class="o">).</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[[1, alpha], [1, x]]</span>
<span class="go">[[1, alpha], [1, y]]</span>
<span class="go">[[1, alpha], [1, z]]</span>
<span class="go">[[2, beta], [2, p]]</span>
<span class="go">[[2, beta], [2, q]]</span>
<span class="go">[[2, beta], [2, t]]</span>
</pre></div>
</div>
<p>An optional closure can be used to define the matching key for each item:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="o">[</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;alpha&#39;</span><span class="o">],</span><span class="w"> </span><span class="o">[</span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;beta&#39;</span><span class="o">]</span><span class="w"> </span><span class="o">)</span>
<span class="n">target</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="o">[</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;a&#39;</span><span class="o">],</span><span class="w"> </span><span class="o">[</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;b&#39;</span><span class="o">],</span><span class="w"> </span><span class="o">[</span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;a&#39;</span><span class="o">],</span><span class="w"> </span><span class="o">[</span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;b&#39;</span><span class="o">]</span><span class="w"> </span><span class="o">)</span>

<span class="n">source</span><span class="w"> </span><span class="o">.</span><span class="na">cross</span><span class="o">(</span><span class="n">target</span><span class="o">)</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">it</span><span class="o">[</span><span class="mi">1</span><span class="o">][</span><span class="mi">0</span><span class="o">]</span><span class="w"> </span><span class="o">}</span><span class="w"> </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[[1, alpha], [1, a]]</span>
<span class="go">[[1, alpha], [2, a]]</span>
<span class="go">[[2, beta], [1, b]]</span>
<span class="go">[[2, beta], [2, b]]</span>
</pre></div>
</div>
<p>There are two important caveats when using the <code class="docutils literal notranslate"><span class="pre">cross</span></code> operator:</p>
<ol class="arabic simple">
<li><p>The operator is not <em>commutative</em>, i.e. <code class="docutils literal notranslate"><span class="pre">a.cross(b)</span></code> is not the same as <code class="docutils literal notranslate"><span class="pre">b.cross(a)</span></code></p></li>
<li><p>Each source channel should not emit any items with duplicate keys, i.e. each item should have a unique key.</p></li>
</ol>
<p>See also: <a class="reference internal" href="#combine"><span class="std std-doc">combine</span></a></p>
</section>
<section id="distinct">
<h2>distinct<a class="headerlink" href="#distinct" title="Permalink to this heading"></a></h2>
<p><em>Returns: queue channel</em></p>
<p>The <code class="docutils literal notranslate"><span class="pre">distinct</span></code> operator forwards a source channel with <em>consecutively</em> repeated items removed, such that each emitted item is different from the preceding one:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">distinct</span><span class="o">()</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">1</span>
<span class="go">2</span>
<span class="go">3</span>
<span class="go">1</span>
<span class="go">2</span>
<span class="go">3</span>
</pre></div>
</div>
<p>An optional <a class="reference internal" href="script.html#script-closure"><span class="std std-ref">closure</span></a> can be used to transform each value before it is evaluated for distinct-ness:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">4</span><span class="o">,</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">distinct</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">}</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">1</span>
<span class="go">2</span>
<span class="go">3</span>
<span class="go">2</span>
</pre></div>
</div>
<p>See also: <a class="reference internal" href="#unique"><span class="std std-doc">unique</span></a></p>
</section>
<section id="dump">
<span id="operator-dump"></span><h2>dump<a class="headerlink" href="#dump" title="Permalink to this heading"></a></h2>
<p><em>Returns: queue channel or value channel, depending on the input</em></p>
<p>The <code class="docutils literal notranslate"><span class="pre">dump</span></code> operator prints each item in a source channel when the pipeline is executed with the <code class="docutils literal notranslate"><span class="pre">-dump-channels</span></code> command-line option, otherwise it does nothing. It is a useful way to inspect and debug channels quickly without having to modify the pipeline script.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">tag</span></code> option can be used to select which channels to dump:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">map</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">it</span><span class="o">+</span><span class="mi">1</span><span class="w"> </span><span class="o">}</span>
<span class="w">    </span><span class="o">.</span><span class="na">dump</span><span class="o">(</span><span class="nl">tag:</span><span class="w"> </span><span class="s1">&#39;foo&#39;</span><span class="o">)</span>

<span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">map</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">it</span><span class="o">^</span><span class="mi">2</span><span class="w"> </span><span class="o">}</span>
<span class="w">    </span><span class="o">.</span><span class="na">dump</span><span class="o">(</span><span class="nl">tag:</span><span class="w"> </span><span class="s1">&#39;bar&#39;</span><span class="o">)</span>
</pre></div>
</div>
<p>Then, you can run your pipeline with <code class="docutils literal notranslate"><span class="pre">-dump-channels</span> <span class="pre">foo</span></code> or <code class="docutils literal notranslate"><span class="pre">-dump-channels</span> <span class="pre">bar</span></code> to dump the content of either channel. Multiple tag names can be specified as a comma-separated list.</p>
<p>Available options:</p>
<dl class="simple myst">
<dt><code class="docutils literal notranslate"><span class="pre">pretty</span></code></dt><dd><div class="versionadded">
<p><span class="versionmodified added">New in version 22.10.0.</span></p>
</div>
</dd>
<dd><p>When <code class="docutils literal notranslate"><span class="pre">true</span></code>, format the output as pretty-printed JSON (default: <code class="docutils literal notranslate"><span class="pre">false</span></code>).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tag</span></code></dt><dd><p>Associate the channel with a tag that can be specified with the <code class="docutils literal notranslate"><span class="pre">-dump-channels</span></code> option to select which channels to dump.</p>
</dd>
</dl>
</section>
<section id="filter">
<h2>filter<a class="headerlink" href="#filter" title="Permalink to this heading"></a></h2>
<p><em>Returns: queue channel</em></p>
<p>The <code class="docutils literal notranslate"><span class="pre">filter</span></code> operator emits the items from a source channel that satisfy a condition, discarding all other items. The filter condition can be a literal value, a <a class="reference internal" href="script.html#script-regexp"><span class="std std-ref">regular expression</span></a>, a type qualifier (i.e. Java class), or a boolean predicate.</p>
<p>The following example filters a channel with a regular expression that only matches strings beginning with <code class="docutils literal notranslate"><span class="pre">a</span></code>:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="s1">&#39;a&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;b&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;aa&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;bc&#39;</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="mf">4.5</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="w"> </span><span class="o">~</span><span class="s">/^a.*/</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">a</span>
<span class="go">aa</span>
</pre></div>
</div>
<p>The following example filters a channel with the <code class="docutils literal notranslate"><span class="pre">Number</span></code> type qualifier so that only numbers are emitted:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="s1">&#39;a&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;b&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;aa&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;bc&#39;</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="mf">4.5</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">filter</span><span class="o">(</span><span class="w"> </span><span class="n">Number</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">3</span>
<span class="go">4.5</span>
</pre></div>
</div>
<p>The following example filters a channel using a boolean predicate, which is a <a class="reference internal" href="script.html#script-closure"><span class="std std-ref">closure</span></a> that returns a boolean value. In this case, the predicate is used to select only odd numbers:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="mi">4</span><span class="o">,</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">filter</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">}</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">1</span>
<span class="go">3</span>
<span class="go">5</span>
</pre></div>
</div>
</section>
<section id="first">
<span id="operator-first"></span><h2>first<a class="headerlink" href="#first" title="Permalink to this heading"></a></h2>
<p><em>Returns: value channel</em></p>
<p>The <code class="docutils literal notranslate"><span class="pre">first</span></code> operator emits the first item in a source channel, or the first item that matches a condition. The condition can be a <a class="reference internal" href="script.html#script-regexp"><span class="std std-ref">regular expression</span></a>, a type qualifier (i.e. Java class), or a boolean predicate. For example:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="c1">// no condition is specified, emits the very first item: 1</span>
<span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">first</span><span class="o">()</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>

<span class="c1">// emits the first item matching the regular expression: &#39;aa&#39;</span>
<span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="s1">&#39;a&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;aa&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;aaa&#39;</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">first</span><span class="o">(</span><span class="w"> </span><span class="o">~</span><span class="s">/aa.*/</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>

<span class="c1">// emits the first String value: &#39;a&#39;</span>
<span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;a&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;b&#39;</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">first</span><span class="o">(</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>

<span class="c1">// emits the first item for which the predicate evaluates to true: 4</span>
<span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="mi">4</span><span class="o">,</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">first</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">}</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
</section>
<section id="flatmap">
<span id="operator-flatmap"></span><h2>flatMap<a class="headerlink" href="#flatmap" title="Permalink to this heading"></a></h2>
<p><em>Returns: queue channel</em></p>
<p>The <code class="docutils literal notranslate"><span class="pre">flatMap</span></code> operator applies a <em>mapping function</em> to each item from a source channel.</p>
<p>When the mapping function returns a list, each element in the list is emitted separately:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">flatMap</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="n">n</span><span class="o">,</span><span class="w"> </span><span class="n">n</span><span class="o">*</span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="n">n</span><span class="o">*</span><span class="mi">3</span><span class="w"> </span><span class="o">]</span><span class="w"> </span><span class="o">}</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">1</span>
<span class="go">2</span>
<span class="go">3</span>
<span class="go">2</span>
<span class="go">4</span>
<span class="go">6</span>
<span class="go">3</span>
<span class="go">6</span>
<span class="go">9</span>
</pre></div>
</div>
<p>When the mapping function returns a map, each key-value pair in the map is emitted separately:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">flatMap</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nl">number:</span><span class="w"> </span><span class="n">n</span><span class="o">,</span><span class="w"> </span><span class="nl">square:</span><span class="w"> </span><span class="n">n</span><span class="o">*</span><span class="n">n</span><span class="o">,</span><span class="w"> </span><span class="nl">cube:</span><span class="w"> </span><span class="n">n</span><span class="o">*</span><span class="n">n</span><span class="o">*</span><span class="n">n</span><span class="w"> </span><span class="o">]</span><span class="w"> </span><span class="o">}</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="s2">&quot;${it.key}: ${it.value}&quot;</span><span class="w"> </span><span class="o">}</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">number: 1</span>
<span class="go">square: 1</span>
<span class="go">cube: 1</span>
<span class="go">number: 2</span>
<span class="go">square: 4</span>
<span class="go">cube: 8</span>
<span class="go">number: 3</span>
<span class="go">square: 9</span>
<span class="go">cube: 27</span>
</pre></div>
</div>
</section>
<section id="flatten">
<span id="operator-flatten"></span><h2>flatten<a class="headerlink" href="#flatten" title="Permalink to this heading"></a></h2>
<p><em>Returns: queue channel</em></p>
<p>The <code class="docutils literal notranslate"><span class="pre">flatten</span></code> operator flattens each item from a source channel that is a list or other collection, such that each element in each collection is emitted separately:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="o">[</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="o">[</span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="o">]],</span><span class="w"> </span><span class="mi">4</span><span class="o">,</span><span class="w"> </span><span class="o">[</span><span class="mi">5</span><span class="o">,</span><span class="w"> </span><span class="o">[</span><span class="mi">6</span><span class="o">]]</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">flatten</span><span class="o">()</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">1</span>
<span class="go">2</span>
<span class="go">3</span>
<span class="go">4</span>
<span class="go">5</span>
<span class="go">6</span>
</pre></div>
</div>
<p>As shown in the above example, deeply nested collections are also flattened.</p>
<p>See also: <a class="reference internal" href="#flatmap"><span class="std std-doc">flatMap</span></a></p>
</section>
<section id="grouptuple">
<span id="operator-grouptuple"></span><h2>groupTuple<a class="headerlink" href="#grouptuple" title="Permalink to this heading"></a></h2>
<p><em>Returns: queue channel</em></p>
<p>The <code class="docutils literal notranslate"><span class="pre">groupTuple</span></code> operator collects lists (i.e. <em>tuples</em>) from a source channel into groups based on a grouping key. A new tuple is emitted for each distinct key.</p>
<p>To be more precise, the operator transforms a sequence of tuples like <em>(K, V, W, ..)</em> into a sequence of tuples like <em>(K, list(V), list(W), ..)</em>.</p>
<p>For example:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="o">[</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;A&#39;</span><span class="o">],</span><span class="w"> </span><span class="o">[</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;B&#39;</span><span class="o">],</span><span class="w"> </span><span class="o">[</span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;C&#39;</span><span class="o">],</span><span class="w"> </span><span class="o">[</span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;B&#39;</span><span class="o">],</span><span class="w"> </span><span class="o">[</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;C&#39;</span><span class="o">],</span><span class="w"> </span><span class="o">[</span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;A&#39;</span><span class="o">],</span><span class="w"> </span><span class="o">[</span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;D&#39;</span><span class="o">]</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">groupTuple</span><span class="o">()</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[1, [A, B, C]]</span>
<span class="go">[2, [C, A]]</span>
<span class="go">[3, [B, D]]</span>
</pre></div>
</div>
<p>By default, the first element of each tuple is used as the grouping key. The <code class="docutils literal notranslate"><span class="pre">by</span></code> option can be used to specify a different index, or list of indices. For example, to group by the second element of each tuple:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="o">[</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;A&#39;</span><span class="o">],</span><span class="w"> </span><span class="o">[</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;B&#39;</span><span class="o">],</span><span class="w"> </span><span class="o">[</span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;C&#39;</span><span class="o">],</span><span class="w"> </span><span class="o">[</span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;B&#39;</span><span class="o">],</span><span class="w"> </span><span class="o">[</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;C&#39;</span><span class="o">],</span><span class="w"> </span><span class="o">[</span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;A&#39;</span><span class="o">],</span><span class="w"> </span><span class="o">[</span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;D&#39;</span><span class="o">]</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">groupTuple</span><span class="o">(</span><span class="nl">by:</span><span class="w"> </span><span class="mi">1</span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[[1, 2], A]</span>
<span class="go">[[1, 3], B]</span>
<span class="go">[[2, 1], C]</span>
<span class="go">[[3], D]</span>
</pre></div>
</div>
<p>By default, if you don’t specify a size, the <code class="docutils literal notranslate"><span class="pre">groupTuple</span></code> operator will not emit any groups until <em>all</em> inputs have been received. If possible, you should always try to specify the number of expected elements in each group using the <code class="docutils literal notranslate"><span class="pre">size</span></code> option, so that each group can be emitted as soon as it’s ready. In cases where the size of each group varies based on the grouping key, you can use the built-in <code class="docutils literal notranslate"><span class="pre">groupKey()</span></code> function, which allows you to define a different expected size for each group:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">chr_frequency</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">[</span><span class="s2">&quot;chr1&quot;</span><span class="o">:</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="s2">&quot;chr2&quot;</span><span class="o">:</span><span class="w"> </span><span class="mi">3</span><span class="o">]</span>

<span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span>
<span class="w">        </span><span class="o">[</span><span class="s1">&#39;region1&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;chr1&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;/path/to/region1_chr1.vcf&#39;</span><span class="o">],</span>
<span class="w">        </span><span class="o">[</span><span class="s1">&#39;region2&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;chr1&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;/path/to/region2_chr1.vcf&#39;</span><span class="o">],</span>
<span class="w">        </span><span class="o">[</span><span class="s1">&#39;region1&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;chr2&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;/path/to/region1_chr2.vcf&#39;</span><span class="o">],</span>
<span class="w">        </span><span class="o">[</span><span class="s1">&#39;region2&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;chr2&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;/path/to/region2_chr2.vcf&#39;</span><span class="o">],</span>
<span class="w">        </span><span class="o">[</span><span class="s1">&#39;region3&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;chr2&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;/path/to/region3_chr2.vcf&#39;</span><span class="o">]</span>
<span class="w">    </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">map</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">region</span><span class="o">,</span><span class="w"> </span><span class="n">chr</span><span class="o">,</span><span class="w"> </span><span class="n">vcf</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">tuple</span><span class="o">(</span><span class="w"> </span><span class="n">groupKey</span><span class="o">(</span><span class="n">chr</span><span class="o">,</span><span class="w"> </span><span class="n">chr_frequency</span><span class="o">[</span><span class="n">chr</span><span class="o">]),</span><span class="w"> </span><span class="n">vcf</span><span class="w"> </span><span class="o">)</span><span class="w"> </span><span class="o">}</span>
<span class="w">    </span><span class="o">.</span><span class="na">groupTuple</span><span class="o">()</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[chr1, [/path/to/region1_chr1.vcf, /path/to/region2_chr1.vcf]]</span>
<span class="go">[chr2, [/path/to/region1_chr2.vcf, /path/to/region2_chr2.vcf, /path/to/region3_chr2.vcf]]</span>
</pre></div>
</div>
<p>Available options:</p>
<dl class="simple myst">
<dt><code class="docutils literal notranslate"><span class="pre">by</span></code></dt><dd><p>The zero-based index of the element to use as the grouping key. Can also be a list of indices, e.g. <code class="docutils literal notranslate"><span class="pre">by:</span> <span class="pre">[0,2]</span></code> (default: <code class="docutils literal notranslate"><span class="pre">[0]</span></code>).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">remainder</span></code></dt><dd><p>When <code class="docutils literal notranslate"><span class="pre">true</span></code>, incomplete tuples (i.e. groups with less than <code class="docutils literal notranslate"><span class="pre">size</span></code> items) are emitted as partial groups, otherwise they are discarded (default: <code class="docutils literal notranslate"><span class="pre">false</span></code>). This option can only be used with <code class="docutils literal notranslate"><span class="pre">size</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size</span></code></dt><dd><p>The required number of items for each group. When a group reaches the required size, it is emitted.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sort</span></code></dt><dd><p>Defines the sorting criteria for the grouped items. Can be one of the following values:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">false</span></code>: No sorting is applied (default).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">true</span></code>: Order the grouped items by the item’s natural ordering i.e. numerical for number, lexicographic for string, etc. See the <a class="reference external" href="http://docs.oracle.com/javase/tutorial/collections/interfaces/order.html">Java documentation</a> for more information.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'hash'</span></code>: Order the grouped items by the hash number associated to each entry.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">'deep'</span></code>: Similar to the previous, but the hash number is created on actual entries content e.g. when the item is a file, the hash is created on the actual file content.</p></li>
<li><p>A custom sorting criteria used to order the nested list elements of each tuple. It can be a <a class="reference internal" href="script.html#script-closure"><span class="std std-ref">Closure</span></a> or a <a class="reference external" href="http://docs.oracle.com/javase/7/docs/api/java/util/Comparator.html">Comparator</a> object.</p></li>
</ul>
</dd>
</dl>
</section>
<section id="ifempty">
<span id="operator-ifempty"></span><h2>ifEmpty<a class="headerlink" href="#ifempty" title="Permalink to this heading"></a></h2>
<p><em>Returns: value channel</em></p>
<p>The <code class="docutils literal notranslate"><span class="pre">ifEmpty</span></code> operator emits a source channel, or a default value if the source channel is <em>empty</em> (doesn’t emit any value):</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="w"> </span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="o">)</span><span class="w"> </span><span class="o">.</span><span class="na">ifEmpty</span><span class="o">(</span><span class="s1">&#39;Hello&#39;</span><span class="o">)</span><span class="w"> </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">1</span>
<span class="go">2</span>
<span class="go">3</span>
</pre></div>
</div>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="w"> </span><span class="o">.</span><span class="na">empty</span><span class="o">()</span><span class="w"> </span><span class="o">.</span><span class="na">ifEmpty</span><span class="o">(</span><span class="s1">&#39;Hello&#39;</span><span class="o">)</span><span class="w"> </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Hello</span>
</pre></div>
</div>
<p>The default value can also be a <a class="reference internal" href="script.html#script-closure"><span class="std std-ref">closure</span></a>, in which case the closure is evaluated and the result is emitted when the source channel is empty.</p>
<p>See also: <a class="reference internal" href="channel.html#channel-empty"><span class="std std-ref">empty</span></a> channel factory</p>
</section>
<section id="join">
<span id="operator-join"></span><h2>join<a class="headerlink" href="#join" title="Permalink to this heading"></a></h2>
<p><em>Returns: queue channel</em></p>
<p>The <code class="docutils literal notranslate"><span class="pre">join</span></code> operator emits the inner product of two source channels using a matching key.</p>
<p>To be more precise, the operator transforms a sequence of tuples like <em>(K, V1, V2, ..)</em> and <em>(K, W1, W1, ..)</em> into a sequence of tuples like <em>(K, V1, V2, .., W1, W2, ..)</em>. It is equivalent to an <em>inner join</em> in SQL, or an <em>outer join</em> when <code class="docutils literal notranslate"><span class="pre">remainder</span></code> is <code class="docutils literal notranslate"><span class="pre">true</span></code>.</p>
<p>For example:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">left</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="o">[</span><span class="s1">&#39;X&#39;</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="o">],</span><span class="w"> </span><span class="o">[</span><span class="s1">&#39;Y&#39;</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">],</span><span class="w"> </span><span class="o">[</span><span class="s1">&#39;Z&#39;</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="o">],</span><span class="w"> </span><span class="o">[</span><span class="s1">&#39;P&#39;</span><span class="o">,</span><span class="w"> </span><span class="mi">7</span><span class="o">]</span><span class="w"> </span><span class="o">)</span>
<span class="n">right</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="o">[</span><span class="s1">&#39;Z&#39;</span><span class="o">,</span><span class="w"> </span><span class="mi">6</span><span class="o">],</span><span class="w"> </span><span class="o">[</span><span class="s1">&#39;Y&#39;</span><span class="o">,</span><span class="w"> </span><span class="mi">5</span><span class="o">],</span><span class="w"> </span><span class="o">[</span><span class="s1">&#39;X&#39;</span><span class="o">,</span><span class="w"> </span><span class="mi">4</span><span class="o">]</span><span class="w"> </span><span class="o">)</span>

<span class="n">left</span><span class="o">.</span><span class="na">join</span><span class="o">(</span><span class="n">right</span><span class="o">).</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[Z, 3, 6]</span>
<span class="go">[Y, 2, 5]</span>
<span class="go">[X, 1, 4]</span>
</pre></div>
</div>
<p>By default, the first element of each item is used as the key. The <code class="docutils literal notranslate"><span class="pre">by</span></code> option can be used to specify a different index, or list of indices.</p>
<p>By default, unmatched items are discarded. The <code class="docutils literal notranslate"><span class="pre">remainder</span></code> option can be used to emit them at the end:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">left</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="o">[</span><span class="s1">&#39;X&#39;</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="o">],</span><span class="w"> </span><span class="o">[</span><span class="s1">&#39;Y&#39;</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">],</span><span class="w"> </span><span class="o">[</span><span class="s1">&#39;Z&#39;</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="o">],</span><span class="w"> </span><span class="o">[</span><span class="s1">&#39;P&#39;</span><span class="o">,</span><span class="w"> </span><span class="mi">7</span><span class="o">]</span><span class="w"> </span><span class="o">)</span>
<span class="n">right</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="o">[</span><span class="s1">&#39;Z&#39;</span><span class="o">,</span><span class="w"> </span><span class="mi">6</span><span class="o">],</span><span class="w"> </span><span class="o">[</span><span class="s1">&#39;Y&#39;</span><span class="o">,</span><span class="w"> </span><span class="mi">5</span><span class="o">],</span><span class="w"> </span><span class="o">[</span><span class="s1">&#39;X&#39;</span><span class="o">,</span><span class="w"> </span><span class="mi">4</span><span class="o">]</span><span class="w"> </span><span class="o">)</span>

<span class="n">left</span><span class="o">.</span><span class="na">join</span><span class="o">(</span><span class="n">right</span><span class="o">,</span><span class="w"> </span><span class="nl">remainder:</span><span class="w"> </span><span class="kc">true</span><span class="o">).</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[Y, 2, 5]</span>
<span class="go">[Z, 3, 6]</span>
<span class="go">[X, 1, 4]</span>
<span class="go">[P, 7, null]</span>
</pre></div>
</div>
<p>Available options:</p>
<dl class="simple myst">
<dt><code class="docutils literal notranslate"><span class="pre">by</span></code></dt><dd><p>The zero-based index of each item to use as the matching key. Can also be a list of indices, e.g. <code class="docutils literal notranslate"><span class="pre">by:</span> <span class="pre">[0,</span> <span class="pre">2]</span></code> (default: <code class="docutils literal notranslate"><span class="pre">[0]</span></code>).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">failOnDuplicate</span></code></dt><dd><p>When <code class="docutils literal notranslate"><span class="pre">true</span></code>, an error is reported when the operator receives multiple items from the same channel with the same key (default: <code class="docutils literal notranslate"><span class="pre">true</span></code> if <a class="reference internal" href="config.html#config-feature-flags"><span class="std std-ref">strict mode</span></a> is enabled, <code class="docutils literal notranslate"><span class="pre">false</span></code> otherwise).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">failOnMismatch</span></code></dt><dd><p>When <code class="docutils literal notranslate"><span class="pre">true</span></code>, an error is reported when the operator receives an item from one channel for which there no matching item from the other channel (default: <code class="docutils literal notranslate"><span class="pre">true</span></code> if <a class="reference internal" href="config.html#config-feature-flags"><span class="std std-ref">strict mode</span></a> is enabled, <code class="docutils literal notranslate"><span class="pre">false</span></code> otherwise). This option cannot be used with <code class="docutils literal notranslate"><span class="pre">remainder</span></code>.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">remainder</span></code></dt><dd><p>When <code class="docutils literal notranslate"><span class="pre">true</span></code>, unmatched items are emitted at the end, otherwise they are discarded (default: <code class="docutils literal notranslate"><span class="pre">false</span></code>).</p>
</dd>
</dl>
<p>See also: <a class="reference internal" href="#combine"><span class="std std-doc">combine</span></a>, <a class="reference internal" href="#cross"><span class="std std-doc">cross</span></a></p>
</section>
<section id="last">
<span id="operator-last"></span><h2>last<a class="headerlink" href="#last" title="Permalink to this heading"></a></h2>
<p><em>Returns: value channel</em></p>
<p>The <code class="docutils literal notranslate"><span class="pre">last</span></code> operator emits the last item from a source channel:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="mi">4</span><span class="o">,</span><span class="w"> </span><span class="mi">5</span><span class="o">,</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">last</span><span class="o">()</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">6</span>
</pre></div>
</div>
</section>
<section id="map">
<span id="operator-map"></span><h2>map<a class="headerlink" href="#map" title="Permalink to this heading"></a></h2>
<p><em>Returns: queue channel</em></p>
<p>The <code class="docutils literal notranslate"><span class="pre">map</span></code> operator applies a <em>mapping function</em> to each item from a source channel:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="mi">4</span><span class="o">,</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">map</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="o">}</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">1</span>
<span class="go">4</span>
<span class="go">9</span>
<span class="go">16</span>
<span class="go">25</span>
</pre></div>
</div>
</section>
<section id="max">
<span id="operator-max"></span><h2>max<a class="headerlink" href="#max" title="Permalink to this heading"></a></h2>
<p><em>Returns: value channel</em></p>
<p>The <code class="docutils literal notranslate"><span class="pre">max</span></code> operator emits the item with the greatest value from a source channel:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="mi">8</span><span class="o">,</span><span class="w"> </span><span class="mi">6</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">max</span><span class="o">()</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="s2">&quot;Max value is $it&quot;</span><span class="w"> </span><span class="o">}</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Max value is 8</span>
</pre></div>
</div>
<p>An optional <a class="reference internal" href="script.html#script-closure"><span class="std std-ref">closure</span></a> can be used to control how the items are compared. The closure can be a <em>mapping function</em>, which transforms each item before it is compared, or a <em>comparator function</em>, which defines how to compare two items more generally.</p>
<p>The following examples show how to find the longest string in a channel:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="c1">// mapping function</span>
<span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="s2">&quot;hello&quot;</span><span class="o">,</span><span class="w"> </span><span class="s2">&quot;hi&quot;</span><span class="o">,</span><span class="w"> </span><span class="s2">&quot;hey&quot;</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">max</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">it</span><span class="o">.</span><span class="na">size</span><span class="o">()</span><span class="w"> </span><span class="o">}</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">hello</span>
</pre></div>
</div>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="c1">// comparator function</span>
<span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="s2">&quot;hello&quot;</span><span class="o">,</span><span class="w"> </span><span class="s2">&quot;hi&quot;</span><span class="o">,</span><span class="w"> </span><span class="s2">&quot;hey&quot;</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">max</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">a</span><span class="o">,</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">a</span><span class="o">.</span><span class="na">size</span><span class="o">()</span><span class="w"> </span><span class="o">&lt;=&gt;</span><span class="w"> </span><span class="n">b</span><span class="o">.</span><span class="na">size</span><span class="o">()</span><span class="w"> </span><span class="o">}</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">hello</span>
</pre></div>
</div>
</section>
<section id="merge">
<span id="operator-merge"></span><h2>merge<a class="headerlink" href="#merge" title="Permalink to this heading"></a></h2>
<p><em>Returns: queue channel</em></p>
<p>The <code class="docutils literal notranslate"><span class="pre">merge</span></code> operator joins the items from two or more channels into a new channel:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">odds</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="mi">5</span><span class="o">,</span><span class="w"> </span><span class="mi">7</span><span class="o">,</span><span class="w"> </span><span class="mi">9</span><span class="o">)</span>
<span class="n">evens</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">4</span><span class="o">,</span><span class="w"> </span><span class="mi">6</span><span class="o">)</span>

<span class="n">odds</span>
<span class="w">    </span><span class="o">.</span><span class="na">merge</span><span class="o">(</span><span class="w"> </span><span class="n">evens</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[1, 2]</span>
<span class="go">[3, 4]</span>
<span class="go">[5, 6]</span>
</pre></div>
</div>
<p>An optional closure can be used to control how two items are merged:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">odds</span><span class="w">  </span><span class="o">=</span><span class="w"> </span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="mi">5</span><span class="o">,</span><span class="w"> </span><span class="mi">7</span><span class="o">,</span><span class="w"> </span><span class="mi">9</span><span class="o">)</span>
<span class="n">evens</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">4</span><span class="o">,</span><span class="w"> </span><span class="mi">6</span><span class="o">)</span>

<span class="n">odds</span>
<span class="w">    </span><span class="o">.</span><span class="na">merge</span><span class="o">(</span><span class="w"> </span><span class="n">evens</span><span class="w"> </span><span class="o">)</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">a</span><span class="o">,</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">tuple</span><span class="o">(</span><span class="n">b</span><span class="o">*</span><span class="n">b</span><span class="o">,</span><span class="w"> </span><span class="n">a</span><span class="o">)</span><span class="w"> </span><span class="o">}</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[16, 3]</span>
<span class="go">[36, 5]</span>
<span class="go">[4, 1]</span>
</pre></div>
</div>
<div class="admonition danger">
<p class="admonition-title">Danger</p>
<p>In general, the use of the <code class="docutils literal notranslate"><span class="pre">merge</span></code> operator is discouraged. Processes and channel operators are not guaranteed to emit items in the order that they were received, as they are executed concurrently. Therefore, if you try to merge output channels from different processes, the resulting channel may be different on each run, which will cause resumed runs to <a class="reference internal" href="cache-and-resume.html#cache-nondeterministic-inputs"><span class="std std-ref">not work properly</span></a>.</p>
<p>You should always use a matching key (e.g. sample ID) to merge multiple channels, so that they are combined in a deterministic way. For this purpose, you can use the <a class="reference internal" href="#join"><span class="std std-doc">join</span></a> operator.</p>
</div>
</section>
<section id="min">
<span id="operator-min"></span><h2>min<a class="headerlink" href="#min" title="Permalink to this heading"></a></h2>
<p><em>Returns: value channel</em></p>
<p>The <code class="docutils literal notranslate"><span class="pre">min</span></code> operator emits the item with the lowest value from a source channel:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="mi">8</span><span class="o">,</span><span class="w"> </span><span class="mi">6</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">min</span><span class="o">()</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="s2">&quot;Min value is $it&quot;</span><span class="w"> </span><span class="o">}</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Min value is 2</span>
</pre></div>
</div>
<p>An optional <a class="reference internal" href="script.html#script-closure"><span class="std std-ref">closure</span></a> can be used to control how the items are compared. The closure can be a <em>mapping function</em>, which transforms each item before it is compared, or a <em>comparator function</em>, which defines how to compare two items more generally.</p>
<p>The following examples show how to find the shortest string in a channel:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="c1">// mapping function</span>
<span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="s2">&quot;hello&quot;</span><span class="o">,</span><span class="w"> </span><span class="s2">&quot;hi&quot;</span><span class="o">,</span><span class="w"> </span><span class="s2">&quot;hey&quot;</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">min</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">it</span><span class="o">.</span><span class="na">size</span><span class="o">()</span><span class="w"> </span><span class="o">}</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">hi</span>
</pre></div>
</div>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="c1">// comparator function</span>
<span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="s2">&quot;hello&quot;</span><span class="o">,</span><span class="w"> </span><span class="s2">&quot;hi&quot;</span><span class="o">,</span><span class="w"> </span><span class="s2">&quot;hey&quot;</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">min</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">a</span><span class="o">,</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">a</span><span class="o">.</span><span class="na">size</span><span class="o">()</span><span class="w"> </span><span class="o">&lt;=&gt;</span><span class="w"> </span><span class="n">b</span><span class="o">.</span><span class="na">size</span><span class="o">()</span><span class="w"> </span><span class="o">}</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">hi</span>
</pre></div>
</div>
</section>
<section id="mix">
<span id="operator-mix"></span><h2>mix<a class="headerlink" href="#mix" title="Permalink to this heading"></a></h2>
<p><em>Returns: queue channel</em></p>
<p>The <code class="docutils literal notranslate"><span class="pre">mix</span></code> operator emits the items from two or more source channels into a single output channel:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">c1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">)</span>
<span class="n">c2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="s1">&#39;a&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;b&#39;</span><span class="w"> </span><span class="o">)</span>
<span class="n">c3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="s1">&#39;z&#39;</span><span class="w"> </span><span class="o">)</span>

<span class="n">c1</span><span class="o">.</span><span class="na">mix</span><span class="o">(</span><span class="n">c2</span><span class="o">,</span><span class="w"> </span><span class="n">c3</span><span class="o">).</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">1</span>
<span class="go">2</span>
<span class="go">3</span>
<span class="go">a</span>
<span class="go">b</span>
<span class="go">z</span>
</pre></div>
</div>
<p>The items in the mixed output channel may appear in any order, regardless of which source channel they came from. Thus, the previous example could also output the following:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">z</span>
<span class="go">1</span>
<span class="go">a</span>
<span class="go">2</span>
<span class="go">b</span>
<span class="go">3</span>
</pre></div>
</div>
<p>See also: <a class="reference internal" href="#concat"><span class="std std-doc">concat</span></a></p>
</section>
<section id="multimap">
<span id="operator-multimap"></span><h2>multiMap<a class="headerlink" href="#multimap" title="Permalink to this heading"></a></h2>
<div class="versionadded">
<p><span class="versionmodified added">New in version 19.11.0-edge.</span></p>
</div>
<p><em>Returns: map of queue channels</em></p>
<p>The <code class="docutils literal notranslate"><span class="pre">multiMap</span></code> operator applies a set of mapping functions to a source channel, producing a separate output channel for each mapping function.</p>
<p>The multi-map criteria is a <a class="reference internal" href="script.html#script-closure"><span class="std std-ref">closure</span></a> that defines, for each output channel, a label followed by a mapping expression.</p>
<p>For example:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">multiMap</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">        </span><span class="nl">foo:</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="mi">1</span>
<span class="w">        </span><span class="nl">bar:</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">it</span>
<span class="w">    </span><span class="o">}</span>
<span class="w">    </span><span class="o">.</span><span class="na">set</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">}</span>

<span class="n">result</span><span class="o">.</span><span class="na">foo</span><span class="o">.</span><span class="na">view</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="s2">&quot;foo $it&quot;</span><span class="w"> </span><span class="o">}</span>
<span class="n">result</span><span class="o">.</span><span class="na">bar</span><span class="o">.</span><span class="na">view</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="s2">&quot;bar $it&quot;</span><span class="w"> </span><span class="o">}</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">foo 2</span>
<span class="go">foo 3</span>
<span class="go">foo 4</span>
<span class="go">foo 5</span>
<span class="go">bar 1</span>
<span class="go">bar 4</span>
<span class="go">bar 9</span>
<span class="go">bar 16</span>
</pre></div>
</div>
<p>Multiple labels can share the same mapping expression using the following shorthand:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">multiMap</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="nl">foo:</span><span class="w"> </span><span class="nl">bar:</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="o">}</span>
<span class="w">    </span><span class="o">.</span><span class="na">set</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">result</span><span class="w"> </span><span class="o">}</span>

<span class="n">result</span><span class="o">.</span><span class="na">foo</span><span class="o">.</span><span class="na">view</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="s2">&quot;foo $it&quot;</span><span class="w"> </span><span class="o">}</span>
<span class="n">result</span><span class="o">.</span><span class="na">bar</span><span class="o">.</span><span class="na">view</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="s2">&quot;bar $it&quot;</span><span class="w"> </span><span class="o">}</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">bar 1</span>
<span class="go">bar 2</span>
<span class="go">bar 3</span>
<span class="go">foo 1</span>
<span class="go">foo 2</span>
<span class="go">foo 3</span>
</pre></div>
</div>
<p>The above example creates two channels as before, but now they both receive the same items.</p>
<p>You can use the <code class="docutils literal notranslate"><span class="pre">multiMapCriteria()</span></code> method to create a multi-map criteria as a variable that can be passed as an argument to any number of <code class="docutils literal notranslate"><span class="pre">multiMap</span></code> operations, as shown below:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="kt">def</span><span class="w"> </span><span class="n">criteria</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">multiMapCriteria</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="nl">small:</span><span class="w"> </span><span class="o">[</span><span class="n">it</span><span class="o">,</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="mi">10</span><span class="o">]</span>
<span class="w">    </span><span class="nl">large:</span><span class="w"> </span><span class="o">[</span><span class="n">it</span><span class="o">,</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="mi">10</span><span class="o">]</span>
<span class="o">}</span>

<span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">30</span><span class="o">).</span><span class="na">multiMap</span><span class="o">(</span><span class="n">criteria</span><span class="o">).</span><span class="na">set</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">ch1</span><span class="w"> </span><span class="o">}</span>
<span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span><span class="w"> </span><span class="mi">20</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="o">).</span><span class="na">multiMap</span><span class="o">(</span><span class="n">criteria</span><span class="o">).</span><span class="na">set</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">ch2</span><span class="w"> </span><span class="o">}</span>

<span class="n">ch1</span><span class="o">.</span><span class="na">small</span><span class="o">.</span><span class="na">view</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">v</span><span class="o">,</span><span class="w"> </span><span class="n">is_small</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s2">&quot;ch1: $v is small: $is_small&quot;</span><span class="w"> </span><span class="o">}</span>
<span class="n">ch1</span><span class="o">.</span><span class="na">large</span><span class="o">.</span><span class="na">view</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">v</span><span class="o">,</span><span class="w"> </span><span class="n">is_large</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s2">&quot;ch1: $v is large: $is_large&quot;</span><span class="w"> </span><span class="o">}</span>
<span class="n">ch2</span><span class="o">.</span><span class="na">small</span><span class="o">.</span><span class="na">view</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">v</span><span class="o">,</span><span class="w"> </span><span class="n">is_small</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s2">&quot;ch2: $v is small: $is_small&quot;</span><span class="w"> </span><span class="o">}</span>
<span class="n">ch2</span><span class="o">.</span><span class="na">large</span><span class="o">.</span><span class="na">view</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">v</span><span class="o">,</span><span class="w"> </span><span class="n">is_large</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s2">&quot;ch2: $v is large: $is_large&quot;</span><span class="w"> </span><span class="o">}</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you use <code class="docutils literal notranslate"><span class="pre">multiMap</span></code> to split a tuple or map into multiple channels, it is recommended that you retain a matching key (e.g. sample ID) with <em>each</em> new channel, so that you can re-combine these channels later on if needed. In general, you should not expect to be able to merge channels correctly without a matching key, due to the concurrent nature of Nextflow pipelines.</p>
</div>
</section>
<section id="randomsample">
<span id="operator-randomsample"></span><h2>randomSample<a class="headerlink" href="#randomsample" title="Permalink to this heading"></a></h2>
<p><em>Returns: queue channel</em></p>
<p>The <code class="docutils literal notranslate"><span class="pre">randomSample</span></code> operator emits a randomly-selected subset of items from a source channel:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="mi">1</span><span class="o">..</span><span class="mi">100</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">randomSample</span><span class="o">(</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<p>The above snippet will print 10 randomly-selected numbers between 1 and 100 (without replacement).</p>
<p>An optional second parameter can be used to set the initial <em>seed</em> for the random number generator, which ensures that the <code class="docutils literal notranslate"><span class="pre">randomSample</span></code> operator produces the same pseudo-random sequence across runs:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="mi">1</span><span class="o">..</span><span class="mi">100</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">randomSample</span><span class="o">(</span><span class="w"> </span><span class="mi">10</span><span class="o">,</span><span class="w"> </span><span class="mi">234</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<p>The above example will print 10 randomly-selected numbers between 1 and 100 (without replacement). Each subsequent script execution will produce the same sequence.</p>
</section>
<section id="reduce">
<span id="operator-reduce"></span><h2>reduce<a class="headerlink" href="#reduce" title="Permalink to this heading"></a></h2>
<p><em>Returns: value channel</em></p>
<p>The <code class="docutils literal notranslate"><span class="pre">reduce</span></code> operator applies an <em>accumulator function</em> sequentially to each item in a source channel, and emits the final accumulated value. The accumulator function takes two parameters – the accumulated value and the <em>i</em>-th emitted item – and it should return the accumulated result, which is passed to the next invocation with the <em>i+1</em>-th item. This process is repeated for each item in the source channel.</p>
<p>For example:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="mi">4</span><span class="o">,</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">reduce</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">a</span><span class="o">,</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">        </span><span class="n">println</span><span class="w"> </span><span class="s2">&quot;a: $a b: $b&quot;</span>
<span class="w">        </span><span class="n">a</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">b</span>
<span class="w">    </span><span class="o">}</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="s2">&quot;result = $it&quot;</span><span class="w"> </span><span class="o">}</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">a: 1 b: 2</span>
<span class="go">a: 3 b: 3</span>
<span class="go">a: 6 b: 4</span>
<span class="go">a: 10 b: 5</span>
<span class="go">result = 15</span>
</pre></div>
</div>
<p>By default, the first item is used as the initial accumulated value. You can optionally specify a different initial value as shown below:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="mi">4</span><span class="o">,</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">reduce</span><span class="o">(</span><span class="w"> </span><span class="s1">&#39;result:&#39;</span><span class="w"> </span><span class="o">)</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">accum</span><span class="o">,</span><span class="w"> </span><span class="n">v</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">        </span><span class="n">println</span><span class="w"> </span><span class="n">accum</span>
<span class="w">        </span><span class="n">accum</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="s1">&#39; &#39;</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">v</span>
<span class="w">    </span><span class="o">}</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="s2">&quot;final $it&quot;</span><span class="w"> </span><span class="o">}</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">result:</span>
<span class="go">result: 1</span>
<span class="go">result: 1 2</span>
<span class="go">result: 1 2 3</span>
<span class="go">result: 1 2 3 4</span>
<span class="go">final result: 1 2 3 4 5</span>
</pre></div>
</div>
</section>
<section id="set">
<span id="operator-set"></span><h2>set<a class="headerlink" href="#set" title="Permalink to this heading"></a></h2>
<p><em>Returns: nothing</em></p>
<p>The <code class="docutils literal notranslate"><span class="pre">set</span></code> operator assigns a source channel to a variable, whose name is specified as a closure parameter:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span><span class="w"> </span><span class="mi">20</span><span class="o">,</span><span class="w"> </span><span class="mi">30</span><span class="o">).</span><span class="na">set</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">my_channel</span><span class="w"> </span><span class="o">}</span>
</pre></div>
</div>
<p>Using <code class="docutils literal notranslate"><span class="pre">set</span></code> is semantically equivalent to assigning a variable:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">my_channel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">10</span><span class="o">,</span><span class="w"> </span><span class="mi">20</span><span class="o">,</span><span class="w"> </span><span class="mi">30</span><span class="o">)</span>
</pre></div>
</div>
<p>See also: <a class="reference internal" href="#tap"><span class="std std-doc">tap</span></a></p>
</section>
<section id="splitcsv">
<span id="operator-splitcsv"></span><h2>splitCsv<a class="headerlink" href="#splitcsv" title="Permalink to this heading"></a></h2>
<p><em>Returns: queue channel</em></p>
<p>The <code class="docutils literal notranslate"><span class="pre">splitCsv</span></code> operator parses and splits <a class="reference external" href="http://en.wikipedia.org/wiki/Comma-separated_values">CSV-formatted</a> text from a source channel into records, or groups of records with a given size.</p>
<p>For example:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="s1">&#39;10,20,30\n70,80,90&#39;</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">splitCsv</span><span class="o">()</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">row</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s2">&quot;${row[0]} - ${row[1]} - ${row[2]}&quot;</span><span class="w"> </span><span class="o">}</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">10 - 20 - 30</span>
<span class="go">70 - 80 - 90</span>
</pre></div>
</div>
<p>The above example shows hows CSV text is parsed and split into individual rows, where each row is simply a list of columns.</p>
<p>When the CSV begins with a header line defining the column names, and the <code class="docutils literal notranslate"><span class="pre">header</span></code> option is <code class="docutils literal notranslate"><span class="pre">true</span></code>, each row is returned as a map instead:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="s1">&#39;alpha,beta,gamma\n10,20,30\n70,80,90&#39;</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">splitCsv</span><span class="o">(</span><span class="w"> </span><span class="nl">header:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">row</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s2">&quot;${row.alpha} - ${row.beta} - ${row.gamma}&quot;</span><span class="w"> </span><span class="o">}</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">10 - 20 - 30</span>
<span class="go">70 - 80 - 90</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">header</span></code> option can also just be a list of columns:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="s1">&#39;alpha,beta,gamma\n10,20,30\n70,80,90&#39;</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">splitCsv</span><span class="o">(</span><span class="w"> </span><span class="nl">header:</span><span class="w"> </span><span class="o">[</span><span class="s1">&#39;col1&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;col2&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;col3&#39;</span><span class="o">],</span><span class="w"> </span><span class="nl">skip:</span><span class="w"> </span><span class="mi">1</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">row</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s2">&quot;${row.col1} - ${row.col2} - ${row.col3}&quot;</span><span class="w"> </span><span class="o">}</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">10 - 20 - 30</span>
<span class="go">70 - 80 - 90</span>
</pre></div>
</div>
<p>Available options:</p>
<dl class="simple myst">
<dt><code class="docutils literal notranslate"><span class="pre">by</span></code></dt><dd><p>When specified, group rows into <em>chunks</em> with the given size (default: none).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">charset</span></code></dt><dd><p>Parse the content with the specified charset, e.g. <code class="docutils literal notranslate"><span class="pre">UTF-8</span></code>. See the list of <a class="reference external" href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/nio/charset/StandardCharsets.html">standard charsets</a> for available options.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">decompress</span></code></dt><dd><p>When <code class="docutils literal notranslate"><span class="pre">true</span></code>, decompress the content using the GZIP format before processing it (default: <code class="docutils literal notranslate"><span class="pre">false</span></code>). Files with the <code class="docutils literal notranslate"><span class="pre">.gz</span></code> extension are decompressed automatically.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">elem</span></code></dt><dd><p>The index of the element to split when the source items are lists or tuples (default: first file object or first element).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">header</span></code></dt><dd><p>When <code class="docutils literal notranslate"><span class="pre">true</span></code>, the first line is used as the columns names (default: <code class="docutils literal notranslate"><span class="pre">false</span></code>). Can also be a list of columns names.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">limit</span></code></dt><dd><p>Limits the number of records to retrieve for each source item (default: no limit).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">quote</span></code></dt><dd><p>The character used to quote values (default: <code class="docutils literal notranslate"><span class="pre">''</span></code> or <code class="docutils literal notranslate"><span class="pre">&quot;&quot;</span></code>).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">sep</span></code></dt><dd><p>The character used to separate values (default: <code class="docutils literal notranslate"><span class="pre">,</span></code>)</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">skip</span></code></dt><dd><p>Number of lines to ignore from the beginning when parsing the CSV text (default: <code class="docutils literal notranslate"><span class="pre">0</span></code>).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">strip</span></code></dt><dd><p>When <code class="docutils literal notranslate"><span class="pre">true</span></code>, remove leading and trailing blanks from values (default: <code class="docutils literal notranslate"><span class="pre">false</span></code>).</p>
</dd>
</dl>
</section>
<section id="splitfasta">
<span id="operator-splitfasta"></span><h2>splitFasta<a class="headerlink" href="#splitfasta" title="Permalink to this heading"></a></h2>
<p><em>Returns: queue channel</em></p>
<p>The <code class="docutils literal notranslate"><span class="pre">splitFasta</span></code> operator splits <a class="reference external" href="http://en.wikipedia.org/wiki/FASTA_format">FASTA-formatted</a> text from a source channel into individual sequences.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">by</span></code> option can be used to group sequences into chunks of a given size. The following example shows how to read a FASTA file and split it into chunks of 10 sequences each:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span>
<span class="w">     </span><span class="o">.</span><span class="na">fromPath</span><span class="o">(</span><span class="s1">&#39;misc/sample.fa&#39;</span><span class="o">)</span>
<span class="w">     </span><span class="o">.</span><span class="na">splitFasta</span><span class="o">(</span><span class="w"> </span><span class="nl">by:</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="o">)</span>
<span class="w">     </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Chunks are stored in memory by default. When splitting large files, specify <code class="docutils literal notranslate"><span class="pre">file:</span> <span class="pre">true</span></code> to save the chunks into files in order to avoid running out of memory. See the list of options below for details.</p>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">record</span></code> option can be used to split FASTA content into <em>records</em> instead of text chunks. Each record is a map that allows you to access the FASTA sequence data with ease. For example:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span>
<span class="w">     </span><span class="o">.</span><span class="na">fromPath</span><span class="o">(</span><span class="s1">&#39;misc/sample.fa&#39;</span><span class="o">)</span>
<span class="w">     </span><span class="o">.</span><span class="na">splitFasta</span><span class="o">(</span><span class="w"> </span><span class="nl">record:</span><span class="w"> </span><span class="o">[</span><span class="nl">id:</span><span class="w"> </span><span class="kc">true</span><span class="o">,</span><span class="w"> </span><span class="nl">seqString:</span><span class="w"> </span><span class="kc">true</span><span class="o">]</span><span class="w"> </span><span class="o">)</span>
<span class="w">     </span><span class="o">.</span><span class="na">filter</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">record</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">record</span><span class="o">.</span><span class="na">id</span><span class="w"> </span><span class="o">=~</span><span class="w"> </span><span class="s">/^ENST0.*/</span><span class="w"> </span><span class="o">}</span>
<span class="w">     </span><span class="o">.</span><span class="na">view</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">record</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">record</span><span class="o">.</span><span class="na">seqString</span><span class="w"> </span><span class="o">}</span>
</pre></div>
</div>
<p>The above example loads the <code class="docutils literal notranslate"><span class="pre">misc/sample.fa</span></code> file, splits it into records containing the <code class="docutils literal notranslate"><span class="pre">id</span></code> and <code class="docutils literal notranslate"><span class="pre">seqString</span></code> fields (i.e. the sequence id and the sequence data), filters records by their ID, and finally prints the sequence string of each record.</p>
<p>Available options:</p>
<dl class="simple myst">
<dt><code class="docutils literal notranslate"><span class="pre">by</span></code></dt><dd><p>Defines the number of sequences in each chunk (default: <code class="docutils literal notranslate"><span class="pre">1</span></code>).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">charset</span></code></dt><dd><p>Parse the content with the specified charset, e.g. <code class="docutils literal notranslate"><span class="pre">UTF-8</span></code>. See the list of <a class="reference external" href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/nio/charset/StandardCharsets.html">standard charsets</a> for available options.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">compress</span></code></dt><dd><p>When <code class="docutils literal notranslate"><span class="pre">true</span></code>, resulting file chunks are GZIP compressed (default: <code class="docutils literal notranslate"><span class="pre">false</span></code>). The <code class="docutils literal notranslate"><span class="pre">.gz</span></code> suffix is automatically added to chunk file names.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">decompress</span></code></dt><dd><p>When <code class="docutils literal notranslate"><span class="pre">true</span></code>, decompress the content using the GZIP format before processing it (default: <code class="docutils literal notranslate"><span class="pre">false</span></code>). Files with the <code class="docutils literal notranslate"><span class="pre">.gz</span></code> extension are decompressed automatically.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">elem</span></code></dt><dd><p>The index of the element to split when the source items are lists or tuples (default: first file object or first element).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">file</span></code></dt><dd><p>When <code class="docutils literal notranslate"><span class="pre">true</span></code>, saves each split to a file. Use a string instead of <code class="docutils literal notranslate"><span class="pre">true</span></code> value to create split files with a specific name (split index number is automatically added). Finally, set this attribute to an existing directory, in order to save the split files into the specified directory.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">limit</span></code></dt><dd><p>Limits the number of sequences to retrieve for each source item (default: no limit).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">record</span></code></dt><dd><p>Parse each entry in the FASTA file into a record. The following fields are available:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">id</span></code>: The FASTA sequence identifier, i.e. the word following the <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> symbol up to the first blank or newline character</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">header</span></code>: The first line in a FASTA sequence without the <code class="docutils literal notranslate"><span class="pre">&gt;</span></code> character</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">desc</span></code>: The text in the FASTA header following the ID value</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">text</span></code>: The complete FASTA sequence including the header</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">seqString</span></code>: The sequence data as a single-line string, i.e. containing no newline characters</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">sequence</span></code>: The sequence data as a multi-line string, i.e. always ending with a newline character</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">width</span></code>: Define the length of a single line when the <code class="docutils literal notranslate"><span class="pre">sequence</span></code> field is used, after which the sequence data continues on a new line.</p></li>
</ul>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size</span></code></dt><dd><p>Defines the size of the expected chunks as a memory unit, e.g. <code class="docutils literal notranslate"><span class="pre">1.MB</span></code>.</p>
</dd>
</dl>
<p>See also: <a class="reference internal" href="#countfasta"><span class="std std-doc">countFasta</span></a></p>
</section>
<section id="splitfastq">
<span id="operator-splitfastq"></span><h2>splitFastq<a class="headerlink" href="#splitfastq" title="Permalink to this heading"></a></h2>
<p><em>Returns: queue channel</em></p>
<p>The <code class="docutils literal notranslate"><span class="pre">splitFasta</span></code> operator splits <a class="reference external" href="http://en.wikipedia.org/wiki/FASTQ_format">FASTQ formatted</a> text from a source channel into individual sequences.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">by</span></code> option can be used to group sequences into chunks of a given size. The following example shows how to read a FASTQ file and split it into chunks of 10 sequences each:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span>
<span class="w">    </span><span class="o">.</span><span class="na">fromPath</span><span class="o">(</span><span class="s1">&#39;misc/sample.fastq&#39;</span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">splitFastq</span><span class="o">(</span><span class="w"> </span><span class="nl">by:</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Chunks are stored in memory by default. When splitting large files, specify <code class="docutils literal notranslate"><span class="pre">file:</span> <span class="pre">true</span></code> to save the chunks into files in order to avoid running out of memory. See the list of options below for details.</p>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">record</span></code> option can be used to split FASTQ content into <em>records</em> instead of text chunks. Each record is a map that allows you to access the FASTQ sequence data with ease. For example:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span>
<span class="w">    </span><span class="o">.</span><span class="na">fromPath</span><span class="o">(</span><span class="s1">&#39;misc/sample.fastq&#39;</span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">splitFastq</span><span class="o">(</span><span class="w"> </span><span class="nl">record:</span><span class="w"> </span><span class="kc">true</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">record</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">record</span><span class="o">.</span><span class="na">readHeader</span><span class="w"> </span><span class="o">}</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">pe</span></code> option can be used to split paired-end FASTQ files. The source channel must emit tuples containing the file pairs. For example:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span>
<span class="w">    </span><span class="o">.</span><span class="na">fromFilePairs</span><span class="o">(</span><span class="s1">&#39;/my/data/SRR*_{1,2}.fastq&#39;</span><span class="o">,</span><span class="w"> </span><span class="nl">flat:</span><span class="w"> </span><span class="kc">true</span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">splitFastq</span><span class="o">(</span><span class="nl">by:</span><span class="w"> </span><span class="mi">100</span><span class="n">_000</span><span class="o">,</span><span class="w"> </span><span class="nl">pe:</span><span class="w"> </span><span class="kc">true</span><span class="o">,</span><span class="w"> </span><span class="nl">file:</span><span class="w"> </span><span class="kc">true</span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">Channel.fromFilePairs()</span></code> requires the <code class="docutils literal notranslate"><span class="pre">flat:</span> <span class="pre">true</span></code> option in order to emit the file pairs as separate elements in the produced tuples.</p>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This operator assumes that the order of the paired-end reads correspond with each other and that both files contain the same number of reads.</p>
</div>
<p>Available options:</p>
<dl class="simple myst">
<dt><code class="docutils literal notranslate"><span class="pre">by</span></code></dt><dd><p>Defines the number of sequences in each chunk (default: <code class="docutils literal notranslate"><span class="pre">1</span></code>).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">charset</span></code></dt><dd><p>Parse the content with the specified charset, e.g. <code class="docutils literal notranslate"><span class="pre">UTF-8</span></code>. See the list of <a class="reference external" href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/nio/charset/StandardCharsets.html">standard charsets</a> for available options.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">compress</span></code></dt><dd><p>When <code class="docutils literal notranslate"><span class="pre">true</span></code>, resulting file chunks are GZIP compressed (default: <code class="docutils literal notranslate"><span class="pre">false</span></code>). The <code class="docutils literal notranslate"><span class="pre">.gz</span></code> suffix is automatically added to chunk file names.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">decompress</span></code></dt><dd><p>When <code class="docutils literal notranslate"><span class="pre">true</span></code>, decompress the content using the GZIP format before processing it (default: <code class="docutils literal notranslate"><span class="pre">false</span></code>). Files with the <code class="docutils literal notranslate"><span class="pre">.gz</span></code> extension are decompressed automatically.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">elem</span></code></dt><dd><p>The index of the element to split when the source items are lists or tuples (default: first file object or first element).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">file</span></code></dt><dd><p>When <code class="docutils literal notranslate"><span class="pre">true</span></code>, saves each split to a file. Use a string instead of <code class="docutils literal notranslate"><span class="pre">true</span></code> value to create split files with a specific name (split index number is automatically added). Finally, set this attribute to an existing directory, in order to save the split files into the specified directory.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">limit</span></code></dt><dd><p>Limits the number of sequences to retrieve for each source item (default: no limit).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">pe</span></code></dt><dd><p>When <code class="docutils literal notranslate"><span class="pre">true</span></code>, splits paired-end read files. Items emitted by the source channel must be tuples with the file pairs.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">record</span></code></dt><dd><p>Parse each entry in the FASTQ file into a record. The following fields are available:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">readHeader</span></code>: Sequence header (without the <code class="docutils literal notranslate"><span class="pre">&#64;</span></code> prefix)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">readString</span></code>: The raw sequence data</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">qualityHeader</span></code>: Base quality header (it may be empty)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">qualityString</span></code>: Quality values for the sequence</p></li>
</ul>
</dd>
</dl>
<p>See also: <a class="reference internal" href="#countfastq"><span class="std std-doc">countFastq</span></a></p>
</section>
<section id="splitjson">
<span id="operator-splitjson"></span><h2>splitJson<a class="headerlink" href="#splitjson" title="Permalink to this heading"></a></h2>
<p><em>Returns: queue channel</em></p>
<p>The <code class="docutils literal notranslate"><span class="pre">splitJson</span></code> operator splits <a class="reference external" href="https://en.wikipedia.org/wiki/JSON">JSON formatted</a> text from a source channel into individual records.</p>
<p>If the source item is a JSON array, each element of the array will be emitted:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="c1">// Example with a JSON array</span>
<span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s1">&#39;[1, null, [&quot;A&quot;, {}], true]&#39;</span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">splitJson</span><span class="o">()</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="o">{</span><span class="s2">&quot;Item: ${it}&quot;</span><span class="o">}</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Item: 1</span>
<span class="go">Item: null</span>
<span class="go">Item: [A, [:]]</span>
<span class="go">Item: true</span>
</pre></div>
</div>
<p>If the source item is a JSON object, each key-value pair will be emitted as a map with the properties <code class="docutils literal notranslate"><span class="pre">key</span></code>  and <code class="docutils literal notranslate"><span class="pre">value</span></code>:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="c1">// Example with a JSON object</span>
<span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s1">&#39;{&quot;A&quot;: 1, &quot;B&quot;: [1, 2, 3], &quot;C&quot;: {&quot;D&quot;: null}}&#39;</span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">splitJson</span><span class="o">()</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="o">{</span><span class="s2">&quot;Item: ${it}&quot;</span><span class="o">}</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Item: [key:A, value:1]</span>
<span class="go">Item: [key:B, value:[1, 2, 3]]</span>
<span class="go">Item: [key:C, value:[D:null]]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">path</span></code> option can be used to query a section of the JSON document to parse and split:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s1">&#39;{&quot;A&quot;: 1, &quot;B&quot;: [2, 3, {&quot;C&quot;: {&quot;D&quot;: null, &quot;E&quot;: 4, &quot;F&quot;: 5}}]}&#39;</span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">splitJson</span><span class="o">(</span><span class="nl">path:</span><span class="w"> </span><span class="s1">&#39;B[2].C&#39;</span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="o">{</span><span class="s2">&quot;Item: ${it}&quot;</span><span class="o">}</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Item: [key:D, value:null]</span>
<span class="go">Item: [key:E, value:4]</span>
<span class="go">Item: [key:F, value:5]</span>
</pre></div>
</div>
<p>Available options:</p>
<dl class="simple myst">
<dt><code class="docutils literal notranslate"><span class="pre">limit</span></code></dt><dd><p>Limits the number of records to retrieve for each source item (default: no limit).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">path</span></code></dt><dd><p>Defines a query for a section of each source item to parse and split. The expression should be a path similar to <a class="reference external" href="https://goessner.net/articles/JsonPath/">JSONPath</a>. The empty string is the document root (default). An integer in brackets is a zero-based index in a JSON array. A string preceded by a dot <code class="docutils literal notranslate"><span class="pre">.</span></code> is a key in a JSON object.</p>
</dd>
</dl>
<p>See also: <a class="reference internal" href="#countjson"><span class="std std-doc">countJson</span></a></p>
</section>
<section id="splittext">
<span id="operator-splittext"></span><h2>splitText<a class="headerlink" href="#splittext" title="Permalink to this heading"></a></h2>
<p><em>Returns: queue channel</em></p>
<p>The <code class="docutils literal notranslate"><span class="pre">splitText</span></code> operator splits multi-line text content from a source channel into chunks of <em>N</em> lines:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span>
<span class="w">    </span><span class="o">.</span><span class="na">fromPath</span><span class="o">(</span><span class="s1">&#39;/some/path/*.txt&#39;</span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">splitText</span><span class="o">()</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<p>The above example loads a collection of text files, splits the content of each file into individual lines, and prints each line.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">by</span></code> option can be used to emit chunks of <em>N</em> lines:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span>
<span class="w">    </span><span class="o">.</span><span class="na">fromPath</span><span class="o">(</span><span class="s1">&#39;/some/path/*.txt&#39;</span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">splitText</span><span class="o">(</span><span class="w"> </span><span class="nl">by:</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">subscribe</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="n">print</span><span class="w"> </span><span class="n">it</span><span class="o">;</span>
<span class="w">        </span><span class="n">print</span><span class="w"> </span><span class="s2">&quot;--- end of the chunk ---\n&quot;</span>
<span class="w">    </span><span class="o">}</span>
</pre></div>
</div>
<p>An optional <a class="reference internal" href="script.html#script-closure"><span class="std std-ref">closure</span></a> can be used to transform each text chunk produced by the operator. The following example shows how to split text files into chunks of 10 lines and transform them to uppercase letters:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span>
<span class="w">    </span><span class="o">.</span><span class="na">fromPath</span><span class="o">(</span><span class="s1">&#39;/some/path/*.txt&#39;</span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">splitText</span><span class="o">(</span><span class="w"> </span><span class="nl">by:</span><span class="w"> </span><span class="mi">10</span><span class="w"> </span><span class="o">)</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">it</span><span class="o">.</span><span class="na">toUpperCase</span><span class="o">()</span><span class="w"> </span><span class="o">}</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Text chunks returned by the <code class="docutils literal notranslate"><span class="pre">splitText</span></code> operator are always terminated by a <code class="docutils literal notranslate"><span class="pre">\n</span></code> newline character.</p>
</div>
<p>Available options:</p>
<dl class="simple myst">
<dt><code class="docutils literal notranslate"><span class="pre">by</span></code></dt><dd><p>Defines the number of lines in each <code class="docutils literal notranslate"><span class="pre">chunk</span></code> (default: <code class="docutils literal notranslate"><span class="pre">1</span></code>).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">charset</span></code></dt><dd><p>Parse the content with the specified charset, e.g. <code class="docutils literal notranslate"><span class="pre">UTF-8</span></code>. See the list of <a class="reference external" href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/nio/charset/StandardCharsets.html">standard charsets</a> for available options.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">compress</span></code></dt><dd><p>When <code class="docutils literal notranslate"><span class="pre">true</span></code>, resulting file chunks are GZIP compressed (default: <code class="docutils literal notranslate"><span class="pre">false</span></code>). The <code class="docutils literal notranslate"><span class="pre">.gz</span></code> suffix is automatically added to chunk file names.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">decompress</span></code></dt><dd><p>When <code class="docutils literal notranslate"><span class="pre">true</span></code>, decompresses the content using the GZIP format before processing it (default: <code class="docutils literal notranslate"><span class="pre">false</span></code>). Files with the <code class="docutils literal notranslate"><span class="pre">.gz</span></code> extension are decompressed automatically.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">elem</span></code></dt><dd><p>The index of the element to split when the source items are lists or tuples (default: first file object or first element).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">file</span></code></dt><dd><p>When <code class="docutils literal notranslate"><span class="pre">true</span></code>, saves each split to a file. Use a string instead of <code class="docutils literal notranslate"><span class="pre">true</span></code> value to create split files with a specific name (split index number is automatically added). Finally, set this attribute to an existing directory, in order to save the split files into the specified directory.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">keepHeader</span></code></dt><dd><p>Parses the first line as header and prepends it to each emitted chunk (default: <code class="docutils literal notranslate"><span class="pre">false</span></code>).</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">limit</span></code></dt><dd><p>Limits the number of lines to retrieve for each source item (default: no limit).</p>
</dd>
</dl>
<p>See also: <a class="reference internal" href="#countlines"><span class="std std-doc">countLines</span></a></p>
</section>
<section id="subscribe">
<span id="operator-subscribe"></span><h2>subscribe<a class="headerlink" href="#subscribe" title="Permalink to this heading"></a></h2>
<p><em>Returns: nothing</em></p>
<p>The <code class="docutils literal notranslate"><span class="pre">subscribe</span></code> operator invokes a custom function for each item from a source channel:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="c1">// define a channel emitting three values</span>
<span class="n">source</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="s1">&#39;alpha&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;beta&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;delta&#39;</span><span class="w"> </span><span class="o">)</span>

<span class="c1">// subscribe to the channel with a function that prints each value</span>
<span class="n">source</span><span class="o">.</span><span class="na">subscribe</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">println</span><span class="w"> </span><span class="s2">&quot;Got: $it&quot;</span><span class="w"> </span><span class="o">}</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Got: alpha</span>
<span class="go">Got: beta</span>
<span class="go">Got: delta</span>
</pre></div>
</div>
<p>The closure parameter can be defined explicitly if needed, using a name other than <code class="docutils literal notranslate"><span class="pre">it</span></code> and, optionally, the expected type:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span>
<span class="w">    </span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="s1">&#39;alpha&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;beta&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;lambda&#39;</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">subscribe</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">String</span><span class="w"> </span><span class="n">str</span><span class="w"> </span><span class="o">-&gt;</span>
<span class="w">        </span><span class="n">println</span><span class="w"> </span><span class="s2">&quot;Got: ${str}; len: ${str.size()}&quot;</span>
<span class="w">    </span><span class="o">}</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Got: alpha; len: 5</span>
<span class="go">Got: beta; len: 4</span>
<span class="go">Got: lambda; len: 6</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">subscribe</span></code> operator supports multiple types of event handlers:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">subscribe</span><span class="w"> </span><span class="nl">onNext:</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">println</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="o">},</span><span class="w"> </span><span class="nl">onComplete:</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">println</span><span class="w"> </span><span class="s1">&#39;Done&#39;</span><span class="w"> </span><span class="o">}</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">1</span>
<span class="go">2</span>
<span class="go">3</span>
<span class="go">Done</span>
</pre></div>
</div>
<p>Available options:</p>
<dl class="simple myst">
<dt><code class="docutils literal notranslate"><span class="pre">onNext</span></code></dt><dd><p>Closure that is invoked when an item is emitted. Equivalent to providing a closure as the first argument.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">onComplete</span></code></dt><dd><p>Closure that is invoked after the last item is emitted by the channel.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">onError</span></code></dt><dd><p>Closure that is invoked when an exception is raised while handling the <code class="docutils literal notranslate"><span class="pre">onNext</span></code> event. It will not make further calls to <code class="docutils literal notranslate"><span class="pre">onNext</span></code> or <code class="docutils literal notranslate"><span class="pre">onComplete</span></code>. The <code class="docutils literal notranslate"><span class="pre">onError</span></code> method takes as its parameter the <code class="docutils literal notranslate"><span class="pre">Throwable</span></code> that caused the error.</p>
</dd>
</dl>
</section>
<section id="sum">
<span id="operator-sum"></span><h2>sum<a class="headerlink" href="#sum" title="Permalink to this heading"></a></h2>
<p><em>Returns: value channel</em></p>
<p>The <code class="docutils literal notranslate"><span class="pre">sum</span></code> operator emits the sum of all items in a source channel:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="mi">8</span><span class="o">,</span><span class="w"> </span><span class="mi">6</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">sum</span><span class="o">()</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="s2">&quot;The sum is $it&quot;</span><span class="w"> </span><span class="o">}</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">The sum is 21</span>
</pre></div>
</div>
<p>An optional <a class="reference internal" href="script.html#script-closure"><span class="std std-ref">closure</span></a> can be used to transform each item before it is added to the sum:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="mi">4</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">7</span><span class="o">,</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">sum</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="o">}</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="s2">&quot;Square: $it&quot;</span><span class="w"> </span><span class="o">}</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Square: 91</span>
</pre></div>
</div>
</section>
<section id="take">
<h2>take<a class="headerlink" href="#take" title="Permalink to this heading"></a></h2>
<p><em>Returns: queue channel</em></p>
<p>The <code class="docutils literal notranslate"><span class="pre">take</span></code> operator takes the first <em>N</em> items from a source channel:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="mi">1</span><span class="o">..</span><span class="mi">10</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">take</span><span class="o">(</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">1</span>
<span class="go">2</span>
<span class="go">3</span>
</pre></div>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>Specifying a size of <code class="docutils literal notranslate"><span class="pre">-1</span></code> causes the operator to take all values.</p>
</div>
<p>See also: <a class="reference internal" href="#until"><span class="std std-doc">until</span></a></p>
</section>
<section id="tap">
<h2>tap<a class="headerlink" href="#tap" title="Permalink to this heading"></a></h2>
<p><em>Returns: queue channel</em></p>
<p>The <code class="docutils literal notranslate"><span class="pre">tap</span></code> operator assigns a source channel to a variable, and emits the source channel. It is a useful way to extract intermediate output channels from a chain of operators. For example:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="s1">&#39;a&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;b&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;c&#39;</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">tap</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">log1</span><span class="w"> </span><span class="o">}</span>
<span class="w">    </span><span class="o">.</span><span class="na">map</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="o">*</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">}</span>
<span class="w">    </span><span class="o">.</span><span class="na">tap</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">log2</span><span class="w"> </span><span class="o">}</span>
<span class="w">    </span><span class="o">.</span><span class="na">map</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">it</span><span class="o">.</span><span class="na">toUpperCase</span><span class="o">()</span><span class="w"> </span><span class="o">}</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="s2">&quot;Result: $it&quot;</span><span class="w"> </span><span class="o">}</span>

<span class="n">log1</span><span class="o">.</span><span class="na">view</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="s2">&quot;Log 1: $it&quot;</span><span class="w"> </span><span class="o">}</span>
<span class="n">log2</span><span class="o">.</span><span class="na">view</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="s2">&quot;Log 2: $it&quot;</span><span class="w"> </span><span class="o">}</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">Result: AA</span>
<span class="go">Result: BB</span>
<span class="go">Result: CC</span>
<span class="go">Log 1: a</span>
<span class="go">Log 1: b</span>
<span class="go">Log 1: c</span>
<span class="go">Log 2: aa</span>
<span class="go">Log 2: bb</span>
<span class="go">Log 2: cc</span>
</pre></div>
</div>
<p>See also: <a class="reference internal" href="#set"><span class="std std-doc">set</span></a></p>
</section>
<section id="tointeger">
<h2>toInteger<a class="headerlink" href="#tointeger" title="Permalink to this heading"></a></h2>
<p><em>Returns: queue channel</em></p>
<p>The <code class="docutils literal notranslate"><span class="pre">toInteger</span></code> operator converts string values from a source channel to integer values:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="s1">&#39;1&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;7&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;12&#39;</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">toInteger</span><span class="o">()</span>
<span class="w">    </span><span class="o">.</span><span class="na">sum</span><span class="o">()</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">20</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">toInteger</span></code> is equivalent to:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">map</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="k">as</span><span class="w"> </span><span class="n">Integer</span><span class="w"> </span><span class="o">}</span>
</pre></div>
</div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>You can also use <code class="docutils literal notranslate"><span class="pre">toLong</span></code>, <code class="docutils literal notranslate"><span class="pre">toFloat</span></code>, and <code class="docutils literal notranslate"><span class="pre">toDouble</span></code> to convert to other numerical types.</p>
</div>
</section>
<section id="tolist">
<h2>toList<a class="headerlink" href="#tolist" title="Permalink to this heading"></a></h2>
<p><em>Returns: value channel</em></p>
<p>The <code class="docutils literal notranslate"><span class="pre">toList</span></code> operator collects all the items from a source channel into a list and emits the list as a single item:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">toList</span><span class="o">()</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[1, 2, 3, 4]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>There are two main differences between <code class="docutils literal notranslate"><span class="pre">toList</span></code> and <code class="docutils literal notranslate"><span class="pre">collect</span></code>:</p>
<ul class="simple">
<li><p>When there is no input, <code class="docutils literal notranslate"><span class="pre">toList</span></code> emits an empty list whereas <code class="docutils literal notranslate"><span class="pre">collect</span></code> emits nothing.</p></li>
<li><p>By default, <code class="docutils literal notranslate"><span class="pre">collect</span></code> flattens list items by one level.</p></li>
</ul>
<p>In other words, <code class="docutils literal notranslate"><span class="pre">toList</span></code> is equivalent to:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">collect</span><span class="o">(</span><span class="nl">flat:</span><span class="w"> </span><span class="kc">false</span><span class="o">).</span><span class="na">ifEmpty</span><span class="o">([])</span>
</pre></div>
</div>
</div>
<p>See also: <a class="reference internal" href="#collect"><span class="std std-doc">collect</span></a></p>
</section>
<section id="tosortedlist">
<h2>toSortedList<a class="headerlink" href="#tosortedlist" title="Permalink to this heading"></a></h2>
<p><em>Returns: value channel</em></p>
<p>The <code class="docutils literal notranslate"><span class="pre">toSortedList</span></code> operator collects all the items from a source channel into a sorted list and emits the list as a single item:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">toSortedList</span><span class="o">()</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[1, 2, 3, 4]</span>
</pre></div>
</div>
<p>An optional closure can be used to control how items are compared when sorting. For example, to sort tuples by their second element in descending order:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="o">[</span><span class="s1">&#39;homer&#39;</span><span class="o">,</span><span class="w"> </span><span class="mi">5</span><span class="o">],</span><span class="w"> </span><span class="o">[</span><span class="s1">&#39;bart&#39;</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">],</span><span class="w"> </span><span class="o">[</span><span class="s1">&#39;lisa&#39;</span><span class="o">,</span><span class="w"> </span><span class="mi">10</span><span class="o">],</span><span class="w"> </span><span class="o">[</span><span class="s1">&#39;marge&#39;</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="o">],</span><span class="w"> </span><span class="o">[</span><span class="s1">&#39;maggie&#39;</span><span class="o">,</span><span class="w"> </span><span class="mi">7</span><span class="o">]</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">toSortedList</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">a</span><span class="o">,</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="n">b</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span><span class="w"> </span><span class="o">&lt;=&gt;</span><span class="w"> </span><span class="n">a</span><span class="o">[</span><span class="mi">1</span><span class="o">]</span><span class="w"> </span><span class="o">}</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[[lisa, 10], [maggie, 7], [homer, 5], [marge, 3], [bart, 2]]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p><code class="docutils literal notranslate"><span class="pre">toSortedList</span></code> is equivalent to:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">collect</span><span class="o">(</span><span class="nl">flat:</span><span class="w"> </span><span class="kc">false</span><span class="o">,</span><span class="w"> </span><span class="nl">sort:</span><span class="w"> </span><span class="kc">true</span><span class="o">).</span><span class="na">ifEmpty</span><span class="o">([])</span>
</pre></div>
</div>
</div>
<p>See also: <a class="reference internal" href="#collect"><span class="std std-doc">collect</span></a></p>
</section>
<section id="transpose">
<h2>transpose<a class="headerlink" href="#transpose" title="Permalink to this heading"></a></h2>
<p><em>Returns: queue channel</em></p>
<p>The <code class="docutils literal notranslate"><span class="pre">transpose</span></code> operator “transposes” each tuple from a source channel by flattening any nested list in each tuple, emitting each nested item separately.</p>
<p>To be more precise, the operator transforms a sequence of tuples like <em>(K, list(V), list(W), ..)</em> into a sequence of tuples like <em>(K, V, W, ..)</em>.</p>
<p>For example:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span>
<span class="w">        </span><span class="o">[</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="o">[</span><span class="s1">&#39;A&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;B&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;C&#39;</span><span class="o">]],</span>
<span class="w">        </span><span class="o">[</span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="o">[</span><span class="s1">&#39;C&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;A&#39;</span><span class="o">]],</span>
<span class="w">        </span><span class="o">[</span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="o">[</span><span class="s1">&#39;B&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;D&#39;</span><span class="o">]]</span>
<span class="w">    </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">transpose</span><span class="o">()</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[1, A]</span>
<span class="go">[1, B]</span>
<span class="go">[1, C]</span>
<span class="go">[2, C]</span>
<span class="go">[2, A]</span>
<span class="go">[3, B]</span>
<span class="go">[3, D]</span>
</pre></div>
</div>
<p>If each source item has more than two elements, these will be flattened by the first element in the item, and a new item will be emitted only when it is complete:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span>
<span class="w">        </span><span class="o">[</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="o">[</span><span class="mi">1</span><span class="o">],</span><span class="w"> </span><span class="o">[</span><span class="s1">&#39;A&#39;</span><span class="o">]],</span>
<span class="w">        </span><span class="o">[</span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="o">[</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">],</span><span class="w"> </span><span class="o">[</span><span class="s1">&#39;B&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;C&#39;</span><span class="o">]],</span>
<span class="w">        </span><span class="o">[</span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="o">[</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="o">],</span><span class="w"> </span><span class="o">[</span><span class="s1">&#39;D&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;E&#39;</span><span class="o">]]</span>
<span class="w">    </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">transpose</span><span class="o">()</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[1, 1, A]</span>
<span class="go">[2, 1, B]</span>
<span class="go">[2, 2, C]</span>
<span class="go">[3, 1, D]</span>
<span class="go">[3, 2, E]</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">remainder</span></code> option can be used to emit any incomplete items:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span>
<span class="w">        </span><span class="o">[</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="o">[</span><span class="mi">1</span><span class="o">],</span><span class="w"> </span><span class="o">[</span><span class="s1">&#39;A&#39;</span><span class="o">]],</span>
<span class="w">        </span><span class="o">[</span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="o">[</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">],</span><span class="w"> </span><span class="o">[</span><span class="s1">&#39;B&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;C&#39;</span><span class="o">]],</span>
<span class="w">        </span><span class="o">[</span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="o">[</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="o">],</span><span class="w"> </span><span class="o">[</span><span class="s1">&#39;D&#39;</span><span class="o">,</span><span class="w"> </span><span class="s1">&#39;E&#39;</span><span class="o">]]</span>
<span class="w">    </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">transpose</span><span class="o">(</span><span class="nl">remainder:</span><span class="w"> </span><span class="kc">true</span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">[1, 1, A]</span>
<span class="go">[2, 1, B]</span>
<span class="go">[2, 2, C]</span>
<span class="go">[3, 1, D]</span>
<span class="go">[3, 2, E]</span>
<span class="go">[3, 3, null]</span>
</pre></div>
</div>
<p>Available options:</p>
<dl class="simple myst">
<dt><code class="docutils literal notranslate"><span class="pre">by</span></code></dt><dd><p>The zero-based index of the element to be transposed. Can also be a list of indices, e.g. <code class="docutils literal notranslate"><span class="pre">by:</span> <span class="pre">[0,2]</span></code>. By default, every list element is transposed.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">remainder</span></code></dt><dd><p>When <code class="docutils literal notranslate"><span class="pre">true</span></code>, incomplete tuples are emitted with <code class="docutils literal notranslate"><span class="pre">null</span></code> values for missing elements, otherwise they are discarded (default: <code class="docutils literal notranslate"><span class="pre">false</span></code>).</p>
</dd>
</dl>
<p>See also: <a class="reference internal" href="#grouptuple"><span class="std std-doc">groupTuple</span></a></p>
</section>
<section id="unique">
<h2>unique<a class="headerlink" href="#unique" title="Permalink to this heading"></a></h2>
<p><em>Returns: queue channel</em></p>
<p>The <code class="docutils literal notranslate"><span class="pre">unique</span></code> operator emits the unique items from a source channel:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">unique</span><span class="o">()</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">1</span>
<span class="go">2</span>
<span class="go">3</span>
</pre></div>
</div>
<p>An optional <a class="reference internal" href="script.html#script-closure"><span class="std std-ref">closure</span></a> can be used to transform each item before it is evaluated for uniqueness:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">4</span><span class="o">,</span><span class="w"> </span><span class="mi">6</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">unique</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="mi">2</span><span class="w"> </span><span class="o">}</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">1</span>
<span class="go">2</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The difference between <code class="docutils literal notranslate"><span class="pre">unique</span></code> and <code class="docutils literal notranslate"><span class="pre">distinct</span></code> is that <code class="docutils literal notranslate"><span class="pre">unique</span></code> removes <em>all</em> duplicate values, whereas <code class="docutils literal notranslate"><span class="pre">distinct</span></code> removes only <em>consecutive</em> duplicate values. As a result, <code class="docutils literal notranslate"><span class="pre">unique</span></code> must process the entire source channel before it can emit anything, whereas <code class="docutils literal notranslate"><span class="pre">distinct</span></code> can emit each value immediately.</p>
</div>
<p>See also: <a class="reference internal" href="#distinct"><span class="std std-doc">distinct</span></a></p>
</section>
<section id="until">
<h2>until<a class="headerlink" href="#until" title="Permalink to this heading"></a></h2>
<p><em>Returns: queue channel</em></p>
<p>The <code class="docutils literal notranslate"><span class="pre">until</span></code> operator emits each item from a source channel until a stopping condition is satisfied:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="w"> </span><span class="mi">3</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">5</span><span class="o">,</span><span class="w"> </span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">until</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">5</span><span class="w"> </span><span class="o">}</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">3</span>
<span class="go">2</span>
<span class="go">1</span>
</pre></div>
</div>
<p>See also: <a class="reference internal" href="#take"><span class="std std-doc">take</span></a></p>
</section>
<section id="view">
<span id="operator-view"></span><h2>view<a class="headerlink" href="#view" title="Permalink to this heading"></a></h2>
<p><em>Returns: queue channel</em></p>
<p>The <code class="docutils literal notranslate"><span class="pre">view</span></code> operator prints each item from a source channel to standard output:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="o">).</span><span class="na">view</span><span class="o">()</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">1</span>
<span class="go">2</span>
<span class="go">3</span>
</pre></div>
</div>
<p>An optional closure can be used to transform each item before it is printed:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">Channel</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="mi">1</span><span class="o">,</span><span class="w"> </span><span class="mi">2</span><span class="o">,</span><span class="w"> </span><span class="mi">3</span><span class="o">)</span>
<span class="w">    </span><span class="o">.</span><span class="na">map</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">it</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="o">[</span><span class="n">it</span><span class="o">,</span><span class="w"> </span><span class="n">it</span><span class="o">*</span><span class="n">it</span><span class="o">]</span><span class="w"> </span><span class="o">}</span>
<span class="w">    </span><span class="o">.</span><span class="na">view</span><span class="w"> </span><span class="o">{</span><span class="w"> </span><span class="n">num</span><span class="o">,</span><span class="w"> </span><span class="n">sqr</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="s2">&quot;The square of $num is $sqr&quot;</span><span class="w"> </span><span class="o">}</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">The square of 1 is 1</span>
<span class="go">The square of 2 is 4</span>
<span class="go">The square of 3 is 9</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">view</span></code> operator also emits every item that it receives, allowing it to be chained with other operators.</p>
<p>Available options:</p>
<dl class="simple myst">
<dt><code class="docutils literal notranslate"><span class="pre">newLine</span></code></dt><dd><p>Print each item to a separate line (default: <code class="docutils literal notranslate"><span class="pre">true</span></code>).</p>
</dd>
</dl>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="channel.html" class="btn btn-neutral float-left" title="Channels" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="workflow.html" class="btn btn-neutral float-right" title="Workflows" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Seqera Labs, S.L.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
     
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TNCXSWG"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->


</body>
</html>