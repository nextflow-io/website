<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Azure Cloud &mdash; Nextflow 23.12.0-edge documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/theme.css" type="text/css" />
    <link rel="shortcut icon" href="_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/jquery.js"></script>
        <script src="_static/underscore.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Fusion file system" href="fusion.html" />
    <link rel="prev" title="AWS S3 storage" href="amazons3.html" />
     
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-TNCXSWG');</script>
    <!-- End Google Tag Manager -->

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="index.html">
            <img src="_static/nextflow-logo.png" class="logo" alt="Logo"/>
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div>
    <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Introduction</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="getstarted.html">Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="basic.html">Basic concepts</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Language</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="script.html">Scripts</a></li>
<li class="toctree-l1"><a class="reference internal" href="process.html">Processes</a></li>
<li class="toctree-l1"><a class="reference internal" href="channel.html">Channels</a></li>
<li class="toctree-l1"><a class="reference internal" href="operator.html">Operators</a></li>
<li class="toctree-l1"><a class="reference internal" href="workflow.html">Workflows</a></li>
<li class="toctree-l1"><a class="reference internal" href="module.html">Modules</a></li>
<li class="toctree-l1"><a class="reference internal" href="config.html">Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="dsl1.html">Migrating from DSL 1</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Execution</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="cli.html">Command line interface (CLI)</a></li>
<li class="toctree-l1"><a class="reference internal" href="executor.html">Executors</a></li>
<li class="toctree-l1"><a class="reference internal" href="cache-and-resume.html">Caching and resuming</a></li>
<li class="toctree-l1"><a class="reference internal" href="tracing.html">Tracing &amp; visualisation</a></li>
<li class="toctree-l1"><a class="reference internal" href="metrics.html">Metrics</a></li>
<li class="toctree-l1"><a class="reference internal" href="sharing.html">Pipeline sharing</a></li>
<li class="toctree-l1"><a class="reference internal" href="metadata.html">Workflow introspection</a></li>
<li class="toctree-l1"><a class="reference internal" href="mail.html">Mail &amp; Notifications</a></li>
<li class="toctree-l1"><a class="reference internal" href="plugins.html">Plugins</a></li>
<li class="toctree-l1"><a class="reference internal" href="secrets.html">Secrets</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Software dependencies</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="container.html">Containers</a></li>
<li class="toctree-l1"><a class="reference internal" href="conda.html">Conda environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="spack.html">Spack environments</a></li>
<li class="toctree-l1"><a class="reference internal" href="wave.html">Wave containers</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Compute &amp; storage platforms</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="aws.html">AWS Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="amazons3.html">AWS S3 storage</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Azure Cloud</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#azure-blob-storage">Azure Blob Storage</a></li>
<li class="toctree-l2"><a class="reference internal" href="#azure-file-shares">Azure File Shares</a></li>
<li class="toctree-l2"><a class="reference internal" href="#azure-batch">Azure Batch</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#get-started">Get started</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pools-configuration">Pools configuration</a></li>
<li class="toctree-l3"><a class="reference internal" href="#named-pools">Named pools</a></li>
<li class="toctree-l3"><a class="reference internal" href="#requirements-on-pre-existing-named-pools">Requirements on pre-existing named pools</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pool-autoscaling">Pool autoscaling</a></li>
<li class="toctree-l3"><a class="reference internal" href="#pool-nodes">Pool nodes</a></li>
<li class="toctree-l3"><a class="reference internal" href="#private-container-registry">Private container registry</a></li>
<li class="toctree-l3"><a class="reference internal" href="#virtual-network">Virtual Network</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#microsoft-entra-formerly-active-directory-authentication">Microsoft Entra (formerly Active Directory Authentication)</a></li>
<li class="toctree-l2"><a class="reference internal" href="#advanced-configuration">Advanced configuration</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="fusion.html">Fusion file system</a></li>
<li class="toctree-l1"><a class="reference internal" href="google.html">Google Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="kubernetes.html">Kubernetes</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Additional integrations</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="flux.html">Flux Framework</a></li>
<li class="toctree-l1"><a class="reference internal" href="ignite.html">Apache Ignite</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Contributing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="developer/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer/packages.html">Packages</a></li>
<li class="toctree-l1"><a class="reference internal" href="developer/plugins.html">Core plugins</a></li>
</ul>

        </div>
    <div class="nav-footer-logo">
        <a href="https://seqera.io/" target="_blank" title="Developed by Seqera Labs">
            Nextflow is developed by:<br>
            <img src="_static/seqera-logo.svg" alt="Seqera Labs">
        </a>
    </div>

      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">Nextflow</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home"></a></li>
      <li class="breadcrumb-item active">Azure Cloud</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/nextflow-io/nextflow/blob/master/docs/azure.md" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="azure-cloud">
<span id="azure-page"></span><h1>Azure Cloud<a class="headerlink" href="#azure-cloud" title="Permalink to this heading"></a></h1>
<div class="versionadded">
<p><span class="versionmodified added">New in version 21.04.0.</span></p>
</div>
<section id="azure-blob-storage">
<span id="azure-blobstorage"></span><h2>Azure Blob Storage<a class="headerlink" href="#azure-blob-storage" title="Permalink to this heading"></a></h2>
<p>Nextflow has built-in support for <a class="reference external" href="https://azure.microsoft.com/en-us/services/storage/blobs/">Azure Blob Storage</a>. Files stored in an Azure blob container can be accessed transparently in your pipeline script like any other file in the local file system.</p>
<p>The Blob storage account name and key need to be provided in the Nextflow configuration file as shown below:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">azure</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="n">storage</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="n">accountName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;&lt;YOUR BLOB ACCOUNT NAME&gt;&quot;</span>
<span class="w">        </span><span class="n">accountKey</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;&lt;YOUR BLOB ACCOUNT KEY&gt;&quot;</span>
<span class="w">    </span><span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Alternatively, the <strong>Shared Access Token</strong> can be specified with the <code class="docutils literal notranslate"><span class="pre">sasToken</span></code> option instead of <code class="docutils literal notranslate"><span class="pre">accountKey</span></code>.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>When creating the Shared Access Token, make sure to allow the resource types <code class="docutils literal notranslate"><span class="pre">Container</span></code> and <code class="docutils literal notranslate"><span class="pre">Object</span></code> and allow the permissions: <code class="docutils literal notranslate"><span class="pre">Read</span></code>, <code class="docutils literal notranslate"><span class="pre">Write</span></code>, <code class="docutils literal notranslate"><span class="pre">Delete</span></code>, <code class="docutils literal notranslate"><span class="pre">List</span></code>, <code class="docutils literal notranslate"><span class="pre">Add</span></code>, <code class="docutils literal notranslate"><span class="pre">Create</span></code>.</p>
</div>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The value of <code class="docutils literal notranslate"><span class="pre">sasToken</span></code> is the token stripped by the character <code class="docutils literal notranslate"><span class="pre">?</span></code> from the beginning of the token.</p>
</div>
<p>Once the Blob Storage credentials are set, you can access the files in the blob container like local files by prepending the file path with <code class="docutils literal notranslate"><span class="pre">az://</span></code> followed by the container name. For example, a blob container named <code class="docutils literal notranslate"><span class="pre">my-data</span></code> with a file named <code class="docutils literal notranslate"><span class="pre">foo.txt</span></code> can be specified in your Nextflow script as <code class="docutils literal notranslate"><span class="pre">az://my-data/foo.txt</span></code>.</p>
</section>
<section id="azure-file-shares">
<h2>Azure File Shares<a class="headerlink" href="#azure-file-shares" title="Permalink to this heading"></a></h2>
<p><em>New in <code class="docutils literal notranslate"><span class="pre">nf-azure</span></code> version <code class="docutils literal notranslate"><span class="pre">0.11.0</span></code></em></p>
<p>Nextflow has built-in support also for <a class="reference external" href="https://azure.microsoft.com/en-us/services/storage/files/">Azure Files</a>. Files available in the serverless Azure File shares can be mounted concurrently on the nodes of a pool executing the pipeline. These files become immediately available in the file system and can be referred as local files within the processes. This is especially useful when a task needs to access large amounts of data (such as genome indexes) during its execution. An arbitrary number of File shares can be mounted on each pool node.</p>
<p>The Azure File share must exist in the storage account configured for Blob Storage. The name of the source Azure File share and mount path (the destination path where the files are mounted) must be provided. Additional mount options (see the Azure Files documentation) can be set as well for further customisation of the mounting process.</p>
<p>For example:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">azure</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="n">storage</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="n">accountName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;&lt;YOUR BLOB ACCOUNT NAME&gt;&quot;</span>
<span class="w">        </span><span class="n">accountKey</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;&lt;YOUR BLOB ACCOUNT KEY&gt;&quot;</span>
<span class="w">        </span><span class="n">fileShares</span><span class="w"> </span><span class="o">{</span>
<span class="w">            </span><span class="o">&lt;</span><span class="n">YOUR</span><span class="w"> </span><span class="n">SOURCE</span><span class="w"> </span><span class="n">FILE</span><span class="w"> </span><span class="n">SHARE</span><span class="w"> </span><span class="n">NAME</span><span class="o">&gt;</span><span class="w"> </span><span class="o">{</span>
<span class="w">                </span><span class="n">mountPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;&lt;YOUR MOUNT DESTINATION&gt;&quot;</span>
<span class="w">                </span><span class="n">mountOptions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;&lt;SAME AS MOUNT COMMAND&gt;&quot;</span><span class="w"> </span><span class="c1">//optional</span>
<span class="w">            </span><span class="o">}</span>
<span class="w">            </span><span class="o">&lt;</span><span class="n">YOUR</span><span class="w"> </span><span class="n">SOURCE</span><span class="w"> </span><span class="n">FILE</span><span class="w"> </span><span class="n">SHARE</span><span class="w"> </span><span class="n">NAME</span><span class="o">&gt;</span><span class="w"> </span><span class="o">{</span>
<span class="w">                </span><span class="n">mountPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;&lt;YOUR MOUNT DESTINATION&gt;&quot;</span>
<span class="w">                </span><span class="n">mountOptions</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;&lt;SAME AS MOUNT COMMAND&gt;&quot;</span><span class="w"> </span><span class="c1">//optional</span>
<span class="w">            </span><span class="o">}</span>
<span class="w">        </span><span class="o">}</span>
<span class="w">    </span><span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>The files in the File share are available to the task in the directory: <code class="docutils literal notranslate"><span class="pre">&lt;YOUR</span> <span class="pre">MOUNT</span> <span class="pre">DESTINATION&gt;</span></code>.</p>
<p>For instance, given the following configuration:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">azure</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="n">storage</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="c1">// ...</span>

<span class="w">        </span><span class="n">fileShares</span><span class="w"> </span><span class="o">{</span>
<span class="w">          </span><span class="n">rnaseqResources</span><span class="w"> </span><span class="o">{</span>
<span class="w">                </span><span class="n">mountPath</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;/mnt/mydata/myresources&quot;</span>
<span class="w">            </span><span class="o">}</span>
<span class="w">        </span><span class="o">}</span>
<span class="w">    </span><span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>The task can access the File share in <code class="docutils literal notranslate"><span class="pre">/mnt/mydata/myresources</span></code>. Note: The string <code class="docutils literal notranslate"><span class="pre">rnaseqResources</span></code> in the above config can be any name of your choice, and it does not affect the underlying mount.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Azure File shares do not support authentication and management with Active Directory. The storage account key must be
set in the configuration if a share is mounted.</p>
</div>
</section>
<section id="azure-batch">
<span id="id1"></span><h2>Azure Batch<a class="headerlink" href="#azure-batch" title="Permalink to this heading"></a></h2>
<p><a class="reference external" href="https://docs.microsoft.com/en-us/azure/batch/">Azure Batch</a> is a managed computing service that allows the execution of containerised workloads in the Azure cloud infrastructure.</p>
<p>Nextflow provides built-in support for Azure Batch, allowing the seamless deployment of Nextflow pipelines in the cloud, in which tasks are offloaded as Batch jobs.</p>
<p>Read the <a class="reference internal" href="executor.html#azurebatch-executor"><span class="std std-ref">Azore Batch executor</span></a> section to learn more about the <code class="docutils literal notranslate"><span class="pre">azurebatch</span></code> executor in Nextflow.</p>
<section id="get-started">
<h3>Get started<a class="headerlink" href="#get-started" title="Permalink to this heading"></a></h3>
<ol class="arabic simple">
<li><p>Create a Batch account in the Azure portal. Take note of the account name and key.</p></li>
<li><p>Make sure to adjust your quotas to the pipeline’s needs. There are limits on certain resources associated with the Batch account. Many of these limits are default quotas applied by Azure at the subscription or account level. Quotas impact the number of Pools, CPUs and Jobs you can create at any given time.</p></li>
<li><p>Create a Storage account and, within that, an Azure Blob Container in the same location where the Batch account was created. Take note of the account name and key.</p></li>
<li><p>If you plan to use Azure Files, create an Azure File share within the same Storage account and upload your input data.</p></li>
<li><p>Associate the Storage account with the Azure Batch account.</p></li>
<li><p>Make sure every process in your pipeline specifies one or more Docker containers with the <a class="reference internal" href="process.html#process-container"><span class="std std-ref">container</span></a> directive.</p></li>
<li><p>Make sure all of your container images are published in a Docker registry that can be accessed by your Azure Batch environment, such as <a class="reference external" href="https://hub.docker.com/">Docker Hub</a>, <a class="reference external" href="https://quay.io/">Quay</a>, or <a class="reference external" href="https://docs.microsoft.com/en-us/azure/container-registry/">Azure Container Registry</a> .</p></li>
</ol>
<p>A minimal Nextflow configuration for Azure Batch looks like the following snippet:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">process</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="n">executor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;azurebatch&#39;</span>
<span class="o">}</span>

<span class="n">azure</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="n">storage</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="n">accountName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;&lt;YOUR STORAGE ACCOUNT NAME&gt;&quot;</span>
<span class="w">        </span><span class="n">accountKey</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;&lt;YOUR STORAGE ACCOUNT KEY&gt;&quot;</span>
<span class="w">    </span><span class="o">}</span>
<span class="w">    </span><span class="n">batch</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="n">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;&lt;YOUR LOCATION&gt;&#39;</span>
<span class="w">        </span><span class="n">accountName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;&lt;YOUR BATCH ACCOUNT NAME&gt;&#39;</span>
<span class="w">        </span><span class="n">accountKey</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;&lt;YOUR BATCH ACCOUNT KEY&gt;&#39;</span>
<span class="w">        </span><span class="n">autoPoolMode</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
<span class="w">    </span><span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>In the above example, replace the location placeholder with the name of your Azure region and the account placeholders with the values corresponding to your configuration.</p>
<div class="admonition tip">
<p class="admonition-title">Tip</p>
<p>The list of Azure regions can be found by executing the following Azure CLI command:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>az<span class="w"> </span>account<span class="w"> </span>list-locations<span class="w"> </span>-o<span class="w"> </span>table
</pre></div>
</div>
</div>
<p>Finally, launch your pipeline with the above configuration:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>nextflow<span class="w"> </span>run<span class="w"> </span>&lt;PIPELINE<span class="w"> </span>NAME&gt;<span class="w"> </span>-w<span class="w"> </span>az://YOUR-CONTAINER/work
</pre></div>
</div>
<p>Replacing <code class="docutils literal notranslate"><span class="pre">&lt;PIPELINE</span> <span class="pre">NAME&gt;</span></code> with a pipeline name e.g. <code class="docutils literal notranslate"><span class="pre">nextflow-io/rnaseq-nf</span></code> and <code class="docutils literal notranslate"><span class="pre">YOUR-CONTAINER</span></code> with a blob container in the storage account defined in the above configuration.</p>
<p>See the <a class="reference external" href="https://docs.microsoft.com/en-us/azure/batch/quick-create-portal">Batch documentation</a> for further details about the configuration for Azure Batch.</p>
</section>
<section id="pools-configuration">
<h3>Pools configuration<a class="headerlink" href="#pools-configuration" title="Permalink to this heading"></a></h3>
<p>When using the <code class="docutils literal notranslate"><span class="pre">autoPoolMode</span></code> option, Nextflow automatically creates a <code class="docutils literal notranslate"><span class="pre">pool</span></code> of compute nodes to execute the jobs in your pipeline. By default, it only uses one compute node of the type <code class="docutils literal notranslate"><span class="pre">Standard_D4_v3</span></code>.</p>
<p>The pool is not removed when the pipeline terminates, unless the configuration setting <code class="docutils literal notranslate"><span class="pre">deletePoolsOnCompletion</span> <span class="pre">=</span> <span class="pre">true</span></code> is added in your Nextflow configuration file.</p>
<p>Pool specific settings, such as VM type and count, should be provided in the <code class="docutils literal notranslate"><span class="pre">auto</span></code> pool configuration scope, for example:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">azure</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="n">batch</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="n">pools</span><span class="w"> </span><span class="o">{</span>
<span class="w">            </span><span class="n">auto</span><span class="w"> </span><span class="o">{</span>
<span class="w">                </span><span class="n">vmType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Standard_D2_v2&#39;</span>
<span class="w">                </span><span class="n">vmCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span>
<span class="w">            </span><span class="o">}</span>
<span class="w">        </span><span class="o">}</span>
<span class="w">    </span><span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>To avoid any extra charges in the Batch account, remember to clean up the Batch pools or use auto scaling.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Make sure your Batch account has enough resources to satisfy the pipeline’s requirements and the pool configuration.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Nextflow uses the same pool ID across pipeline executions, if the pool features have not changed. Therefore, when using <code class="docutils literal notranslate"><span class="pre">deletePoolsOnCompletion</span> <span class="pre">=</span> <span class="pre">true</span></code>, make sure the pool is completely removed from the Azure Batch account before re-running the pipeline. The following message is returned when the pool is still shutting down:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">Error</span> <span class="n">executing</span> <span class="n">process</span> <span class="o">&gt;</span> <span class="s1">&#39;&lt;process name&gt; (1)&#39;</span>
<span class="n">Caused</span> <span class="n">by</span><span class="p">:</span>
    <span class="n">Azure</span> <span class="n">Batch</span> <span class="n">pool</span> <span class="s1">&#39;&lt;pool name&gt;&#39;</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">active</span> <span class="n">state</span>
</pre></div>
</div>
</div>
</section>
<section id="named-pools">
<h3>Named pools<a class="headerlink" href="#named-pools" title="Permalink to this heading"></a></h3>
<p>If you want to have more precise control over the compute node pools used in your pipeline, such as using a different pool depending on the task in your pipeline, you can use the <a class="reference internal" href="process.html#process-queue"><span class="std std-ref">queue</span></a> directive in Nextflow to specify the ID of a Azure Batch compute pool that should be used to execute that process.</p>
<p>The pool is expected to be already available in the Batch environment, unless the setting <code class="docutils literal notranslate"><span class="pre">allowPoolCreation</span> <span class="pre">=</span> <span class="pre">true</span></code> is provided in the <code class="docutils literal notranslate"><span class="pre">azure.batch</span></code> config scope in the pipeline configuration file. In the latter case, Nextflow will create the pools on-demand.</p>
<p>The configuration details for each pool can be specified using a snippet as shown below:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">azure</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="n">batch</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="n">pools</span><span class="w"> </span><span class="o">{</span>
<span class="w">            </span><span class="n">foo</span><span class="w"> </span><span class="o">{</span>
<span class="w">                </span><span class="n">vmType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Standard_D2_v2&#39;</span>
<span class="w">                </span><span class="n">vmCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">10</span>
<span class="w">            </span><span class="o">}</span>

<span class="w">            </span><span class="n">bar</span><span class="w"> </span><span class="o">{</span>
<span class="w">                </span><span class="n">vmType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Standard_E2_v3&#39;</span>
<span class="w">                </span><span class="n">vmCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span>
<span class="w">            </span><span class="o">}</span>
<span class="w">        </span><span class="o">}</span>
<span class="w">    </span><span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>The above example defines the configuration for two node pools. The first will provision 10 compute nodes of type <code class="docutils literal notranslate"><span class="pre">Standard_D2_v2</span></code>, the second 5 nodes of type <code class="docutils literal notranslate"><span class="pre">Standard_E2_v3</span></code>. See the <a class="reference internal" href="config.html#config-azure"><span class="std std-ref">Azure configuration</span></a> section for the complete list of available configuration options.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The pool name can only contain alphanumeric, hyphen and underscore characters.</p>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>If the pool name includes a hyphen, make sure to wrap it with single quotes. For example:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">azure</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="n">batch</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="n">pools</span><span class="w"> </span><span class="o">{</span>
<span class="w">            </span><span class="s1">&#39;foo-2&#39;</span><span class="w"> </span><span class="o">{</span>
<span class="w">                </span><span class="o">...</span>
<span class="w">            </span><span class="o">}</span>
<span class="w">        </span><span class="o">}</span>
<span class="w">    </span><span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
</div>
</section>
<section id="requirements-on-pre-existing-named-pools">
<h3>Requirements on pre-existing named pools<a class="headerlink" href="#requirements-on-pre-existing-named-pools" title="Permalink to this heading"></a></h3>
<p>When Nextflow is configured to use a pool already available in the Batch account, the target pool must satisfy the following requirements:</p>
<ol class="arabic simple">
<li><p>The pool must be declared as <code class="docutils literal notranslate"><span class="pre">dockerCompatible</span></code> (<code class="docutils literal notranslate"><span class="pre">Container</span> <span class="pre">Type</span></code> property).</p></li>
<li><p>The task slots per node must match the number of cores for the selected VM. Otherwise, Nextflow will return an error like “Azure Batch pool ‘ID’ slots per node does not match the VM num cores (slots: N, cores: Y)”.</p></li>
</ol>
</section>
<section id="pool-autoscaling">
<h3>Pool autoscaling<a class="headerlink" href="#pool-autoscaling" title="Permalink to this heading"></a></h3>
<p>Azure Batch can automatically scale pools based on parameters that you define, saving you time and money. With automatic scaling, Batch dynamically adds nodes to a pool as task demands increase, and removes compute nodes as task demands decrease.</p>
<p>To enable this feature for pools created by Nextflow, add the option <code class="docutils literal notranslate"><span class="pre">autoScale</span> <span class="pre">=</span> <span class="pre">true</span></code> to the corresponding pool configuration scope. For example, when using the <code class="docutils literal notranslate"><span class="pre">autoPoolMode</span></code>, the setting looks like:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">azure</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="n">batch</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="n">pools</span><span class="w"> </span><span class="o">{</span>
<span class="w">            </span><span class="n">auto</span><span class="w"> </span><span class="o">{</span>
<span class="w">                </span><span class="n">autoScale</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
<span class="w">                </span><span class="n">vmType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Standard_D2_v2&#39;</span>
<span class="w">                </span><span class="n">vmCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span>
<span class="w">                </span><span class="n">maxVmCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">50</span>
<span class="w">            </span><span class="o">}</span>
<span class="w">        </span><span class="o">}</span>
<span class="w">    </span><span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>Nextflow uses the formula shown below to determine the number of VMs to be provisioned in the pool:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>// Get pool lifetime since creation.
lifespan = time() - time(&quot;{{poolCreationTime}}&quot;);
interval = TimeInterval_Minute * {{scaleInterval}};

// Compute the target nodes based on pending tasks.
// $PendingTasks == The sum of $ActiveTasks and $RunningTasks
$samples = $PendingTasks.GetSamplePercent(interval);
$tasks = $samples &lt; 70 ? max(0, $PendingTasks.GetSample(1)) : max( $PendingTasks.GetSample(1), avg($PendingTasks.GetSample(interval)));
$targetVMs = $tasks &gt; 0 ? $tasks : max(0, $TargetDedicatedNodes/2);
targetPoolSize = max(0, min($targetVMs, {{maxVmCount}}));

// For first interval deploy 1 node, for other intervals scale up/down as per tasks.
$TargetDedicatedNodes = lifespan &lt; interval ? {{vmCount}} : targetPoolSize;
$NodeDeallocationOption = taskcompletion;
</pre></div>
</div>
<p>The above formula initialises a pool with the number of VMs specified by the <code class="docutils literal notranslate"><span class="pre">vmCount</span></code> option, and scales up the pool on-demand, based on the number of pending tasks, up to <code class="docutils literal notranslate"><span class="pre">maxVmCount</span></code> nodes. If no jobs are submitted for execution, it scales down to zero nodes automatically.</p>
<p>If you need a different strategy, you can provide your own formula using the <code class="docutils literal notranslate"><span class="pre">scaleFormula</span></code> option. See the <a class="reference external" href="https://docs.microsoft.com/en-us/azure/batch/batch-automatic-scaling">Azure Batch</a> documentation for details.</p>
</section>
<section id="pool-nodes">
<h3>Pool nodes<a class="headerlink" href="#pool-nodes" title="Permalink to this heading"></a></h3>
<p>When Nextflow creates a pool of compute nodes, it selects:</p>
<ul class="simple">
<li><p>the virtual machine image reference to be installed on the node</p></li>
<li><p>the Batch node agent SKU, a program that runs on each node and provides an interface between the node and the Batch service</p></li>
</ul>
<p>Together, these settings determine the Operating System and version installed on each node.</p>
<p>By default, Nextflow creates pool nodes based on CentOS 8, but this behavior can be customised in the pool configuration. Below are configurations for image reference/SKU combinations to select two popular systems.</p>
<ul>
<li><p>Ubuntu 20.04 (default):</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">azure</span><span class="o">.</span><span class="na">batch</span><span class="o">.</span><span class="na">pools</span><span class="o">.&lt;</span><span class="n">name</span><span class="o">&gt;.</span><span class="na">sku</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;batch.node.ubuntu 20.04&quot;</span>
<span class="n">azure</span><span class="o">.</span><span class="na">batch</span><span class="o">.</span><span class="na">pools</span><span class="o">.&lt;</span><span class="n">name</span><span class="o">&gt;.</span><span class="na">offer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;ubuntu-server-container&quot;</span>
<span class="n">azure</span><span class="o">.</span><span class="na">batch</span><span class="o">.</span><span class="na">pools</span><span class="o">.&lt;</span><span class="n">name</span><span class="o">&gt;.</span><span class="na">publisher</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;microsoft-azure-batch&quot;</span>
</pre></div>
</div>
</li>
<li><p>CentOS 8:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">azure</span><span class="o">.</span><span class="na">batch</span><span class="o">.</span><span class="na">pools</span><span class="o">.&lt;</span><span class="n">name</span><span class="o">&gt;.</span><span class="na">sku</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;batch.node.centos 8&quot;</span>
<span class="n">azure</span><span class="o">.</span><span class="na">batch</span><span class="o">.</span><span class="na">pools</span><span class="o">.&lt;</span><span class="n">name</span><span class="o">&gt;.</span><span class="na">offer</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;centos-container&quot;</span>
<span class="n">azure</span><span class="o">.</span><span class="na">batch</span><span class="o">.</span><span class="na">pools</span><span class="o">.&lt;</span><span class="n">name</span><span class="o">&gt;.</span><span class="na">publisher</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s2">&quot;microsoft-azure-batch&quot;</span>
</pre></div>
</div>
</li>
</ul>
<p>In the above snippet, replace <code class="docutils literal notranslate"><span class="pre">&lt;name&gt;</span></code> with the name of your Azure node pool.</p>
<p>See the <a class="reference internal" href="config.html#config-azure"><span class="std std-ref">Azure configuration</span></a> section and the <a class="reference external" href="https://docs.microsoft.com/en-us/azure/batch/batch-linux-nodes">Azure Batch nodes</a> documentation for more details.</p>
</section>
<section id="private-container-registry">
<h3>Private container registry<a class="headerlink" href="#private-container-registry" title="Permalink to this heading"></a></h3>
<div class="versionadded">
<p><span class="versionmodified added">New in version 21.05.0-edge.</span></p>
</div>
<p>A private container registry for Docker images can be specified as follows:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">azure</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="n">registry</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="n">server</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;&lt;YOUR REGISTRY SERVER&gt;&#39;</span><span class="w"> </span><span class="c1">// e.g.: docker.io, quay.io, &lt;ACCOUNT&gt;.azurecr.io, etc.</span>
<span class="w">        </span><span class="n">userName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;&lt;YOUR REGISTRY USER NAME&gt;&#39;</span>
<span class="w">        </span><span class="n">password</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;&lt;YOUR REGISTRY PASSWORD&gt;&#39;</span>
<span class="w">    </span><span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>The private registry is an addition, not a replacement, to the existing configuration. Public images from other registries will still be pulled as normal, if they are requested.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>When using containers hosted in a private registry, the registry name must also be provided in the container name specified via the <a class="reference internal" href="process.html#process-container"><span class="std std-ref">container</span></a> directive using the format: <code class="docutils literal notranslate"><span class="pre">[server]/[your-organization]/[your-image]:[tag]</span></code>. Read more about fully qualified image names in the <a class="reference external" href="https://docs.docker.com/engine/reference/commandline/pull/#pull-from-a-different-registry">Docker documentation</a>.</p>
</div>
</section>
<section id="virtual-network">
<h3>Virtual Network<a class="headerlink" href="#virtual-network" title="Permalink to this heading"></a></h3>
<div class="versionadded">
<p><span class="versionmodified added">New in version 23.03.0-edge.</span></p>
</div>
<p>Sometimes it might be useful to create a pool in an existing <a class="reference external" href="https://learn.microsoft.com/en-us/azure/virtual-network/">Virtual Network</a>. To do so, the
<code class="docutils literal notranslate"><span class="pre">virtualNetwork</span></code> option can be added to the pool settings as follows:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">azure</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="n">batch</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="n">pools</span><span class="w"> </span><span class="o">{</span>
<span class="w">            </span><span class="n">auto</span><span class="w"> </span><span class="o">{</span>
<span class="w">                </span><span class="n">autoScale</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span>
<span class="w">                </span><span class="n">vmType</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;Standard_D2_v2&#39;</span>
<span class="w">                </span><span class="n">vmCount</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">5</span>
<span class="w">                </span><span class="n">virtualNetwork</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;&lt;YOUR SUBNET ID&gt;&#39;</span>
<span class="w">            </span><span class="o">}</span>
<span class="w">        </span><span class="o">}</span>
<span class="w">    </span><span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
<p>The value of the setting must be the identifier of a subnet available in the virtual network to join. A valid subnet ID has the following form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">/</span><span class="n">subscriptions</span><span class="o">/&lt;</span><span class="n">YOUR</span> <span class="n">SUBSCRIPTION</span> <span class="n">ID</span><span class="o">&gt;/</span><span class="n">resourceGroups</span><span class="o">/&lt;</span><span class="n">YOUR</span> <span class="n">RESOURCE</span> <span class="n">GROUP</span> <span class="n">NAME</span><span class="o">&gt;/</span><span class="n">providers</span><span class="o">/</span><span class="n">Microsoft</span><span class="o">.</span><span class="n">Network</span><span class="o">/</span><span class="n">virtualNetworks</span><span class="o">/&lt;</span><span class="n">YOUR</span> <span class="n">VIRTUAL</span> <span class="n">NETWORK</span> <span class="n">NAME</span><span class="o">&gt;/</span><span class="n">subnets</span><span class="o">/&lt;</span><span class="n">YOUR</span> <span class="n">SUBNET</span> <span class="n">NAME</span><span class="o">&gt;</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Batch Authentication with Shared Keys does not allow to link external resources (like Virtual Networks) to the pool. Therefore, Active Directory Authentication must be used in conjunction with the <code class="docutils literal notranslate"><span class="pre">virtualNetwork</span></code> setting.</p>
</div>
</section>
</section>
<section id="microsoft-entra-formerly-active-directory-authentication">
<h2>Microsoft Entra (formerly Active Directory Authentication)<a class="headerlink" href="#microsoft-entra-formerly-active-directory-authentication" title="Permalink to this heading"></a></h2>
<div class="versionadded">
<p><span class="versionmodified added">New in version 22.11.0-edge.</span></p>
</div>
<p><a class="reference external" href="https://learn.microsoft.com/en-us/azure/active-directory/develop/howto-create-service-principal-portal">Service Principal</a> credentials can optionally be used instead of Shared Keys for Azure Batch and Storage accounts.</p>
<p>The Service Principal should have the at least the following role assignments:</p>
<ol class="arabic simple">
<li><p>Contributor</p></li>
<li><p>Storage Blob Data Reader</p></li>
<li><p>Storage Blob Data Contributor</p></li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>To assign the necessary roles to the Service Principal, refer to the <a class="reference external" href="https://learn.microsoft.com/en-us/azure/role-based-access-control/role-assignments-portal?tabs=current">official Azure documentation</a>.</p>
</div>
<p>The credentials for Service Principal can be specified as follows:</p>
<div class="highlight-groovy notranslate"><div class="highlight"><pre><span></span><span class="n">azure</span><span class="w"> </span><span class="o">{</span>
<span class="w">    </span><span class="n">activeDirectory</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="n">servicePrincipalId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;&lt;YOUR SERVICE PRINCIPAL CLIENT ID&gt;&#39;</span>
<span class="w">        </span><span class="n">servicePrincipalSecret</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;&lt;YOUR SERVICE PRINCIPAL CLIENT SECRET&gt;&#39;</span>
<span class="w">        </span><span class="n">tenantId</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;&lt;YOUR TENANT ID&gt;&#39;</span>
<span class="w">    </span><span class="o">}</span>

<span class="w">    </span><span class="n">storage</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="n">accountName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;&lt;YOUR STORAGE ACCOUNT NAME&gt;&#39;</span>
<span class="w">    </span><span class="o">}</span>

<span class="w">    </span><span class="n">batch</span><span class="w"> </span><span class="o">{</span>
<span class="w">        </span><span class="n">accountName</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;&lt;YOUR BATCH ACCOUNT NAME&gt;&#39;</span>
<span class="w">        </span><span class="n">location</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s1">&#39;&lt;YOUR BATCH ACCOUNT LOCATION&gt;&#39;</span>
<span class="w">    </span><span class="o">}</span>
<span class="o">}</span>
</pre></div>
</div>
</section>
<section id="advanced-configuration">
<h2>Advanced configuration<a class="headerlink" href="#advanced-configuration" title="Permalink to this heading"></a></h2>
<p>Read the <a class="reference internal" href="config.html#config-azure"><span class="std std-ref">Azure configuration</span></a> section to learn more about advanced configuration options.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="amazons3.html" class="btn btn-neutral float-left" title="AWS S3 storage" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="fusion.html" class="btn btn-neutral float-right" title="Fusion file system" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Seqera Labs, S.L.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
     
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TNCXSWG"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->


</body>
</html>